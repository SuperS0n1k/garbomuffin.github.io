<!DOCTYPE html>
<html>
  <head>
    <title>Edit This Page</title>
    <link rel="stylesheet" href="/core.css">

    <style>
      body {
        background-color: #CCCCCC;
      }

      #container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
        background-color: #EEEEEE;
        border-radius: 50px;
        padding: 50px 100px;
        text-align: center;
        width: 50%;
        box-shadow: 5px 5px 5px #444;
      }

      #dont-click-message {
        display: none;
      }

      #installation-congrats {
        position: fixed;
        text-align: center;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #000000BB;
        color: white;
        display: none;
      }
      .nomargin {
        margin: 0;
      }
    </style>
  </head>

  <body>
    <div id="container">
      <h1 class="nomargin">Edit This Page</h1>
      <i>A bookmarklet that lets you edit the text of any website</i>
  
      <h2>Installation</h2>
      <p><b>Drag the following link onto your bookmarks bar: <a onclick="return showDontClickMessage();" id="install-button">Edit This Page</a></b></p>
      <p id="dont-click-message"><b>Don't click on it, drag it onto your bookmarks bar!</b></p>
  
      <h2>Usage</h2>
      <p>Just click on the bookmark. Each time the script is activated the "editability" of the page is toggled.</p>
      <p><i><small>Depending on the website and your internet connection, there may be a few seconds of delay before the page becomes editable.</small></i></p>
  
    </div>

    <div id="installation-congrats">
      <h1>Success!</h1>
      <p>Edit This Page is installed correctly and is working. It's really that easy.</p>
      <p>Try editing this text.</p>
      <p><small>(you won't see this message on other sites, just this one)</small></p>
      <button onclick="hideInstallMessage();">Hide This Message</button>
    </div>

    <script src="bookmarklet.js"></script>
    <script>
      // Remind the user to DRAG THE THING TO YOUR BOOKMARKS BAR and not click it
      function showDontClickMessage() {
        document.getElementById("dont-click-message").style.display = "inline";
        return false;
      }

      function hideInstallMessage() {
        document.getElementById("installation-congrats").style.display = "none";
      }

      var installCheckInterval = setInterval(function () {
        if (typeof window.__editThisPageState !== "undefined") {
          document.getElementById("installation-congrats").style.display = "block";
          clearInterval(installCheckInterval);
        }
      }, 100);
    </script>
  </body>
</html>
