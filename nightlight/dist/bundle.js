/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/3rd-party/stableSort.ts":
/*!*************************************!*\
  !*** ./src/3rd-party/stableSort.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n// https://gist.github.com/fsufitch/18bb4692d5f46b649890f8fd58765fbc with minor style changes\r\nconst defaultCmp = (a, b) => a - b;\r\nArray.prototype.stableSort = function (cmp = defaultCmp) {\r\n    const stabilized = this.map((el, index) => ([el, index]));\r\n    const stableCmp = (a, b) => {\r\n        const order = cmp(a[0], b[0]);\r\n        if (order !== 0) {\r\n            return order;\r\n        }\r\n        return a[1] - b[1];\r\n    };\r\n    stabilized.sort(stableCmp);\r\n    for (let i = 0; i < this.length; i++) {\r\n        this[i] = stabilized[i][0];\r\n    }\r\n    return this;\r\n};\r\n\n\n//# sourceURL=webpack:///./src/3rd-party/stableSort.ts?");

/***/ }),

/***/ "./src/blockmap.ts":
/*!*************************!*\
  !*** ./src/blockmap.ts ***!
  \*************************/
/*! exports provided: blockMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blockMap\", function() { return blockMap; });\n/* harmony import */ var _game_sprites_blocks_black__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game/sprites/blocks/black */ \"./src/game/sprites/blocks/black.ts\");\n/* harmony import */ var _game_sprites_blocks_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game/sprites/blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _game_sprites_blocks_blockswitchspawner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game/sprites/blocks/blockswitchspawner */ \"./src/game/sprites/blocks/blockswitchspawner.ts\");\n/* harmony import */ var _game_sprites_blocks_coinspawner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game/sprites/blocks/coinspawner */ \"./src/game/sprites/blocks/coinspawner.ts\");\n/* harmony import */ var _game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./game/sprites/blocks/corner */ \"./src/game/sprites/blocks/corner.ts\");\n/* harmony import */ var _game_sprites_blocks_crumble__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./game/sprites/blocks/crumble */ \"./src/game/sprites/blocks/crumble.ts\");\n/* harmony import */ var _game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./game/sprites/blocks/falling */ \"./src/game/sprites/blocks/falling.ts\");\n/* harmony import */ var _game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./game/sprites/blocks/grass */ \"./src/game/sprites/blocks/grass.ts\");\n/* harmony import */ var _game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./game/sprites/blocks/lightblock */ \"./src/game/sprites/blocks/lightblock.ts\");\n/* harmony import */ var _game_sprites_blocks_lightswitch__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./game/sprites/blocks/lightswitch */ \"./src/game/sprites/blocks/lightswitch.ts\");\n/* harmony import */ var _game_sprites_blocks_oneway__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./game/sprites/blocks/oneway */ \"./src/game/sprites/blocks/oneway.ts\");\n/* harmony import */ var _game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./game/sprites/blocks/spike */ \"./src/game/sprites/blocks/spike.ts\");\n/* harmony import */ var _game_sprites_blocks_tallgrass__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./game/sprites/blocks/tallgrass */ \"./src/game/sprites/blocks/tallgrass.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n// tslint:disable-next-line\r\n\r\n\r\n// tslint:disable-next-line\r\n\r\n\r\n\r\n\r\n\r\nfunction special(type, texture) {\r\n    return {\r\n        type, texture,\r\n    };\r\n}\r\nfunction solid(texture) {\r\n    return {\r\n        type: _game_sprites_blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"StaticSolidBlock\"],\r\n        texture,\r\n    };\r\n}\r\nconst blockMap = {\r\n    \"a\": special(_game_sprites_blocks_black__WEBPACK_IMPORTED_MODULE_0__[\"BlackBlock\"], \"blocks/a\"),\r\n    \"b\": solid(\"blocks/b\"),\r\n    \"c\": solid(\"blocks/c\"),\r\n    \"d\": solid(\"blocks/d\"),\r\n    \"e\": solid(\"blocks/e\"),\r\n    \"f\": solid(\"blocks/f\"),\r\n    \"g\": solid(\"blocks/g\"),\r\n    \"h\": solid(\"blocks/h\"),\r\n    \"i\": solid(\"blocks/i\"),\r\n    \"j\": special(_game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__[\"GrassBlock\"], \"blocks/j\"),\r\n    \"k\": special(_game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__[\"GrassBlock\"], \"blocks/k\"),\r\n    \"l\": special(_game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__[\"GrassBlock\"], \"blocks/l\"),\r\n    \"m\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"RotatedCornerBlock\"], \"blocks/m\"),\r\n    \"]\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"SolidRotatedCornerBlock\"], \"blocks/m\"),\r\n    \"n\": special(_game_sprites_blocks_coinspawner__WEBPACK_IMPORTED_MODULE_3__[\"AboveLevelUpCoinSpawnerBlock\"], \"blocks/n\"),\r\n    \"o\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"UpSpikeBlock\"], \"blocks/spikes/up\"),\r\n    \"p\": special(_game_sprites_blocks_tallgrass__WEBPACK_IMPORTED_MODULE_12__[\"TallGrassBlock\"], \"blocks/p\"),\r\n    \"q\": special(_game_sprites_blocks_tallgrass__WEBPACK_IMPORTED_MODULE_12__[\"TallGrassBlock\"], \"blocks/q\"),\r\n    \"r\": solid(\"blocks/r\"),\r\n    \"s\": solid(\"blocks/s\"),\r\n    \"t\": special(_game_sprites_blocks_crumble__WEBPACK_IMPORTED_MODULE_5__[\"CrumblingBlock\"], \"blocks/crumble/1\"),\r\n    \"u\": special(_game_sprites_blocks_blockswitchspawner__WEBPACK_IMPORTED_MODULE_2__[\"RedGreenBlockSwitchSpawner\"], \"blocks/button/redgreen/spawner\"),\r\n    \"U\": special(_game_sprites_blocks_blockswitchspawner__WEBPACK_IMPORTED_MODULE_2__[\"AquaOrangeBlockSwitchSpawner\"], \"blocks/button/aquaorange/spawner\"),\r\n    \"v\": solid(\"blocks/v\"),\r\n    \"w\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"RedGreenVibratingFallingBlock\"], \"blocks/w\"),\r\n    \"W\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"AquaOrangeVibratingFallingBlock\"], \"blocks/capitalw\"),\r\n    \"[\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"RedGreenInstantFallingBlock\"], \"blocks/w\"),\r\n    \"{\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"AquaOrangeInstantFallingBlock\"], \"blocks/capitalw\"),\r\n    \"x\": special(_game_sprites_blocks_lightswitch__WEBPACK_IMPORTED_MODULE_9__[\"RedGreenLightSwitchBlock\"], \"blocks/lightbutton/1\"),\r\n    \"y\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock1\"], \"blocks/editory\"),\r\n    \"z\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock1\"], \"blocks/z\"),\r\n    \"Y\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock2\"], \"blocks/capitaly\"),\r\n    \"Z\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock2\"], \"blocks/capitalz\"),\r\n    \"O\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock3\"], \"blocks/capitalo\"),\r\n    \"P\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock3\"], \"blocks/capitalp\"),\r\n    \"Q\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock4\"], \"blocks/capitalq\"),\r\n    \"R\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock4\"], \"blocks/capitalr\"),\r\n    // Post sword\r\n    \"1\": solid(\"blocks/1\"),\r\n    \"2\": solid(\"blocks/2\"),\r\n    \"3\": solid(\"blocks/3\"),\r\n    \"4\": solid(\"blocks/4\"),\r\n    \"5\": solid(\"blocks/5\"),\r\n    \"6\": solid(\"blocks/6\"),\r\n    \"7\": solid(\"blocks/7\"),\r\n    \"8\": solid(\"blocks/8\"),\r\n    \"9\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"RotatedCornerBlock\"], \"blocks/9\"),\r\n    \"@\": special(_game_sprites_blocks_coinspawner__WEBPACK_IMPORTED_MODULE_3__[\"BelowLevelUpCoinSpawnerBlock\"], \"blocks/n\"),\r\n    \"!\": special(_game_sprites_blocks_oneway__WEBPACK_IMPORTED_MODULE_10__[\"OneWayBlock\"], \"blocks/!\"),\r\n    \"#\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"LeftSpikeBlock\"], \"blocks/spikes/left\"),\r\n    \"$\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"RightSpikeBlock\"], \"blocks/spikes/right\"),\r\n    \"%\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"DownSpikeBlock\"], \"blocks/spikes/down\"),\r\n    // Castle\r\n    \"^\": special(_game_sprites_blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"PseudoSolidBlock\"], \"blocks/caret\"),\r\n    \"&\": solid(\"blocks/ampersand\"),\r\n    \"*\": solid(\"blocks/asterisk\"),\r\n    \"(\": solid(\"blocks/(\"),\r\n    \")\": solid(\"blocks/)\"),\r\n    \"-\": solid(\"blocks/-\"),\r\n    \"_\": solid(\"blocks/underscore\"),\r\n    \"=\": solid(\"blocks/=\"),\r\n    \"+\": solid(\"blocks/+\"),\r\n    \"`\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"CastleCornerBlock\"], \"blocks/grave\"),\r\n    \"S\": solid(\"blocks/capitals\"),\r\n    \"T\": solid(\"blocks/capitalt\"),\r\n    \"V\": solid(\"blocks/capitalv\"),\r\n    \"}\": solid(\"blocks/closingcurlybracket\"),\r\n    \"|\": solid(\"blocks/pipe\"),\r\n    \"'\": solid(\"blocks/singlequote\"),\r\n    // New blocks!\r\n    \"A\": solid(\"blocks/capitala\"),\r\n    \"B\": solid(\"blocks/capitalb\"),\r\n    \"C\": solid(\"blocks/capitalc\"),\r\n    \"D\": solid(\"blocks/capitald\"),\r\n    \"E\": solid(\"blocks/capitale\"),\r\n    \"F\": solid(\"blocks/capitalf\"),\r\n    \"G\": solid(\"blocks/capitalg\"),\r\n    \"H\": solid(\"blocks/capitalh\"),\r\n    \"I\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"RotatedCornerBlock\"], \"blocks/capitali\"),\r\n    \"J\": solid(\"blocks/capitalj\"),\r\n    \"K\": solid(\"blocks/capitalk\"),\r\n    \"L\": solid(\"blocks/capitall\"),\r\n    \"M\": solid(\"blocks/capitalm\"),\r\n    \"N\": solid(\"blocks/capitaln\"),\r\n};\r\n\n\n//# sourceURL=webpack:///./src/blockmap.ts?");

/***/ }),

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/*! exports provided: BLOCK_HEIGHT, BLOCK_WIDTH, LEVEL_HEIGHT, LEVEL_WIDTH, GRAVITY, FRICTION, CHEATS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BLOCK_HEIGHT\", function() { return BLOCK_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BLOCK_WIDTH\", function() { return BLOCK_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LEVEL_HEIGHT\", function() { return LEVEL_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LEVEL_WIDTH\", function() { return LEVEL_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GRAVITY\", function() { return GRAVITY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FRICTION\", function() { return FRICTION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHEATS\", function() { return CHEATS; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\r\n/*\r\n * Config values that are global to the whole game\r\n * Options to one specific thing are in its file\r\n */\r\nconst BLOCK_HEIGHT = 16;\r\nconst BLOCK_WIDTH = 16;\r\nconst LEVEL_HEIGHT = 23;\r\nconst LEVEL_WIDTH = 30;\r\nconst GRAVITY = 0.195;\r\nconst FRICTION = 0.75;\r\nconst CHEATS = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getSearchParam\"])(\"cheats\") === \"on\";\r\n\n\n//# sourceURL=webpack:///./src/config.ts?");

/***/ }),

/***/ "./src/editor/blockmapkeys.ts":
/*!************************************!*\
  !*** ./src/editor/blockmapkeys.ts ***!
  \************************************/
/*! exports provided: BLOCK_MAP_KEYS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BLOCK_MAP_KEYS\", function() { return BLOCK_MAP_KEYS; });\n// Not relying on Object.keys allows us to control the order\r\n// and organize the blocks in the gallery how I want.\r\nconst BLOCK_MAP_KEYS = [\r\n    // Theme 1\r\n    \"b\",\r\n    \"e\",\r\n    \"g\",\r\n    \"m\",\r\n    \"c\",\r\n    \"a\",\r\n    \"h\",\r\n    \"]\",\r\n    \"d\",\r\n    \"f\",\r\n    \"i\",\r\n    \"empty\",\r\n    \"v\",\r\n    \"A\",\r\n    \"}\",\r\n    \"empty\",\r\n    // Theme 2\r\n    \"1\",\r\n    \"4\",\r\n    \"6\",\r\n    \"9\",\r\n    \"2\",\r\n    \"a\",\r\n    \"7\",\r\n    \"empty\",\r\n    \"3\",\r\n    \"5\",\r\n    \"8\",\r\n    \"empty\",\r\n    \"C\",\r\n    \"B\",\r\n    \"'\",\r\n    \"empty\",\r\n    // Castle Theme\r\n    \"&\",\r\n    \")\",\r\n    \"_\",\r\n    \"`\",\r\n    \"*\",\r\n    \"^\",\r\n    \"=\",\r\n    \"empty\",\r\n    \"(\",\r\n    \"-\",\r\n    \"+\",\r\n    \"empty\",\r\n    \"T\",\r\n    \"V\",\r\n    \"S\",\r\n    \"empty\",\r\n    // Green Theme... hoorary\r\n    \"L\",\r\n    \"D\",\r\n    \"F\",\r\n    \"I\",\r\n    \"M\",\r\n    \"a\",\r\n    \"G\",\r\n    \"empty\",\r\n    \"N\",\r\n    \"E\",\r\n    \"H\",\r\n    \"empty\",\r\n    \"K\",\r\n    \"J\",\r\n    \"|\",\r\n    \"empty\",\r\n    // Grass\r\n    \"j\",\r\n    \"k\",\r\n    \"l\",\r\n    // Tall grass\r\n    \"p\",\r\n    \"q\",\r\n    \"t\",\r\n    \"!\",\r\n    // Light blocks\r\n    \"x\",\r\n    \"y\",\r\n    \"z\",\r\n    \"Y\",\r\n    \"Z\",\r\n    \"O\",\r\n    \"P\",\r\n    \"R\",\r\n    \"Q\",\r\n    \"o\",\r\n    \"%\",\r\n    \"#\",\r\n    \"$\",\r\n    \"n\",\r\n    \"@\",\r\n    \"r\",\r\n    \"s\",\r\n    \"u\",\r\n    \"w\",\r\n    \"[\",\r\n    \"empty\",\r\n    \"U\",\r\n    \"W\",\r\n    \"{\",\r\n];\r\n\n\n//# sourceURL=webpack:///./src/editor/blockmapkeys.ts?");

/***/ }),

/***/ "./src/editor/editor.ts":
/*!******************************!*\
  !*** ./src/editor/editor.ts ***!
  \******************************/
/*! exports provided: NightlightLevelEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NightlightLevelEditor\", function() { return NightlightLevelEditor; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../engine/runtime */ \"./src/engine/runtime.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _levelcode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../levelcode */ \"./src/levelcode.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _blockmapkeys__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./blockmapkeys */ \"./src/editor/blockmapkeys.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _sprites_BlockSelectorSprite__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sprites/BlockSelectorSprite */ \"./src/editor/sprites/BlockSelectorSprite.ts\");\n/* harmony import */ var _sprites_BossSelectorSprite__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sprites/BossSelectorSprite */ \"./src/editor/sprites/BossSelectorSprite.ts\");\n/* harmony import */ var _sprites_JumpLightSelectorSprite__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./sprites/JumpLightSelectorSprite */ \"./src/editor/sprites/JumpLightSelectorSprite.ts\");\n/* harmony import */ var _sprites_LevelRenderer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sprites/LevelRenderer */ \"./src/editor/sprites/LevelRenderer.ts\");\n/* harmony import */ var _sprites_PlayerSpawnSelectorSprite__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./sprites/PlayerSpawnSelectorSprite */ \"./src/editor/sprites/PlayerSpawnSelectorSprite.ts\");\n/* harmony import */ var _sprites_TextSelectorSprite__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./sprites/TextSelectorSprite */ \"./src/editor/sprites/TextSelectorSprite.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass NightlightLevelEditor extends _engine_runtime__WEBPACK_IMPORTED_MODULE_2__[\"GameRuntime\"] {\r\n    constructor() {\r\n        super(Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"canvas\"));\r\n        this.levelData = [];\r\n        this.jumpLights = [];\r\n        this.text = [];\r\n        this.mode = _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Blocks;\r\n        this.ui = {\r\n            container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-ui\"),\r\n            getJsonCodeButton: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-get-json-code\"),\r\n            importCodeButton: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-import-code\"),\r\n            openLevel: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-open-level\"),\r\n            codeOutput: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-code-output\"),\r\n            modeSelect: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-mode\"),\r\n            welcome: {\r\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-welcome\"),\r\n                content: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-welcome-content\"),\r\n                toggleButton: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-welcome-toggle\"),\r\n            },\r\n            options: {\r\n                dark: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-dark\"),\r\n                stars: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-stars\"),\r\n                background: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-background\"),\r\n                music: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-music\"),\r\n            },\r\n            jumpLights: {\r\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-jump-lights\"),\r\n                snapToGrid: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-jump-lights-snap\"),\r\n            },\r\n            blocks: {\r\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-block\"),\r\n                activeBlockImage: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-active-block-image\"),\r\n                gallery: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-block-gallery\"),\r\n                activeBlockDescription: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-active-block-description\"),\r\n            },\r\n            text: {\r\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-text\"),\r\n                snapToGrid: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-text-snap\"),\r\n            },\r\n            boss: {\r\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-boss\"),\r\n                selection: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-selection\"),\r\n                sword: {\r\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-sword\"),\r\n                    blocksFromTop: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-sword-blocks-from-top\"),\r\n                    health: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-sword-health\"),\r\n                },\r\n                noss1: {\r\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-noss1\"),\r\n                },\r\n                noss2: {\r\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-noss2\"),\r\n                },\r\n            },\r\n            playerSpawn: {\r\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-spawn\"),\r\n                spawnSelect: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-select\"),\r\n                alwaysShow: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-always-show\"),\r\n                random: {\r\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random\"),\r\n                    minX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-min-x\"),\r\n                    maxX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-max-x\"),\r\n                    minY: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-min-y\"),\r\n                    maxY: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-max-y\"),\r\n                },\r\n                range: {\r\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range\"),\r\n                    minX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range-min-x\"),\r\n                    maxX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range-max-x\"),\r\n                    requireSolid: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range-solid\"),\r\n                },\r\n                point: {\r\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point\"),\r\n                    x: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-x\"),\r\n                    y: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-y\"),\r\n                    select: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-select\"),\r\n                    gridAlign: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-select-align\"),\r\n                },\r\n            },\r\n        };\r\n        this.blockOffsetY = this.canvas.height % _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\r\n        this.background = \"white\";\r\n        this.canvas.style.border = \"1px solid black\";\r\n        this.ui.getJsonCodeButton.addEventListener(\"click\", () => this.handleGetJsonCodeButton());\r\n        this.ui.importCodeButton.addEventListener(\"click\", () => this.handleImportLevelCodeButton());\r\n        this.ui.openLevel.addEventListener(\"click\", () => this.openLevelInNewTab());\r\n        this.ui.modeSelect.addEventListener(\"change\", () => this.setMode(+this.ui.modeSelect.value));\r\n        Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"ingame-interface-container\").style.display = \"none\";\r\n        this.setMode(this.mode);\r\n        this.ui.welcome.container.style.display = \"block\";\r\n        this.ui.welcome.toggleButton.addEventListener(\"click\", () => this.toggleWelcomeTextVisibility());\r\n        this.setWelcomeTextVisibility(!!Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getSearchParam\"])(\"welcome\"));\r\n        for (let y = 0; y < _config__WEBPACK_IMPORTED_MODULE_1__[\"LEVEL_HEIGHT\"]; y++) {\r\n            const row = Array(_config__WEBPACK_IMPORTED_MODULE_1__[\"LEVEL_WIDTH\"]).fill(\".\");\r\n            this.levelData.push(row);\r\n        }\r\n        window.editor = this;\r\n    }\r\n    start() {\r\n        super.start();\r\n        this.ui.container.style.display = \"block\";\r\n        this.levelRenderer = new _sprites_LevelRenderer__WEBPACK_IMPORTED_MODULE_11__[\"LevelRenderer\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\r\n        });\r\n        this.levelRenderer.updateLevel();\r\n        this.blockSelector = new _sprites_BlockSelectorSprite__WEBPACK_IMPORTED_MODULE_8__[\"BlockSelectorSprite\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\r\n            texture: this.getImage(\"blocks/a\"),\r\n        });\r\n        this.jumpLightSelector = new _sprites_JumpLightSelectorSprite__WEBPACK_IMPORTED_MODULE_10__[\"JumpLightSelectorSprite\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\r\n            texture: this.getImage(\"blackjumplight\"),\r\n        });\r\n        this.bossSelector = new _sprites_BossSelectorSprite__WEBPACK_IMPORTED_MODULE_9__[\"BossSelectorSprite\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\r\n            texture: this.getImage(\"boss/noss/noss\"),\r\n        });\r\n        this.playerSpawnSelector = new _sprites_PlayerSpawnSelectorSprite__WEBPACK_IMPORTED_MODULE_12__[\"PlayerSpawnSelectorSprite\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\r\n            texture: this.getImage(\"player/idle\"),\r\n        });\r\n        this.textSelector = new _sprites_TextSelectorSprite__WEBPACK_IMPORTED_MODULE_13__[\"TextSelectorSprite\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\r\n            texture: this.getImage(\"text/a\"),\r\n        });\r\n        this.initGallery();\r\n        const levelSearchParam = Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getSearchParam\"])(\"level\");\r\n        if (levelSearchParam) {\r\n            this.importLevelCode(levelSearchParam);\r\n        }\r\n    }\r\n    getJsonLevelCode() {\r\n        const dark = this.ui.options.dark.checked;\r\n        const stars = this.ui.options.stars.checked;\r\n        const background = this.ui.options.background.value;\r\n        const music = this.ui.options.music.value.split(\",\");\r\n        const boss = this.bossSelector.selection;\r\n        const spawn = this.playerSpawnSelector.selection;\r\n        const text = this.text;\r\n        const levelData = Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"clone\"])(this.levelData);\r\n        const code = levelData.reverse().map((s) => s.join(\"\")).join(\"\");\r\n        return {\r\n            levelData: code,\r\n            dark,\r\n            stars,\r\n            background,\r\n            jumpLights: this.jumpLights.length > 0 ? this.jumpLights : undefined,\r\n            backgroundMusic: music,\r\n            boss: boss,\r\n            spawn,\r\n            text: text.length > 0 ? this.text : undefined,\r\n        };\r\n    }\r\n    handleGetJsonCodeButton() {\r\n        this.ui.codeOutput.value = JSON.stringify(this.getJsonLevelCode());\r\n    }\r\n    handleImportLevelCodeButton() {\r\n        const code = prompt(\"Enter the level code:\");\r\n        if (code === null) {\r\n            return;\r\n        }\r\n        const levelDataBackup = this.levelData;\r\n        try {\r\n            this.importLevelCode(code);\r\n        }\r\n        catch (e) {\r\n            alert(`Error: ${e.message}`);\r\n            this.levelData = levelDataBackup;\r\n            this.levelRenderer.updateLevel();\r\n        }\r\n    }\r\n    importLevelCode(str) {\r\n        const level = Object(_levelcode__WEBPACK_IMPORTED_MODULE_4__[\"getLevelForCode\"])(str);\r\n        this.ui.options.stars.checked = level.stars;\r\n        this.ui.options.dark.checked = level.dark;\r\n        this.ui.options.background.value = level.background;\r\n        this.ui.options.music.value = (level.backgroundMusic || []).join(\",\");\r\n        this.jumpLights = level.jumpLights || [];\r\n        this.bossSelector.selection = level.boss;\r\n        this.playerSpawnSelector.selection = level.spawn || { type: \"default\" };\r\n        this.text = level.text || [];\r\n        this.levelData = Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"splitToChunks\"])(level.levelData, _config__WEBPACK_IMPORTED_MODULE_1__[\"LEVEL_WIDTH\"]).map((i) => i.split(\"\")).reverse();\r\n        this.levelRenderer.updateLevel();\r\n    }\r\n    handleGallerySelection(char) {\r\n        this.blockSelector.setSelection(char);\r\n    }\r\n    initGallery() {\r\n        const getImage = (src) => {\r\n            const link = document.createElement(\"a\");\r\n            link.href = \"\";\r\n            link.className = \"level-editor-gallery-item\";\r\n            link.onclick = () => false;\r\n            const image = document.createElement(\"img\");\r\n            image.src = src;\r\n            image.className = \"level-editor-block-gallery-item\";\r\n            link.appendChild(image);\r\n            return link;\r\n        };\r\n        for (const key of _blockmapkeys__WEBPACK_IMPORTED_MODULE_6__[\"BLOCK_MAP_KEYS\"]) {\r\n            if (key === \"empty\") {\r\n                const el = document.createElement(\"div\");\r\n                el.className = \"level-editor-gallery-item\";\r\n                this.ui.blocks.gallery.appendChild(el);\r\n                continue;\r\n            }\r\n            const val = _blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][key];\r\n            const texture = this.getImage(val.texture);\r\n            const image = getImage(texture.src);\r\n            image.addEventListener(\"click\", () => this.handleGallerySelection(key));\r\n            this.ui.blocks.gallery.appendChild(image);\r\n        }\r\n    }\r\n    setMode(m) {\r\n        this.mode = m;\r\n        this.ui.blocks.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Blocks ? \"block\" : \"\";\r\n        this.ui.jumpLights.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].JumpLights ? \"block\" : \"\";\r\n        this.ui.text.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Text ? \"block\" : \"\";\r\n        this.ui.boss.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Boss ? \"block\" : \"\";\r\n        this.ui.playerSpawn.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].PlayerSpawn ? \"block\" : \"\";\r\n    }\r\n    openLevelInNewTab() {\r\n        const code = escape(JSON.stringify(this.getJsonLevelCode()));\r\n        window.open(`?autorun=1&level=${code}`, \"_blank\");\r\n    }\r\n    setWelcomeTextVisibility(visible) {\r\n        this.ui.welcome.content.style.display = visible ? \"block\" : \"none\";\r\n        this.ui.welcome.toggleButton.textContent = (visible ? \"hide\" : \"show\") + \" welcome text\";\r\n        Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"setSearchParam\"])(\"welcome\", visible ? \"1\" : \"\");\r\n    }\r\n    toggleWelcomeTextVisibility() {\r\n        const isVisible = this.ui.welcome.content.style.display === \"block\";\r\n        this.setWelcomeTextVisibility(!isVisible);\r\n        return false;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/editor/editor.ts?");

/***/ }),

/***/ "./src/editor/mode.ts":
/*!****************************!*\
  !*** ./src/editor/mode.ts ***!
  \****************************/
/*! exports provided: LevelEditorMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelEditorMode\", function() { return LevelEditorMode; });\nvar LevelEditorMode;\r\n(function (LevelEditorMode) {\r\n    LevelEditorMode[LevelEditorMode[\"Blocks\"] = 0] = \"Blocks\";\r\n    LevelEditorMode[LevelEditorMode[\"JumpLights\"] = 1] = \"JumpLights\";\r\n    LevelEditorMode[LevelEditorMode[\"Text\"] = 2] = \"Text\";\r\n    LevelEditorMode[LevelEditorMode[\"Boss\"] = 3] = \"Boss\";\r\n    LevelEditorMode[LevelEditorMode[\"PlayerSpawn\"] = 4] = \"PlayerSpawn\";\r\n})(LevelEditorMode || (LevelEditorMode = {}));\r\n\n\n//# sourceURL=webpack:///./src/editor/mode.ts?");

/***/ }),

/***/ "./src/editor/sprites/BlockSelectorSprite.ts":
/*!***************************************************!*\
  !*** ./src/editor/sprites/BlockSelectorSprite.ts ***!
  \***************************************************/
/*! exports provided: BlockSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlockSelectorSprite\", function() { return BlockSelectorSprite; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _blockmapkeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../blockmapkeys */ \"./src/editor/blockmapkeys.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass BlockSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_2__[\"ImageSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.selection = \"c\";\r\n        this.selectionIndex = 4; // 4 is block type \"c\"\r\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_5__[\"LevelEditorIndexes\"].Selector;\r\n        this.addTask(() => this.run());\r\n        this.width = _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"];\r\n        this.height = _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\r\n        this.texture = this.runtime.getImage(_blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][this.selection].texture);\r\n        this.updateSelection();\r\n        document.addEventListener(\"keydown\", (e) => {\r\n            if (_blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][e.key] && e.target === document.body) {\r\n                this.setSelection(e.key);\r\n            }\r\n        });\r\n    }\r\n    updateSelection() {\r\n        this.selection = _blockmapkeys__WEBPACK_IMPORTED_MODULE_3__[\"BLOCK_MAP_KEYS\"][this.selectionIndex];\r\n        const blockDetails = _blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][this.selection];\r\n        const texture = this.runtime.getImage(blockDetails.texture);\r\n        this.texture = texture;\r\n        this.runtime.ui.blocks.activeBlockImage.src = texture.src;\r\n        this.runtime.ui.blocks.activeBlockImage.height = this.texture.height * 6;\r\n        this.runtime.ui.blocks.activeBlockImage.width = this.texture.width * 6;\r\n        this.runtime.ui.blocks.activeBlockDescription.textContent = blockDetails.type.name + \", \" + this.selection;\r\n        this.updateDimensions();\r\n    }\r\n    setBlock(x, y, char) {\r\n        const row = this.runtime.levelData[y];\r\n        if (!row) {\r\n            return;\r\n        }\r\n        const existingChar = row[x];\r\n        if (!existingChar) {\r\n            return;\r\n        }\r\n        row[x] = char;\r\n        this.runtime.levelRenderer.updateLevel();\r\n    }\r\n    run() {\r\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_4__[\"LevelEditorMode\"].Blocks) {\r\n            this.visible = false;\r\n            return;\r\n        }\r\n        this.visible = true;\r\n        // get hovered block\r\n        const mouseX = this.runtime.mouse.position.x;\r\n        const mouseY = this.runtime.mouse.position.y - this.runtime.blockOffsetY;\r\n        const blockX = Math.floor(mouseX / _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"]);\r\n        const blockY = Math.ceil(mouseY / _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"]);\r\n        this.x = blockX * _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"];\r\n        this.y = blockY * _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"] - this.runtime.blockOffsetY;\r\n        // drawing\r\n        if (this.runtime.mouse.left.isDown) {\r\n            this.opacity = 1;\r\n            this.setBlock(blockX, blockY, this.selection);\r\n        }\r\n        else if (this.runtime.mouse.right.isDown) {\r\n            this.opacity = 0;\r\n            this.setBlock(blockX, blockY, \".\");\r\n        }\r\n        else {\r\n            this.opacity = 0.5;\r\n        }\r\n    }\r\n    setSelection(char) {\r\n        const index = _blockmapkeys__WEBPACK_IMPORTED_MODULE_3__[\"BLOCK_MAP_KEYS\"].indexOf(char);\r\n        if (index === -1) {\r\n            throw new Error(char + \" is not in BLOCK_MAP_KEYS\");\r\n        }\r\n        this.selection = char;\r\n        this.selectionIndex = index;\r\n        this.updateSelection();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/editor/sprites/BlockSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/BossSelectorSprite.ts":
/*!**************************************************!*\
  !*** ./src/editor/sprites/BossSelectorSprite.ts ***!
  \**************************************************/
/*! exports provided: BossSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BossSelectorSprite\", function() { return BossSelectorSprite; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\r\n\r\n\r\n\r\nclass BossSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.ui = this.runtime.ui.boss;\r\n        this.type = \"\";\r\n        this.shouldBeVisible = false;\r\n        this.sword = {\r\n            blocksFromTop: 0,\r\n            health: 0,\r\n        };\r\n        this.noss1 = {};\r\n        this.noss2 = {};\r\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__[\"LevelEditorIndexes\"].Selector;\r\n        this.addTask(() => this.run());\r\n        this.opacity = 0.5;\r\n        this.type = this.ui.selection.value;\r\n        this.sword.blocksFromTop = +this.ui.sword.blocksFromTop.value;\r\n        this.sword.health = +this.ui.sword.health.value;\r\n        this.ui.selection.addEventListener(\"change\", () => this.updateSelection());\r\n        this.ui.sword.blocksFromTop.addEventListener(\"change\", () => this.updateSelection());\r\n        this.ui.sword.health.addEventListener(\"change\", () => this.updateSelection());\r\n    }\r\n    updateSelection() {\r\n        const type = this.ui.selection.value;\r\n        this.type = type;\r\n        if (type === \"\") {\r\n            this.visible = false;\r\n            return;\r\n        }\r\n        this.ui.sword.container.style.display = type === \"sword\" ? \"block\" : \"\";\r\n        this.ui.noss1.container.style.display = type === \"noss1\" ? \"block\" : \"\";\r\n        this.ui.noss2.container.style.display = type === \"noss2\" ? \"block\" : \"\";\r\n        if (type === \"sword\") {\r\n            this.shouldBeVisible = true;\r\n            this.texture = this.runtime.getImage(\"boss/sword/sword\");\r\n            this.updateDimensions();\r\n            this.x = this.runtime.canvas.width / 2 - this.width / 2;\r\n            const blocksFromTop = +this.ui.sword.blocksFromTop.value;\r\n            this.y = blocksFromTop * _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\r\n            this.sword.blocksFromTop = blocksFromTop;\r\n            this.sword.health = +this.ui.sword.health.value;\r\n        }\r\n        else if (type === \"noss1\") {\r\n            this.shouldBeVisible = true;\r\n            this.texture = this.runtime.getImage(\"boss/noss/noss\");\r\n            this.updateDimensions();\r\n        }\r\n        else if (type === \"noss2\") {\r\n            this.shouldBeVisible = true;\r\n            this.texture = this.runtime.getImage(\"boss/noss/noss\");\r\n            this.updateDimensions();\r\n        }\r\n        else {\r\n            throw new Error(`${type} is not a valid boss type`);\r\n        }\r\n    }\r\n    run() {\r\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_2__[\"LevelEditorMode\"].Boss) {\r\n            this.visible = false;\r\n            return;\r\n        }\r\n        this.visible = this.shouldBeVisible;\r\n    }\r\n    get selection() {\r\n        const type = this.ui.selection.value;\r\n        if (type === \"\") {\r\n            return undefined;\r\n        }\r\n        else if (type === \"sword\") {\r\n            return {\r\n                type,\r\n                blocksFromTop: this.sword.blocksFromTop,\r\n                health: this.sword.health,\r\n            };\r\n        }\r\n        else if (type === \"noss1\") {\r\n            return {\r\n                type,\r\n            };\r\n        }\r\n        else if (type === \"noss2\") {\r\n            return {\r\n                type,\r\n            };\r\n        }\r\n        else {\r\n            throw new Error(`${type} is not a valid boss type`);\r\n        }\r\n    }\r\n    set selection(selection) {\r\n        if (typeof selection === \"undefined\") {\r\n            this.ui.selection.value = \"\";\r\n            return;\r\n        }\r\n        const type = selection.type;\r\n        this.ui.selection.value = type;\r\n        if (type === \"sword\") {\r\n            const s = selection;\r\n            this.ui.sword.blocksFromTop.value = (s.blocksFromTop || 14).toString();\r\n            this.ui.sword.health.value = (s.health || 3).toString();\r\n        }\r\n        else if (type === \"noss1\") {\r\n        }\r\n        else if (type === \"noss2\") {\r\n        }\r\n        else {\r\n            throw new Error(`${type} is not a valid boss type`);\r\n        }\r\n        this.updateSelection();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/editor/sprites/BossSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/JumpLightSelectorSprite.ts":
/*!*******************************************************!*\
  !*** ./src/editor/sprites/JumpLightSelectorSprite.ts ***!
  \*******************************************************/
/*! exports provided: JumpLightSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JumpLightSelectorSprite\", function() { return JumpLightSelectorSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\r\n\r\n\r\n\r\nclass JumpLightSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.outlinePoint = null;\r\n        this.snapToGrid = true;\r\n        this.moving = false;\r\n        this.opacity = 0.5;\r\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__[\"LevelEditorIndexes\"].Selector;\r\n        this.addTask(() => this.run());\r\n        this.runtime.ui.jumpLights.snapToGrid.addEventListener(\"change\", () => {\r\n            this.snapToGrid = this.runtime.ui.jumpLights.snapToGrid.checked;\r\n        });\r\n        this.snapToGrid = this.runtime.ui.jumpLights.snapToGrid.checked;\r\n    }\r\n    run() {\r\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_2__[\"LevelEditorMode\"].JumpLights) {\r\n            this.visible = false;\r\n            return;\r\n        }\r\n        const mouseX = this.runtime.mouse.position.x;\r\n        const mouseY = this.runtime.mouse.position.y;\r\n        if (this.snapToGrid) {\r\n            const distanceFromBottom = this.runtime.canvas.height - mouseY;\r\n            this.x = Math.round(mouseX / 8) * 8;\r\n            this.y = this.runtime.canvas.height - (Math.round(distanceFromBottom / 8) * 8);\r\n        }\r\n        else {\r\n            this.x = mouseX;\r\n            this.y = mouseY;\r\n        }\r\n        this.x -= (this.width / 2);\r\n        this.y -= (this.height / 2);\r\n        const hovered = this.findHovered(mouseX, mouseY);\r\n        if (hovered) {\r\n            this.visible = false;\r\n            this.outlinePoint = hovered;\r\n            this.runtime.cursor = \"pointer\";\r\n            if (this.runtime.mouse.isClick) {\r\n                this.removePoint(hovered);\r\n                this.moving = true;\r\n            }\r\n            else if (this.runtime.mouse.right.isClick) {\r\n                this.removePoint(hovered);\r\n                this.outlinePoint = null;\r\n            }\r\n        }\r\n        else {\r\n            this.visible = true;\r\n            if (!this.moving) {\r\n                this.outlinePoint = null;\r\n            }\r\n            if (this.runtime.mouse.isClick) {\r\n                this.moving = false;\r\n                this.addPoint(new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.x, this.y));\r\n            }\r\n        }\r\n    }\r\n    findHovered(mx, my) {\r\n        const width = this.width;\r\n        const height = this.height;\r\n        for (const p of this.runtime.jumpLights) {\r\n            const intersects = p.x < mx &&\r\n                p.x + width > mx &&\r\n                p.y < my &&\r\n                p.y + height > my;\r\n            if (intersects) {\r\n                return p;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    removePoint(p) {\r\n        const index = this.runtime.jumpLights.indexOf(p);\r\n        if (index === -1) {\r\n            throw new Error(\"couldn't find point\");\r\n        }\r\n        this.runtime.jumpLights.splice(index, 1);\r\n        this.runtime.levelRenderer.updateLevel();\r\n    }\r\n    addPoint(p) {\r\n        this.runtime.jumpLights.push(p);\r\n        this.runtime.levelRenderer.updateLevel();\r\n    }\r\n    render(ctx) {\r\n        super.render(ctx);\r\n        if (this.outlinePoint) {\r\n            ctx.strokeStyle = \"black\";\r\n            ctx.lineWidth = 1;\r\n            ctx.strokeRect(this.outlinePoint.x, this.outlinePoint.y, this.width, this.height);\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/editor/sprites/JumpLightSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/LevelEditorIndexes.ts":
/*!**************************************************!*\
  !*** ./src/editor/sprites/LevelEditorIndexes.ts ***!
  \**************************************************/
/*! exports provided: LevelEditorIndexes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelEditorIndexes\", function() { return LevelEditorIndexes; });\nvar LevelEditorIndexes;\r\n(function (LevelEditorIndexes) {\r\n    LevelEditorIndexes[LevelEditorIndexes[\"Level\"] = 5] = \"Level\";\r\n    LevelEditorIndexes[LevelEditorIndexes[\"Selector\"] = 10] = \"Selector\";\r\n})(LevelEditorIndexes || (LevelEditorIndexes = {}));\r\n\n\n//# sourceURL=webpack:///./src/editor/sprites/LevelEditorIndexes.ts?");

/***/ }),

/***/ "./src/editor/sprites/LevelRenderer.ts":
/*!*********************************************!*\
  !*** ./src/editor/sprites/LevelRenderer.ts ***!
  \*********************************************/
/*! exports provided: LevelRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelRenderer\", function() { return LevelRenderer; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../game/sprites/text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\r\n\r\n\r\n\r\n\r\nclass LevelRenderer extends _engine_sprite__WEBPACK_IMPORTED_MODULE_2__[\"AbstractSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__[\"LevelEditorIndexes\"].Level;\r\n        const { ctx, canvas } = this.runtime.createCanvas();\r\n        this.canvas = canvas;\r\n        this.ctx = ctx;\r\n    }\r\n    updateLevel() {\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        const data = this.runtime.levelData;\r\n        const height = this.runtime.canvas.height;\r\n        for (let y = 0; y < data.length; y++) {\r\n            const row = data[y];\r\n            const blockY = y * _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"] - this.runtime.blockOffsetY;\r\n            for (let x = 0; x < row.length; x++) {\r\n                const char = row[x];\r\n                if (char === \".\") {\r\n                    continue;\r\n                }\r\n                const blockX = _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"] * x;\r\n                const texture = this.runtime.getImage(_blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][char].texture);\r\n                this.ctx.drawImage(texture, blockX, blockY);\r\n            }\r\n        }\r\n        const jumpLightTexture = this.runtime.getImage(\"blackjumplight\");\r\n        for (const position of this.runtime.jumpLights) {\r\n            this.ctx.drawImage(jumpLightTexture, position.x, position.y);\r\n        }\r\n        for (const opt of this.runtime.text) {\r\n            this.drawText(this.ctx, opt.text, opt.position);\r\n        }\r\n    }\r\n    drawText(ctx, text, pos) {\r\n        for (let i = 0; i < text.length; i++) {\r\n            const originalChar = text[i].toLowerCase();\r\n            const char = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_MAP\"][originalChar] || originalChar;\r\n            if (char === \"skip\") {\r\n                continue;\r\n            }\r\n            const x = pos.x + (i * _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_WIDTH\"]);\r\n            const texture = this.runtime.getImage(\"text/\" + char);\r\n            ctx.drawImage(texture, x, pos.y, Math.max(_game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_WIDTH\"], texture.width), _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_HEIGHT\"]);\r\n        }\r\n    }\r\n    render(ctx) {\r\n        ctx.drawImage(this.canvas, 0, 0);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/editor/sprites/LevelRenderer.ts?");

/***/ }),

/***/ "./src/editor/sprites/PlayerSpawnSelectorSprite.ts":
/*!*********************************************************!*\
  !*** ./src/editor/sprites/PlayerSpawnSelectorSprite.ts ***!
  \*********************************************************/
/*! exports provided: PlayerSpawnSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerSpawnSelectorSprite\", function() { return PlayerSpawnSelectorSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\r\n\r\n\r\nvar Mode;\r\n(function (Mode) {\r\n    Mode[Mode[\"None\"] = 0] = \"None\";\r\n    Mode[Mode[\"SelectingSpawnPoint\"] = 1] = \"SelectingSpawnPoint\";\r\n})(Mode || (Mode = {}));\r\nclass PlayerSpawnSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.mode = Mode.None;\r\n        this.ui = this.runtime.ui.playerSpawn;\r\n        this.alwaysShow = this.ui.alwaysShow.checked;\r\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_2__[\"LevelEditorIndexes\"].Selector;\r\n        this.opacity = 0.5;\r\n        this.ui.spawnSelect.addEventListener(\"change\", () => this.selectionChanged());\r\n        this.ui.alwaysShow.addEventListener(\"change\", () => this.alwaysShow = this.ui.alwaysShow.checked);\r\n        this.ui.point.select.addEventListener(\"click\", () => this.mode = Mode.SelectingSpawnPoint);\r\n        this.addTask(() => this.run());\r\n    }\r\n    run() {\r\n        this.visible = false;\r\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_1__[\"LevelEditorMode\"].PlayerSpawn) {\r\n            return;\r\n        }\r\n        if (this.mode === Mode.SelectingSpawnPoint) {\r\n            const align = this.ui.point.gridAlign.checked;\r\n            this.visible = true;\r\n            const mouseX = this.runtime.mouse.position.x;\r\n            const mouseY = this.runtime.mouse.position.y;\r\n            if (align) {\r\n                const distanceFromButton = this.runtime.canvas.height - mouseY;\r\n                this.x = Math.round(mouseX / 8) * 8;\r\n                this.y = this.runtime.canvas.height - (Math.round(distanceFromButton / 8) * 8);\r\n            }\r\n            else {\r\n                this.x = mouseX;\r\n                this.y = mouseY;\r\n            }\r\n            this.x -= (this.width / 2);\r\n            this.y -= (this.height / 2);\r\n            if (this.runtime.mouse.isClick) {\r\n                this.mode = Mode.None;\r\n                this.ui.point.x.value = this.x.toString();\r\n                this.ui.point.y.value = this.y.toString();\r\n            }\r\n        }\r\n        else if (this.mode === Mode.None) {\r\n            const type = this.ui.spawnSelect.value;\r\n            if (type === \"point\") {\r\n                this.visible = true;\r\n                this.x = +this.ui.point.x.value;\r\n                this.y = +this.ui.point.y.value;\r\n            }\r\n        }\r\n    }\r\n    selectionChanged() {\r\n        const type = this.ui.spawnSelect.value;\r\n        this.ui.point.container.style.display = type === \"point\" ? \"block\" : \"\";\r\n        this.ui.random.container.style.display = type === \"random\" ? \"block\" : \"\";\r\n        this.ui.range.container.style.display = type === \"range\" ? \"block\" : \"\";\r\n    }\r\n    get selection() {\r\n        const type = this.ui.spawnSelect.value;\r\n        if (type === \"default\") {\r\n            return undefined;\r\n        }\r\n        else if (type === \"random\") {\r\n            return {\r\n                type: \"random\",\r\n                minX: +this.ui.random.minX.value,\r\n                maxX: +this.ui.random.maxX.value,\r\n                minY: +this.ui.random.minY.value,\r\n                maxY: +this.ui.random.maxY.value,\r\n            };\r\n        }\r\n        else if (type === \"range\") {\r\n            return {\r\n                type: \"range\",\r\n                minX: +this.ui.range.minX.value,\r\n                maxX: +this.ui.range.maxX.value,\r\n                requireSolid: this.ui.range.requireSolid.checked ? undefined : false,\r\n            };\r\n        }\r\n        else if (type === \"point\") {\r\n            return {\r\n                type: \"point\",\r\n                x: +this.ui.point.x.value,\r\n                y: +this.ui.point.y.value,\r\n            };\r\n        }\r\n        else {\r\n            throw new Error(`${type} is not a valid spawn or whatever`);\r\n        }\r\n    }\r\n    set selection(selection) {\r\n        if (typeof selection === \"undefined\") {\r\n            // default type, nothing to do\r\n            return;\r\n        }\r\n        const type = selection.type;\r\n        this.ui.spawnSelect.value = type;\r\n        if (type === \"default\") {\r\n            // do nothing???\r\n        }\r\n        else if (type === \"random\") {\r\n            const s = selection;\r\n            this.ui.random.minX.value = s.minX.toString();\r\n            this.ui.random.maxX.value = s.maxX.toString();\r\n            this.ui.random.minY.value = s.minY.toString();\r\n            this.ui.random.maxY.value = s.maxY.toString();\r\n        }\r\n        else if (type === \"range\") {\r\n            const s = selection;\r\n            this.ui.range.minX.value = s.minX.toString();\r\n            this.ui.range.maxX.value = s.maxX.toString();\r\n            this.ui.range.requireSolid.checked = typeof s.requireSolid === \"undefined\" || s.requireSolid ? true : false;\r\n        }\r\n        else if (type === \"point\") {\r\n            const s = selection;\r\n            this.ui.point.x.value = s.x.toString();\r\n            this.ui.point.y.value = s.y.toString();\r\n        }\r\n        else {\r\n            throw new Error(`${type} is not a valid spawn or whatever`);\r\n        }\r\n        this.selectionChanged();\r\n    }\r\n    render(ctx) {\r\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_1__[\"LevelEditorMode\"].PlayerSpawn && !this.alwaysShow) {\r\n            return;\r\n        }\r\n        const fillRect = (x, y, x2, y2) => {\r\n            ctx.globalAlpha = 0.25;\r\n            ctx.fillStyle = \"aqua\";\r\n            ctx.fillRect(x, y, x2 - x, y2 - y);\r\n            ctx.globalAlpha = 1;\r\n        };\r\n        const selection = this.selection;\r\n        if (selection === undefined || selection.type === \"default\") {\r\n            // do nothing\r\n        }\r\n        else if (selection.type === \"point\") {\r\n            if (this.mode === Mode.SelectingSpawnPoint) {\r\n                // do nothing\r\n            }\r\n            else {\r\n                this.x = selection.x;\r\n                this.y = selection.y;\r\n            }\r\n            super.render(ctx);\r\n        }\r\n        else if (selection.type === \"random\") {\r\n            fillRect(selection.minX, selection.minY, selection.maxX, selection.maxY);\r\n        }\r\n        else if (selection.type === \"range\") {\r\n            fillRect(selection.minX, 0, selection.maxX, ctx.canvas.height);\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/editor/sprites/PlayerSpawnSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/TextSelectorSprite.ts":
/*!**************************************************!*\
  !*** ./src/editor/sprites/TextSelectorSprite.ts ***!
  \**************************************************/
/*! exports provided: TextSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TextSelectorSprite\", function() { return TextSelectorSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../game/sprites/text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\r\n\r\n\r\n\r\n\r\nclass TextSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.snapToGrid = true;\r\n        this.outline = null;\r\n        this.moving = null;\r\n        this.opacity = 0.5;\r\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__[\"LevelEditorIndexes\"].Selector;\r\n        this.initTexture = this.texture;\r\n        this.addTask(() => this.run());\r\n        this.runtime.ui.text.snapToGrid.addEventListener(\"change\", () => {\r\n            this.snapToGrid = this.runtime.ui.text.snapToGrid.checked;\r\n        });\r\n        this.snapToGrid = this.runtime.ui.text.snapToGrid.checked;\r\n    }\r\n    run() {\r\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_3__[\"LevelEditorMode\"].Text) {\r\n            this.visible = false;\r\n            return;\r\n        }\r\n        const mouseX = this.runtime.mouse.position.x;\r\n        const mouseY = this.runtime.mouse.position.y;\r\n        if (this.snapToGrid) {\r\n            const distanceFromBottom = this.runtime.canvas.height - mouseY;\r\n            const x = Math.floor(mouseX / 8) * 8;\r\n            const y = Math.floor(mouseY / 8) * 8;\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n        else {\r\n            this.x = mouseX - (this.width / 2);\r\n            this.y = mouseY - (this.height / 2);\r\n        }\r\n        const hovered = this.getHovered();\r\n        if (hovered === null) {\r\n            this.visible = true;\r\n            if (this.moving) {\r\n                if (this.runtime.mouse.isClick) {\r\n                    this.moving.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\r\n                    this.runtime.text.push(this.moving);\r\n                    this.runtime.levelRenderer.updateLevel();\r\n                    this.moving = null;\r\n                }\r\n            }\r\n            else {\r\n                this.outline = null;\r\n                if (this.runtime.mouse.isClick) {\r\n                    const text = prompt(\"Type the text:\");\r\n                    if (text === null) {\r\n                        return;\r\n                    }\r\n                    if (!this.isValidText(text)) {\r\n                        alert(\"Unsupported characters\");\r\n                        return;\r\n                    }\r\n                    const textObj = {\r\n                        text,\r\n                        position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position),\r\n                    };\r\n                    this.runtime.text.push(textObj);\r\n                    this.runtime.levelRenderer.updateLevel();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.visible = false;\r\n            this.outline = hovered;\r\n            this.runtime.cursor = \"pointer\";\r\n            if (this.runtime.mouse.isClick) {\r\n                const text = prompt(\"Enter the new text:\", hovered.text);\r\n                if (text) {\r\n                    if (!this.isValidText(text)) {\r\n                        alert(\"Unsupported characters\");\r\n                        return;\r\n                    }\r\n                    hovered.text = text;\r\n                    this.runtime.levelRenderer.updateLevel();\r\n                }\r\n            }\r\n            else if (this.runtime.mouse.middle.isClick) {\r\n                this.remove(hovered);\r\n                this.moving = hovered;\r\n            }\r\n            else if (this.runtime.mouse.right.isClick) {\r\n                this.remove(hovered);\r\n            }\r\n        }\r\n    }\r\n    remove(obj) {\r\n        const index = this.runtime.text.indexOf(obj);\r\n        this.runtime.text.splice(index, 1);\r\n        this.runtime.levelRenderer.updateLevel();\r\n    }\r\n    isValidText(text) {\r\n        for (const c of text) {\r\n            try {\r\n                const char = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_MAP\"][c] || c;\r\n                if (char === \"skip\") {\r\n                    continue;\r\n                }\r\n                this.runtime.getImage(\"text/\" + char);\r\n            }\r\n            catch (e) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    getHovered() {\r\n        for (const text of this.runtime.text) {\r\n            const width = text.text.length * _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_WIDTH\"];\r\n            const height = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_HEIGHT\"];\r\n            const obj = {\r\n                x: text.position.x,\r\n                y: text.position.y,\r\n                width,\r\n                height,\r\n            };\r\n            const intersects = this.x < obj.x + obj.width &&\r\n                this.x + this.width > obj.x &&\r\n                this.y < obj.y + obj.height &&\r\n                this.y + this.height > obj.y;\r\n            if (intersects) {\r\n                return text;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    render(ctx) {\r\n        super.render(ctx);\r\n        if (this.outline) {\r\n            const width = this.outline.text.length * _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_WIDTH\"];\r\n            const height = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_HEIGHT\"];\r\n            ctx.strokeStyle = \"black\";\r\n            ctx.lineWidth = 1;\r\n            ctx.strokeRect(this.outline.position.x, this.outline.position.y, width, height);\r\n        }\r\n        if (this.moving) {\r\n            this.runtime.levelRenderer.drawText(ctx, this.moving.text, this.position);\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/editor/sprites/TextSelectorSprite.ts?");

/***/ }),

/***/ "./src/engine/drivers/keyboard/base.ts":
/*!*********************************************!*\
  !*** ./src/engine/drivers/keyboard/base.ts ***!
  \*********************************************/
/*! exports provided: AbstractKeyboard, Key */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractKeyboard\", function() { return AbstractKeyboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Key\", function() { return Key; });\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../task */ \"./src/engine/task.ts\");\n\r\n/*\r\n * A few base classes and things to extend for keyboard drivers\r\n *\r\n * Currently there's only one driver for computers but I want to add one for mobile.\r\n */\r\nclass AbstractKeyboard extends _task__WEBPACK_IMPORTED_MODULE_0__[\"TaskRunner\"] {\r\n    constructor(runtime) {\r\n        super();\r\n        this.keys = [];\r\n        runtime.addTask(() => this.update());\r\n        for (let i = 0; i < AbstractKeyboard.KEY_COUNT; i++) {\r\n            this.keys[i] = new Key(this);\r\n        }\r\n    }\r\n    update() {\r\n        this.runTasks();\r\n    }\r\n}\r\nAbstractKeyboard.KEY_COUNT = 256;\r\nclass Key {\r\n    constructor(keyboard) {\r\n        this.isPressed = false;\r\n        this.framesDown = 0;\r\n        keyboard.addTask(() => this.update());\r\n    }\r\n    update() {\r\n        if (this.isPressed) {\r\n            this.framesDown++;\r\n        }\r\n        else {\r\n            this.framesDown = 0;\r\n        }\r\n    }\r\n    get justPressed() {\r\n        return this.framesDown === 1;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/drivers/keyboard/base.ts?");

/***/ }),

/***/ "./src/engine/drivers/keyboard/keyboard.ts":
/*!*************************************************!*\
  !*** ./src/engine/drivers/keyboard/keyboard.ts ***!
  \*************************************************/
/*! exports provided: Keyboard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Keyboard\", function() { return Keyboard; });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./src/engine/drivers/keyboard/base.ts\");\n\r\n/*\r\n * The keyboard driver for computers\r\n */\r\nclass Keyboard extends _base__WEBPACK_IMPORTED_MODULE_0__[\"AbstractKeyboard\"] {\r\n    constructor(runtime) {\r\n        super(runtime);\r\n        document.addEventListener(\"keydown\", (e) => {\r\n            const keyCode = e.keyCode;\r\n            if (Keyboard.PREVENT.indexOf(keyCode) > -1) {\r\n                e.preventDefault();\r\n            }\r\n            this.keys[keyCode].isPressed = true;\r\n        });\r\n        document.addEventListener(\"keyup\", (e) => {\r\n            const keyCode = e.keyCode;\r\n            if (Keyboard.PREVENT.indexOf(keyCode) > -1) {\r\n                e.preventDefault();\r\n            }\r\n            this.keys[keyCode].isPressed = false;\r\n        });\r\n    }\r\n}\r\nKeyboard.PREVENT = [\r\n    32,\r\n    37,\r\n    38,\r\n    39,\r\n    40,\r\n];\r\n\n\n//# sourceURL=webpack:///./src/engine/drivers/keyboard/keyboard.ts?");

/***/ }),

/***/ "./src/engine/drivers/mouse/base.ts":
/*!******************************************!*\
  !*** ./src/engine/drivers/mouse/base.ts ***!
  \******************************************/
/*! exports provided: BaseMouse, BaseMouseButton, EmptyMouseButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseMouse\", function() { return BaseMouse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseMouseButton\", function() { return BaseMouseButton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EmptyMouseButton\", function() { return EmptyMouseButton; });\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../task */ \"./src/engine/task.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../vector */ \"./src/engine/vector.ts\");\n\r\n\r\nclass BaseMouse extends _task__WEBPACK_IMPORTED_MODULE_0__[\"TaskRunner\"] {\r\n    constructor(runtime) {\r\n        super();\r\n        this.position = new _vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](0, 0);\r\n        this.runtime = runtime;\r\n    }\r\n    update() {\r\n        this.runTasks();\r\n    }\r\n    get isDown() {\r\n        return this.left.isDown;\r\n    }\r\n    get isUp() {\r\n        return this.left.isUp;\r\n    }\r\n    get isClick() {\r\n        return this.left.isClick;\r\n    }\r\n    get framesDown() {\r\n        return this.left.framesDown;\r\n    }\r\n}\r\nclass BaseMouseButton {\r\n    constructor(mouse) {\r\n        this.isDown = false;\r\n        this.framesDown = 0;\r\n        mouse.addTask(() => this.update());\r\n    }\r\n    update() {\r\n        if (this.isDown) {\r\n            this.framesDown++;\r\n        }\r\n        else {\r\n            this.framesDown = 0;\r\n        }\r\n    }\r\n    get isUp() {\r\n        return !this.isDown;\r\n    }\r\n    get isClick() {\r\n        return this.framesDown === 1;\r\n    }\r\n}\r\n// A mouse button that doesn't do anything and always returns basic defaults\r\n// Used by mobile mouse support as only left click is supported there\r\nclass EmptyMouseButton {\r\n    constructor() {\r\n        this.isDown = false;\r\n        this.isUp = true;\r\n        this.isClick = false;\r\n        this.framesDown = 0;\r\n    }\r\n    update() { }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/drivers/mouse/base.ts?");

/***/ }),

/***/ "./src/engine/drivers/mouse/mouse.ts":
/*!*******************************************!*\
  !*** ./src/engine/drivers/mouse/mouse.ts ***!
  \*******************************************/
/*! exports provided: Mouse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Mouse\", function() { return Mouse; });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./src/engine/drivers/mouse/base.ts\");\n\r\n/*\r\n * A mouse driver for computers\r\n */\r\nvar Button;\r\n(function (Button) {\r\n    Button[Button[\"left\"] = 0] = \"left\";\r\n    Button[Button[\"middle\"] = 1] = \"middle\";\r\n    Button[Button[\"right\"] = 2] = \"right\";\r\n})(Button || (Button = {}));\r\nclass MouseButton extends _base__WEBPACK_IMPORTED_MODULE_0__[\"BaseMouseButton\"] {\r\n    constructor(mouse, button) {\r\n        super(mouse); // It's a bird! It's a plane! No it's Supermouse!\r\n        // The choice of adding listeners to canvas and document is very intentional\r\n        mouse.runtime.canvas.addEventListener(\"mousedown\", (e) => {\r\n            if (e.button === button) {\r\n                this.isDown = true;\r\n            }\r\n        });\r\n        document.addEventListener(\"mouseup\", (e) => {\r\n            if (e.button === button) {\r\n                this.isDown = false;\r\n            }\r\n        });\r\n    }\r\n}\r\nclass Mouse extends _base__WEBPACK_IMPORTED_MODULE_0__[\"BaseMouse\"] {\r\n    constructor(runtime) {\r\n        super(runtime);\r\n        this.right = new MouseButton(this, Button.right);\r\n        this.middle = new MouseButton(this, Button.middle);\r\n        this.left = new MouseButton(this, Button.left);\r\n        runtime.canvas.addEventListener(\"mousemove\", (e) => {\r\n            this.position.x = e.layerX;\r\n            this.position.y = e.layerY;\r\n        });\r\n        runtime.canvas.addEventListener(\"mousedown\", (e) => {\r\n            e.preventDefault();\r\n        });\r\n        runtime.canvas.addEventListener(\"contextmenu\", (e) => {\r\n            e.preventDefault();\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/drivers/mouse/mouse.ts?");

/***/ }),

/***/ "./src/engine/drivers/mouse/touchscreen.ts":
/*!*************************************************!*\
  !*** ./src/engine/drivers/mouse/touchscreen.ts ***!
  \*************************************************/
/*! exports provided: TouchscreenMouse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TouchscreenMouse\", function() { return TouchscreenMouse; });\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base */ \"./src/engine/drivers/mouse/base.ts\");\n\r\n\r\n/*\r\n * A mouse driver for touchscreens\r\n *\r\n * A little buggy but it does get the job done\r\n */\r\nclass TouchscreenButton extends _base__WEBPACK_IMPORTED_MODULE_1__[\"BaseMouseButton\"] {\r\n    constructor(mouse) {\r\n        super(mouse); // It's a bird! It's a plane! No it's Supermouse!\r\n        document.addEventListener(\"touchstart\", (e) => {\r\n            this.isDown = true;\r\n        });\r\n        document.addEventListener(\"touchend\", (e) => {\r\n            this.isDown = false;\r\n        });\r\n        document.addEventListener(\"touchcancel\", (e) => {\r\n            this.isDown = false;\r\n        });\r\n    }\r\n}\r\nclass TouchscreenMouse extends _base__WEBPACK_IMPORTED_MODULE_1__[\"BaseMouse\"] {\r\n    constructor(runtime) {\r\n        super(runtime);\r\n        // only the left mouse button does stuff\r\n        this.left = new TouchscreenButton(this);\r\n        this.middle = new _base__WEBPACK_IMPORTED_MODULE_1__[\"EmptyMouseButton\"]();\r\n        this.right = new _base__WEBPACK_IMPORTED_MODULE_1__[\"EmptyMouseButton\"]();\r\n        // stop scrolling, zooming, or other stuff that you can do with your fingers\r\n        runtime.canvas.addEventListener(\"touchmove\", (e) => this.handleEvent(e));\r\n        runtime.canvas.addEventListener(\"touchstart\", (e) => this.handleEvent(e));\r\n        runtime.canvas.addEventListener(\"touchend\", (e) => this.handleEvent(e));\r\n        runtime.canvas.addEventListener(\"touchcancel\", (e) => this.handleEvent(e));\r\n    }\r\n    handleEvent(e) {\r\n        e.preventDefault();\r\n        const offset = this.findOffset(this.runtime.canvas);\r\n        this.position.x = e.changedTouches[0].clientX - offset.x;\r\n        this.position.y = e.changedTouches[0].clientY - offset.y;\r\n    }\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/Touch_events with minor modifications\r\n    findOffset(el) {\r\n        let curleft = 0;\r\n        let curtop = 0;\r\n        while (el.offsetParent) {\r\n            curleft += el.offsetLeft;\r\n            curtop += el.offsetTop;\r\n            el = el.offsetParent;\r\n        }\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](curleft - document.body.scrollLeft, curtop - document.body.scrollTop);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/drivers/mouse/touchscreen.ts?");

/***/ }),

/***/ "./src/engine/errors/exit.ts":
/*!***********************************!*\
  !*** ./src/engine/errors/exit.ts ***!
  \***********************************/
/*! exports provided: ExitError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ExitError\", function() { return ExitError; });\n/*\r\n * When calling runtime.exit() this error is thrown\r\n * It is handled by the game better and calls onexit()\r\n */\r\nclass ExitError extends Error {\r\n    constructor() {\r\n        super(\"Stopping game execution\");\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/errors/exit.ts?");

/***/ }),

/***/ "./src/engine/runtime.ts":
/*!*******************************!*\
  !*** ./src/engine/runtime.ts ***!
  \*******************************/
/*! exports provided: CANVAS_WIDTH, CANVAS_HEIGHT, GameRuntime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CANVAS_WIDTH\", function() { return CANVAS_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CANVAS_HEIGHT\", function() { return CANVAS_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameRuntime\", function() { return GameRuntime; });\n/* harmony import */ var _3rd_party_stableSort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../3rd-party/stableSort */ \"./src/3rd-party/stableSort.ts\");\n/* harmony import */ var _3rd_party_stableSort__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_3rd_party_stableSort__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _drivers_keyboard_keyboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./drivers/keyboard/keyboard */ \"./src/engine/drivers/keyboard/keyboard.ts\");\n/* harmony import */ var _drivers_mouse_mouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./drivers/mouse/mouse */ \"./src/engine/drivers/mouse/mouse.ts\");\n/* harmony import */ var _drivers_mouse_touchscreen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./drivers/mouse/touchscreen */ \"./src/engine/drivers/mouse/touchscreen.ts\");\n/* harmony import */ var _errors_exit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./errors/exit */ \"./src/engine/errors/exit.ts\");\n/* harmony import */ var _sprite__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./state */ \"./src/engine/state.ts\");\n/* harmony import */ var _staticRenderer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./staticRenderer */ \"./src/engine/staticRenderer.ts\");\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./task */ \"./src/engine/task.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./vector */ \"./src/engine/vector.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n * The main game runtime object\r\n */\r\n// Dimensions of the canvas\r\nconst CANVAS_WIDTH = 480;\r\nconst CANVAS_HEIGHT = 360;\r\n// Format of images\r\n// .jpg might work but don't, just don't\r\nconst IMAGE_FORMAT = \"png\";\r\n// Format of sounds\r\n// mp3 has very wide browser support: https://caniuse.com/#feat=mp3\r\nconst SOUND_FORMAT = \"mp3\";\r\nclass GameRuntime extends _task__WEBPACK_IMPORTED_MODULE_8__[\"TaskRunner\"] {\r\n    constructor(container) {\r\n        super();\r\n        // debug config variables\r\n        this._DEBUG_NON_STATIC_OUTLINE = false;\r\n        this._DEBUG_STATIC_OUTLINE = false;\r\n        this.isMobile = Object(_utils__WEBPACK_IMPORTED_MODULE_9__[\"isMobile\"])();\r\n        this.images = new Map();\r\n        this.sounds = new Map();\r\n        this.sprites = [];\r\n        this.frames = 0;\r\n        this.started = false;\r\n        this.background = \"white\";\r\n        this.defaultState = new _state__WEBPACK_IMPORTED_MODULE_6__[\"GameState\"]();\r\n        this.cursor = \"default\";\r\n        this._volume = 0;\r\n        this._assetPromises = [];\r\n        // make the main canvas and add it to the DOM\r\n        const { canvas, ctx } = this.createCanvas({ alpha: false });\r\n        this.canvas = canvas;\r\n        this.ctx = ctx;\r\n        container.appendChild(this.canvas);\r\n        // init static rendering optimizations\r\n        const { canvas: staticCanvas, ctx: staticCtx } = this.createCanvas();\r\n        this.staticCanvas = staticCanvas;\r\n        this.staticCtx = staticCtx;\r\n        // collision canvas\r\n        const { canvas: collisionCanvas, ctx: collisionCtx } = this.createCanvas();\r\n        this.collisionCanvas = collisionCanvas;\r\n        this.collisionCtx = collisionCtx;\r\n        // mouse driver, support pc and mobile to some degree\r\n        if (this.isMobile) {\r\n            // console.log(\"mobile\");\r\n            this.mouse = new _drivers_mouse_touchscreen__WEBPACK_IMPORTED_MODULE_3__[\"TouchscreenMouse\"](this);\r\n        }\r\n        else {\r\n            // console.log(\"pc\");\r\n            this.mouse = new _drivers_mouse_mouse__WEBPACK_IMPORTED_MODULE_2__[\"Mouse\"](this);\r\n        }\r\n        this.addTask(() => this.mouse.update());\r\n        this.keyboard = new _drivers_keyboard_keyboard__WEBPACK_IMPORTED_MODULE_1__[\"Keyboard\"](this);\r\n        // set the current runtime on some objects\r\n        // i dont want to do this but it works\r\n        // FIXME: GameRuntime.instance instead of this.runtime\r\n        _sprite__WEBPACK_IMPORTED_MODULE_5__[\"AbstractSprite\"].runtime = this;\r\n        // set inital variables that have to happen after other things here\r\n        this.volume = 0.5;\r\n    }\r\n    ///\r\n    /// ASSETS\r\n    ///\r\n    // add an asset and start loading it\r\n    addImage(src) {\r\n        // uses the original src for storage\r\n        // TODO: consider using the new src and adding that into getAsset?\r\n        const originalSrc = src;\r\n        // add the extension and folder\r\n        src = `assets/${src}`;\r\n        if (src.indexOf(\".\") === -1) {\r\n            src += \".\" + IMAGE_FORMAT;\r\n        }\r\n        // console.log(\"adding image\", src);\r\n        const promise = new Promise((resolve, reject) => {\r\n            const image = new Image();\r\n            image.src = src;\r\n            image.onload = () => resolve();\r\n            image.onerror = () => reject();\r\n            this.images.set(originalSrc, image);\r\n        });\r\n        this._assetPromises.push(promise);\r\n        return promise;\r\n    }\r\n    // see: addImage()\r\n    addSound(src) {\r\n        const originalSrc = src;\r\n        // add the extension and folder\r\n        src = `assets/sounds/${src}`;\r\n        if (src.indexOf(\".\") === -1) {\r\n            src += \".\" + SOUND_FORMAT;\r\n        }\r\n        // console.log(\"adding sound\", src);\r\n        const promise = new Promise((resolve, reject) => {\r\n            const sound = new Audio(src);\r\n            sound.oncanplaythrough = () => resolve();\r\n            sound.onerror = () => reject();\r\n            sound.preload = \"auto\";\r\n            this.sounds.set(originalSrc, sound);\r\n        });\r\n        // music doesn't need to load for the game to work\r\n        // it can load in the background when it starts to play\r\n        // this._assetPromises.push(promise);\r\n        return promise;\r\n    }\r\n    // wait for all assets to load\r\n    waitForAssets(handler = () => { }) {\r\n        // progress reporting\r\n        const total = this._assetPromises.length;\r\n        let current = 0;\r\n        for (const promise of this._assetPromises) {\r\n            promise.then(() => {\r\n                current++;\r\n                handler(current / total);\r\n            });\r\n        }\r\n        // the actual loading stuff\r\n        return Promise.all(this._assetPromises)\r\n            .then(() => {\r\n            // console.log(\"loaded assets\");\r\n            this._assetPromises = [];\r\n        });\r\n    }\r\n    // get an asset with a name\r\n    getImage(src) {\r\n        const image = this.images.get(src);\r\n        if (!image) {\r\n            throw new Error(`Couldn't get image with name ${src}`);\r\n        }\r\n        return image;\r\n    }\r\n    // get a sound with a name\r\n    getSound(src, clone = false) {\r\n        const val = this.sounds.get(src);\r\n        if (!val) {\r\n            throw new Error(`Couldn't get audio with name ${src}`);\r\n        }\r\n        if (clone) {\r\n            return val.cloneNode();\r\n        }\r\n        else {\r\n            return val;\r\n        }\r\n    }\r\n    // plays a sound and resets its currentTime to 0\r\n    playSound(src, clone = false) {\r\n        if (typeof src === \"string\") {\r\n            src = this.getSound(src, clone);\r\n        }\r\n        src.currentTime = 0;\r\n        src.volume = this.volume;\r\n        src.play();\r\n        return src;\r\n    }\r\n    // stops a sound and resets its currentTime to 0\r\n    stopSound(src) {\r\n        if (typeof src === \"string\") {\r\n            src = this.getSound(src);\r\n        }\r\n        src.currentTime = 0;\r\n        src.pause();\r\n        return src;\r\n    }\r\n    ///\r\n    /// CORE\r\n    ///\r\n    // resets things and starts the loop\r\n    start() {\r\n        // console.log(\"starting loop\");\r\n        this.loop();\r\n        this.updateStatic();\r\n        this.started = true;\r\n        new _staticRenderer__WEBPACK_IMPORTED_MODULE_7__[\"StaticRendererSprite\"]({\r\n            position: new _vector__WEBPACK_IMPORTED_MODULE_10__[\"Vector\"](0, 0, -1),\r\n            persistent: true,\r\n        });\r\n    }\r\n    // the main loop - calls all tasks in all sprites\r\n    loop() {\r\n        // update sprites and this\r\n        this.frames++;\r\n        try {\r\n            this.update();\r\n        }\r\n        catch (e) {\r\n            // handle exiting\r\n            if (e instanceof _errors_exit__WEBPACK_IMPORTED_MODULE_4__[\"ExitError\"]) {\r\n                this.onexit();\r\n                return;\r\n            }\r\n            else {\r\n                throw e;\r\n            }\r\n        }\r\n        // render\r\n        this.render();\r\n        // request the next frame to render\r\n        requestAnimationFrame(() => this.loop());\r\n    }\r\n    update() {\r\n        this.cursor = \"default\";\r\n        // all non-core details should be implemented using this.addTask\r\n        // the only core things right now are sprite ticking and rendering (partly due to ordering reasons)\r\n        // all tasks added on here are executed BEFORE sprites\r\n        this.runTasks();\r\n        // all sprites\r\n        for (const sprite of this.sprites) {\r\n            if (sprite.gameState && !sprite.gameState.updatingEnabled) {\r\n                continue;\r\n            }\r\n            sprite.update();\r\n        }\r\n    }\r\n    stopAllSounds() {\r\n        for (const sound of this.sounds.values()) {\r\n            this.stopSound(sound);\r\n        }\r\n    }\r\n    // throws an error that is handled gracefully by the update function\r\n    // stops ALL execution\r\n    exit() {\r\n        this.stopAllSounds();\r\n        console.warn(\"exiting using exit()\");\r\n        // instances of ExitError are treated specially by the update function\r\n        throw new _errors_exit__WEBPACK_IMPORTED_MODULE_4__[\"ExitError\"]();\r\n    }\r\n    ///\r\n    /// EVENTS\r\n    ///\r\n    // called when exiting\r\n    onexit() {\r\n        this.started = false;\r\n    }\r\n    // when volume is set\r\n    onsetvolume(volume) {\r\n    }\r\n    ///\r\n    /// RENDERING\r\n    ///\r\n    updateStatic() {\r\n        this.resetCanvas(this.staticCtx);\r\n        this.sortSprites();\r\n        for (const sprite of this.sprites) {\r\n            if (sprite.static) {\r\n                sprite.render(this.staticCtx);\r\n            }\r\n        }\r\n        if (this._DEBUG_STATIC_OUTLINE) {\r\n            this.staticCtx.strokeStyle = \"orange\";\r\n            this.staticCtx.lineWidth = 1;\r\n            this.staticCtx.beginPath();\r\n            for (const sprite of this.sprites) {\r\n                this.staticCtx.rect(sprite.x, sprite.y, sprite.width, sprite.height);\r\n            }\r\n            this.staticCtx.closePath();\r\n            this.staticCtx.stroke();\r\n        }\r\n    }\r\n    render() {\r\n        // clear the canvas\r\n        this.resetCanvas(this.ctx, this.background);\r\n        // sort sprites by z\r\n        this.sortSprites();\r\n        // render all non static sprites onto our canvas\r\n        for (const sprite of this.sprites) {\r\n            if (sprite.gameState && !sprite.gameState.renderingEnabled) {\r\n                continue;\r\n            }\r\n            if (!sprite.static) {\r\n                sprite.render(this.ctx);\r\n            }\r\n        }\r\n        if (this.canvas.style.cursor !== this.cursor) {\r\n            this.canvas.style.cursor = this.cursor;\r\n        }\r\n        if (this._DEBUG_NON_STATIC_OUTLINE) {\r\n            this.ctx.strokeStyle = \"red\";\r\n            this.ctx.lineWidth = 1;\r\n            this.ctx.beginPath();\r\n            for (const sprite of this.sprites) {\r\n                if (sprite.gameState && !sprite.gameState.renderingEnabled) {\r\n                    continue;\r\n                }\r\n                if (!sprite.static) {\r\n                    this.ctx.rect(sprite.x, sprite.y, sprite.width, sprite.height);\r\n                }\r\n            }\r\n            this.ctx.closePath();\r\n            this.ctx.stroke();\r\n        }\r\n    }\r\n    sortSprites() {\r\n        // if the sprites list isn't sorted anymore, then sort it\r\n        const end = this.sprites.length - 1;\r\n        for (let i = 0; i < end; i++) {\r\n            const thisSprite = this.sprites[i];\r\n            const nextSprite = this.sprites[i + 1];\r\n            if (thisSprite.z > nextSprite.z) {\r\n                this.sprites.stableSort((a, b) => a.position.z - b.position.z);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    // clears the canvas and sets the background or makes it transparent\r\n    resetCanvas(ctx, background = \"rgba(0, 0, 0, 0)\") {\r\n        const width = ctx.canvas.width;\r\n        const height = ctx.canvas.height;\r\n        ctx.clearRect(0, 0, width, height);\r\n        ctx.fillStyle = background;\r\n        ctx.fillRect(0, 0, width, height);\r\n    }\r\n    createCanvas(options) {\r\n        const canvas = document.createElement(\"canvas\");\r\n        canvas.width = CANVAS_WIDTH;\r\n        canvas.height = CANVAS_HEIGHT;\r\n        const ctx = canvas.getContext(\"2d\", options);\r\n        ctx.imageSmoothingEnabled = false;\r\n        return { canvas, ctx };\r\n    }\r\n    ///\r\n    /// ACCESSORS\r\n    ///\r\n    get volume() {\r\n        return this._volume;\r\n    }\r\n    set volume(volume) {\r\n        for (const sound of this.sounds.values()) {\r\n            sound.volume = volume;\r\n        }\r\n        this._volume = volume;\r\n        this.onsetvolume(volume);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/runtime.ts?");

/***/ }),

/***/ "./src/engine/sprite.ts":
/*!******************************!*\
  !*** ./src/engine/sprite.ts ***!
  \******************************/
/*! exports provided: AbstractSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractSprite\", function() { return AbstractSprite; });\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./task */ \"./src/engine/task.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _vector2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vector2d */ \"./src/engine/vector2d.ts\");\n\r\n\r\n\r\n\r\nclass AbstractSprite extends _task__WEBPACK_IMPORTED_MODULE_0__[\"TaskRunner\"] {\r\n    constructor(options) {\r\n        super();\r\n        this.runtime = AbstractSprite.runtime;\r\n        // disable pass by reference for positions\r\n        if (options.position instanceof _vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"]) {\r\n            this.position = new _vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](options.position);\r\n        }\r\n        else {\r\n            this.position = options.position;\r\n        }\r\n        this.width = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.width, 0);\r\n        this.height = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.height, 0);\r\n        this.scale = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.scale, new _vector2d__WEBPACK_IMPORTED_MODULE_3__[\"Vector2D\"](1, 1));\r\n        this.persistent = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.persistent, false);\r\n        this.visible = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.visible, true);\r\n        this.rotation = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.rotation, 0);\r\n        this.opacity = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.opacity, 1);\r\n        this.rotationPoint = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.rotationPoint, new _vector2d__WEBPACK_IMPORTED_MODULE_3__[\"Vector2D\"](0.5, 0.5));\r\n        this.static = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.static, false);\r\n        this.gameState = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.gameState, this.runtime.defaultState);\r\n        this.runtime.sprites.push(this);\r\n    }\r\n    update() {\r\n        this.runTasks();\r\n    }\r\n    destroy() {\r\n        this._removeFromList(this.runtime.sprites);\r\n        this.resetTasks(); // stop all future things from running\r\n        // removed from all lists, should be effectively invisible\r\n        // allows some nightlight optimizations to not ruin things\r\n        this.visible = false;\r\n    }\r\n    _removeFromList(list) {\r\n        const index = list.indexOf(this);\r\n        if (index > -1) {\r\n            list.splice(index, 1);\r\n        }\r\n    }\r\n    // TODO: rotation\r\n    intersects(thing) {\r\n        if (thing instanceof AbstractSprite) {\r\n            return this.x < thing.x + thing.width &&\r\n                this.x + this.width > thing.x &&\r\n                this.y < thing.y + thing.height &&\r\n                this.y + this.height > thing.y;\r\n        }\r\n        else {\r\n            for (const sprite of thing) {\r\n                if (this.intersects(sprite)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    containsPoint(point) {\r\n        return this.x < point.x &&\r\n            this.x + this.width > point.x &&\r\n            this.y < point.y &&\r\n            this.y + this.height > point.y;\r\n    }\r\n    _setRenderValues(ctx) {\r\n        ctx.globalAlpha = this.opacity;\r\n        if (this.rotation !== 0) {\r\n            // terrible code\r\n            // rotation is difficult\r\n            // https://stackoverflow.com/a/4650102\r\n            const translateX = this.x + this.width * this.rotationPoint.x;\r\n            const translateY = this.y + this.height * this.rotationPoint.y;\r\n            ctx.translate(translateX, translateY);\r\n            ctx.rotate(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"degreeToRadians\"])(this.rotation));\r\n            ctx.translate(-translateX, -translateY);\r\n        }\r\n        if (this.scale.x !== 1 || this.scale.y !== 1) {\r\n            const translateX = this.x + this.width / 2;\r\n            const translateY = this.y + this.height / 2;\r\n            ctx.translate(translateX, translateY);\r\n            ctx.scale(this.scale.x, this.scale.y);\r\n            ctx.translate(-translateX, -translateY);\r\n        }\r\n    }\r\n    // moves in the direction being faced X pixels\r\n    moveForward(steps) {\r\n        const angle = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"degreeToRadians\"])(this.rotation);\r\n        const sin = Math.sin(angle);\r\n        const cos = Math.cos(angle);\r\n        this.x += sin * steps;\r\n        this.y += cos * steps;\r\n    }\r\n    distanceTo(point) {\r\n        return Math.sqrt(Math.pow((point.x - this.centerX), 2) + Math.pow((point.y - this.centerY), 2));\r\n    }\r\n    get x() {\r\n        return this.position.x;\r\n    }\r\n    set x(x) {\r\n        this.position.x = x;\r\n    }\r\n    get y() {\r\n        return this.position.y;\r\n    }\r\n    set y(y) {\r\n        this.position.y = y;\r\n    }\r\n    get z() {\r\n        return this.position.z;\r\n    }\r\n    set z(z) {\r\n        this.position.z = z;\r\n    }\r\n    get centerX() {\r\n        return this.x + (this.width / 2);\r\n    }\r\n    get centerY() {\r\n        return this.y + (this.height / 2);\r\n    }\r\n    get centerPosition() {\r\n        return new _vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.centerX, this.centerY);\r\n    }\r\n    // Tests if a \"complex\" (fancy rendering/non square) sprite is touching a simple (square) sprite\r\n    complexIntersectsSimple(sprite) {\r\n        const canvas = this.runtime.collisionCanvas;\r\n        const ctx = this.runtime.collisionCtx;\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        this.render(ctx);\r\n        const data = ctx.getImageData(sprite.x, sprite.y, sprite.width, sprite.height).data;\r\n        // some browsers are funny (specifically tor)\r\n        // TODO: warning message?\r\n        if (!data) {\r\n            return false;\r\n        }\r\n        const length = data.length;\r\n        for (let i = 3; i < length; i += 4) {\r\n            if (data[i]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/sprite.ts?");

/***/ }),

/***/ "./src/engine/sprites/imagesprite.ts":
/*!*******************************************!*\
  !*** ./src/engine/sprites/imagesprite.ts ***!
  \*******************************************/
/*! exports provided: ImageSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageSprite\", function() { return ImageSprite; });\n/* harmony import */ var _sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./src/engine/utils.ts\");\n\r\n\r\nclass ImageSprite extends _sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.texture = options.texture;\r\n        this.width = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.width, this.texture.width);\r\n        this.height = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.height, this.texture.height);\r\n        this.rotation = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.rotation, 0);\r\n        this.opacity = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.opacity, 1);\r\n    }\r\n    render(ctx) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        ctx.save();\r\n        this._setRenderValues(ctx);\r\n        const x = this.x;\r\n        const y = this.y;\r\n        ctx.drawImage(this.texture, x, y, this.width, this.height);\r\n        ctx.restore();\r\n    }\r\n    updateDimensions() {\r\n        this.width = this.texture.width;\r\n        this.height = this.texture.height;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/sprites/imagesprite.ts?");

/***/ }),

/***/ "./src/engine/state.ts":
/*!*****************************!*\
  !*** ./src/engine/state.ts ***!
  \*****************************/
/*! exports provided: GameState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameState\", function() { return GameState; });\nclass GameState {\r\n    constructor() {\r\n        this.renderingEnabled = true;\r\n        this.updatingEnabled = true;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/state.ts?");

/***/ }),

/***/ "./src/engine/staticRenderer.ts":
/*!**************************************!*\
  !*** ./src/engine/staticRenderer.ts ***!
  \**************************************/
/*! exports provided: StaticRendererSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StaticRendererSprite\", function() { return StaticRendererSprite; });\n/* harmony import */ var _sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sprite */ \"./src/engine/sprite.ts\");\n\r\nclass StaticRendererSprite extends _sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\r\n    render(ctx) {\r\n        ctx.drawImage(this.runtime.staticCanvas, 0, 0);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/staticRenderer.ts?");

/***/ }),

/***/ "./src/engine/task.ts":
/*!****************************!*\
  !*** ./src/engine/task.ts ***!
  \****************************/
/*! exports provided: Task, TaskRunner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Task\", function() { return Task; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskRunner\", function() { return TaskRunner; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/engine/utils.ts\");\n\r\n// a task is something to be run at a certain time, maybe repeating\r\nclass Task {\r\n    constructor(options) {\r\n        this.repeatCount = 0;\r\n        const runnable = options.run;\r\n        const delay = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.delay, 0);\r\n        const repeatEvery = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.repeatEvery, -1);\r\n        const repeatMax = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.repeatMax, Infinity);\r\n        const onend = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.onend, null);\r\n        this.originalOptions = options;\r\n        this.runnable = runnable;\r\n        this.delay = delay;\r\n        this.repeatEvery = repeatEvery;\r\n        this.repeatMax = repeatMax;\r\n        this.onend = onend;\r\n    }\r\n    run() {\r\n        // pass this task to the function so that it can call things like task.stop();\r\n        this.runnable(this);\r\n    }\r\n    stop() {\r\n        this.delay = -1;\r\n    }\r\n}\r\n// the things that runs tasks\r\n// adds everything tasks use\r\n// most methods prefixed with _ to avoid as many collisions as possible\r\n// almost EVERYTHING extends this (and as such can have tasks on it)\r\nclass TaskRunner {\r\n    constructor() {\r\n        this._tasks = [];\r\n        this._newTasks = [];\r\n    }\r\n    runTasks() {\r\n        if (this._newTasks.length > 0) {\r\n            for (const newTask of this._newTasks) {\r\n                this._tasks.push(newTask);\r\n            }\r\n            this._newTasks = [];\r\n        }\r\n        for (const task of this._tasks) {\r\n            if (task.delay <= 0) {\r\n                task.run();\r\n                task.repeatCount++;\r\n                if (task.delay === -1) {\r\n                    // called task.stop();\r\n                }\r\n                else if (task.repeatEvery >= 0 && task.repeatCount < task.repeatMax) {\r\n                    task.delay = task.repeatEvery;\r\n                }\r\n                else {\r\n                    task.delay = -1;\r\n                }\r\n            }\r\n            else {\r\n                task.delay--;\r\n            }\r\n        }\r\n        this._tasks = this._tasks.filter((task) => {\r\n            if (task.delay === -1) {\r\n                if (task.onend) {\r\n                    task.onend();\r\n                }\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n    resetTasks() {\r\n        this._tasks = [];\r\n    }\r\n    stopAllTasks() {\r\n        this._tasks = [];\r\n        this._newTasks = [];\r\n    }\r\n    // add a task\r\n    // can either be a task or a function\r\n    // if it is a task it is added as you would expect\r\n    // if it is a function it will repeat every frame\r\n    addTask(task) {\r\n        if (typeof task === \"function\") {\r\n            return this.addTask(new Task({\r\n                run: task,\r\n                repeatEvery: 0,\r\n            }));\r\n        }\r\n        else {\r\n            this._newTasks.push(task);\r\n            return task;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/task.ts?");

/***/ }),

/***/ "./src/engine/utils.ts":
/*!*****************************!*\
  !*** ./src/engine/utils.ts ***!
  \*****************************/
/*! exports provided: isMobile, getOrDefault, toHex, radiansToDegree, degreeToRadians */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isMobile\", function() { return isMobile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getOrDefault\", function() { return getOrDefault; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toHex\", function() { return toHex; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"radiansToDegree\", function() { return radiansToDegree; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"degreeToRadians\", function() { return degreeToRadians; });\n// https://stackoverflow.com/a/3540295\r\n// tests if the device is probably a mobile phone\r\nfunction isMobile() {\r\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n}\r\n// if obj is defined, return obj\r\n// else return def\r\n// used as less verbose option defaulting without neglecting falsy values (|| does that)\r\nfunction getOrDefault(obj, def) {\r\n    if (typeof obj === \"undefined\") {\r\n        return def;\r\n    }\r\n    else {\r\n        return obj;\r\n    }\r\n}\r\n// https://stackoverflow.com/a/697841\r\nfunction toHex(number) {\r\n    return number.toString(16).toUpperCase();\r\n}\r\nfunction radiansToDegree(rad) {\r\n    return rad * 180 / Math.PI;\r\n}\r\nfunction degreeToRadians(deg) {\r\n    return deg * Math.PI / 180;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/utils.ts?");

/***/ }),

/***/ "./src/engine/vector.ts":
/*!******************************!*\
  !*** ./src/engine/vector.ts ***!
  \******************************/
/*! exports provided: Vector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector\", function() { return Vector; });\n/* harmony import */ var _vector2d__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vector2d */ \"./src/engine/vector2d.ts\");\n\r\n/*\r\n * A 3D Vector: (x, y, z)\r\n *\r\n * z is optional when creating Vectors\r\n */\r\n// a simple position class that removes some verbosity from code\r\n// can make for some nicer code sometimes\r\nclass Vector extends _vector2d__WEBPACK_IMPORTED_MODULE_0__[\"Vector2D\"] {\r\n    constructor(x = 0, y = 0, z = 0) {\r\n        super(x, y);\r\n        if (typeof x === \"object\") {\r\n            this.z = x.z;\r\n        }\r\n        else {\r\n            this.z = z;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/vector.ts?");

/***/ }),

/***/ "./src/engine/vector2d.ts":
/*!********************************!*\
  !*** ./src/engine/vector2d.ts ***!
  \********************************/
/*! exports provided: Vector2D */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector2D\", function() { return Vector2D; });\n/*\r\n * A 2D Vector: (x, y)\r\n *\r\n * Used for scale and other only 2D stuff\r\n */\r\nclass Vector2D {\r\n    constructor(x = 0, y = 0) {\r\n        if (typeof x === \"object\") {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n        }\r\n        else {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/engine/vector2d.ts?");

/***/ }),

/***/ "./src/game/game.ts":
/*!**************************!*\
  !*** ./src/game/game.ts ***!
  \**************************/
/*! exports provided: Nightlight */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Nightlight\", function() { return Nightlight; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../engine/runtime */ \"./src/engine/runtime.ts\");\n/* harmony import */ var _engine_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../engine/state */ \"./src/engine/state.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _engine_vector2d__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../engine/vector2d */ \"./src/engine/vector2d.ts\");\n/* harmony import */ var _levelcode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../levelcode */ \"./src/levelcode.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _levels__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./levels */ \"./src/game/levels.ts\");\n/* harmony import */ var _sprites_bosses_final_finalboss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sprites/bosses/final/finalboss */ \"./src/game/sprites/bosses/final/finalboss.ts\");\n/* harmony import */ var _sprites_bosses_noss_noss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./sprites/bosses/noss/noss */ \"./src/game/sprites/bosses/noss/noss.ts\");\n/* harmony import */ var _sprites_bosses_sword_sword__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sprites/bosses/sword/sword */ \"./src/game/sprites/bosses/sword/sword.ts\");\n/* harmony import */ var _sprites_jumplight__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./sprites/jumplight */ \"./src/game/sprites/jumplight.ts\");\n/* harmony import */ var _sprites_pause_PauseSprite__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./sprites/pause/PauseSprite */ \"./src/game/sprites/pause/PauseSprite.ts\");\n/* harmony import */ var _sprites_player_player__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./sprites/player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _sprites_stars__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./sprites/stars */ \"./src/game/sprites/stars.ts\");\n/* harmony import */ var _sprites_text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./sprites/text/StaticNightlightTextSprite */ \"./src/game/sprites/text/StaticNightlightTextSprite.ts\");\n/* harmony import */ var _sprites_zindex__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./sprites/zindex */ \"./src/game/sprites/zindex.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst SPOTLIGHT_SIZE = 75;\r\nconst TOTAL_BACKGROUND_STARS = 100;\r\nclass Nightlight extends _engine_runtime__WEBPACK_IMPORTED_MODULE_2__[\"GameRuntime\"] {\r\n    constructor() {\r\n        super(Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"canvas\"));\r\n        this.level = 0;\r\n        this.levelData = \"\";\r\n        this.levels = [];\r\n        this.background = \"black\";\r\n        this.backgroundMusic = [];\r\n        this.darkLevel = false;\r\n        this.ordereredBlocks = [];\r\n        this.blocks = [];\r\n        this.playState = this.defaultState;\r\n        this.pauseState = new _engine_state__WEBPACK_IMPORTED_MODULE_3__[\"GameState\"]();\r\n        (Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"volume\")).oninput = (e) => {\r\n            const volume = Number(e.target.value);\r\n            this.updateVolume(volume);\r\n        };\r\n        this.updateVolume(Number(Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"volume\").value));\r\n        window.runtime = this;\r\n    }\r\n    updateVolume(volume) {\r\n        this.volume = volume / 100;\r\n    }\r\n    //\r\n    // Utilities and Init\r\n    //\r\n    setBackgroundMusic(music) {\r\n        for (const sound of this.backgroundMusic) {\r\n            this.stopSound(sound);\r\n            sound.loop = false;\r\n            sound.onended = () => { };\r\n        }\r\n        this.backgroundMusic = music;\r\n        for (const sound of music) {\r\n            sound.onended = () => this.nextBackgroundMusic();\r\n        }\r\n        if (music.length > 0) {\r\n            this.playSound(music[0]);\r\n        }\r\n    }\r\n    nextBackgroundMusic() {\r\n        if (this.backgroundMusic.length > 1) {\r\n            this.backgroundMusic.shift();\r\n        }\r\n        this.playSound(this.backgroundMusic[0]);\r\n    }\r\n    createPlayer() {\r\n        this.player = new _sprites_player_player__WEBPACK_IMPORTED_MODULE_14__[\"PlayerSprite\"]({\r\n            texture: this.getImage(\"player/idle\"),\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0, _sprites_zindex__WEBPACK_IMPORTED_MODULE_17__[\"ZIndexes\"].Player),\r\n            width: _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"],\r\n            height: _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"],\r\n            persistent: true,\r\n        });\r\n    }\r\n    createStarBackground() {\r\n        const positions = [];\r\n        for (let i = 0; i < TOTAL_BACKGROUND_STARS; i++) {\r\n            const x = Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getRandomInt\"])(0, this.canvas.width);\r\n            const y = Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getRandomInt\"])(0, this.canvas.height);\r\n            positions.push(new _engine_vector2d__WEBPACK_IMPORTED_MODULE_5__[\"Vector2D\"](x, y));\r\n        }\r\n        this.backgroundStars = new _sprites_stars__WEBPACK_IMPORTED_MODULE_15__[\"BackgroundStarsSprite\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0, _sprites_zindex__WEBPACK_IMPORTED_MODULE_17__[\"ZIndexes\"].Stars),\r\n            width: 2,\r\n            height: 2,\r\n            persistent: true,\r\n        }, positions);\r\n    }\r\n    //\r\n    // Overrides\r\n    //\r\n    start(levels) {\r\n        super.start();\r\n        new _sprites_pause_PauseSprite__WEBPACK_IMPORTED_MODULE_13__[\"PauseSprite\"]({\r\n            texture: this.getImage(\"pause\"),\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\r\n            persistent: true,\r\n        });\r\n        this.castleBackground = this.ctx.createPattern(this.getImage(\"brick\"), \"repeat\");\r\n        if (levels) {\r\n            this.levels = levels;\r\n        }\r\n        else {\r\n            this.levels = Object(_levels__WEBPACK_IMPORTED_MODULE_8__[\"getLevels\"])(this);\r\n        }\r\n        this.createPlayer();\r\n        this.createStarBackground();\r\n        this.renderLevel();\r\n    }\r\n    render() {\r\n        super.render();\r\n        if (this.darkLevel) {\r\n            // https://stackoverflow.com/a/6271865\r\n            const { canvas: coverCanvas, ctx: coverCtx } = this.createCanvas();\r\n            coverCtx.fillStyle = \"black\";\r\n            this.resetCanvas(coverCtx, \"black\");\r\n            coverCtx.globalCompositeOperation = \"xor\";\r\n            const player = this.player;\r\n            const centerX = player.x + (player.width / 2);\r\n            const centerY = player.y + (player.height / 2);\r\n            coverCtx.arc(centerX, centerY, SPOTLIGHT_SIZE, 0, 2 * Math.PI);\r\n            coverCtx.fill();\r\n            this.ctx.drawImage(coverCanvas, 0, 0);\r\n        }\r\n    }\r\n    //\r\n    // Levels\r\n    //\r\n    destroyLevel() {\r\n        const sprites = Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"clone\"])(this.sprites);\r\n        for (const sprite of sprites) {\r\n            if (!sprite.persistent) {\r\n                sprite.destroy();\r\n            }\r\n        }\r\n    }\r\n    createBlock(position, char, index) {\r\n        const blockType = _blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][char];\r\n        if (typeof blockType === \"undefined\") {\r\n            throw new Error(`Could not find block metadata for ${char}`);\r\n        }\r\n        const texture = this.getImage(blockType.texture);\r\n        const spriteConstructor = blockType.type;\r\n        if (!texture) {\r\n            console.error(`Could not find block texture for ${blockType}, skipping`);\r\n            return;\r\n        }\r\n        const opts = {\r\n            width: texture.width,\r\n            height: texture.height,\r\n            position,\r\n            texture,\r\n            levelIndex: index,\r\n        };\r\n        const block = new spriteConstructor(opts);\r\n        return block;\r\n    }\r\n    renderLevel(d = this.level) {\r\n        this.destroyLevel();\r\n        const level = typeof d === \"object\" ? d : this.levels[d];\r\n        const levelData = level.levelData;\r\n        this.levelData = levelData;\r\n        let x = 0;\r\n        let y = this.canvas.height - _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\r\n        for (let i = 0; i < levelData.length; i++) {\r\n            const char = levelData[i];\r\n            if (char !== \".\") {\r\n                const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](x, y);\r\n                this.createBlock(position, char, i);\r\n            }\r\n            x += _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"];\r\n            if (x >= this.canvas.width) {\r\n                x = 0;\r\n                y -= _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\r\n            }\r\n        }\r\n        // Level metadata\r\n        // if a level changes the background\r\n        if (level.background) {\r\n            if (level.background === \"castle\") {\r\n                level.background = this.castleBackground;\r\n            }\r\n            this.background = level.background;\r\n        }\r\n        // if a level has new background music\r\n        if (level.backgroundMusic) {\r\n            this.setBackgroundMusic(level.backgroundMusic.map((i) => this.getSound(i)));\r\n        }\r\n        // if a level has handlers\r\n        if (level.handlers) {\r\n            for (const handler of level.handlers) {\r\n                handler(this);\r\n            }\r\n        }\r\n        // if a level has a boss\r\n        if (typeof level.boss !== \"undefined\" && level.boss.type !== \"\") {\r\n            if (level.boss.type === \"sword\") {\r\n                new _sprites_bosses_sword_sword__WEBPACK_IMPORTED_MODULE_11__[\"SwordBoss\"]({\r\n                    texture: this.getImage(\"boss/sword/sword\"),\r\n                    position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\r\n                }, level.boss);\r\n            }\r\n            else if (level.boss.type === \"noss1\") {\r\n                new _sprites_bosses_noss_noss__WEBPACK_IMPORTED_MODULE_10__[\"NossBoss\"]({\r\n                    texture: this.getImage(\"boss/noss/noss\"),\r\n                    position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\r\n                });\r\n            }\r\n            else if (level.boss.type === \"noss2\") {\r\n                new _sprites_bosses_final_finalboss__WEBPACK_IMPORTED_MODULE_9__[\"FinalBoss\"]({\r\n                    texture: this.getImage(\"boss/noss/noss\"),\r\n                    position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\r\n                });\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown boss\");\r\n            }\r\n        }\r\n        if (typeof level.stars !== \"undefined\") {\r\n            this.backgroundStars.visible = level.stars;\r\n        }\r\n        // spawn text\r\n        if (level.text) {\r\n            for (const textOption of level.text) {\r\n                new _sprites_text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_16__[\"StaticNightlightTextSprite\"](textOption);\r\n            }\r\n        }\r\n        // dark rooms\r\n        this.darkLevel = !!level.dark;\r\n        // spawn things that you can jump on\r\n        if (level.jumpLights) {\r\n            this.spawnJumpLights(level.jumpLights);\r\n        }\r\n        // custom spawn handling\r\n        if (level.spawn) {\r\n            this.playerSpawn = level.spawn;\r\n        }\r\n        else {\r\n            this.playerSpawn = {\r\n                type: \"default\",\r\n            };\r\n        }\r\n        // render static things that were just created\r\n        this.updateStatic();\r\n        this.levelCode = Object(_levelcode__WEBPACK_IMPORTED_MODULE_6__[\"getContinueCodeForLevel\"])(this.level);\r\n        this.player.reset();\r\n    }\r\n    spawnJumpLights(positions) {\r\n        const texture = this.getImage(\"jumplight\");\r\n        for (const position of positions) {\r\n            new _sprites_jumplight__WEBPACK_IMPORTED_MODULE_12__[\"JumpLight\"]({\r\n                texture,\r\n                position,\r\n            });\r\n        }\r\n    }\r\n    onsetvolume(volume) {\r\n        Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"volume-level\").textContent = Math.round(volume * 100) + \"%\";\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/game.ts?");

/***/ }),

/***/ "./src/game/levels.ts":
/*!****************************!*\
  !*** ./src/game/levels.ts ***!
  \****************************/
/*! exports provided: getLevels */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLevels\", function() { return getLevels; });\n/* harmony import */ var _engine_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine/runtime */ \"./src/engine/runtime.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _sprites_ending_EndingSprite__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sprites/ending/EndingSprite */ \"./src/game/sprites/ending/EndingSprite.ts\");\n\r\n\r\n\r\n\r\n/*\r\n * It's level data\r\n */\r\nfunction goodbye() {\r\n    new _sprites_ending_EndingSprite__WEBPACK_IMPORTED_MODULE_3__[\"EndingSprite\"]({\r\n        position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](0, 0),\r\n    });\r\n}\r\n// This is terrible and should be changed.\r\nfunction getLevels(game) {\r\n    return [\r\n        /* tslint:disable:max-line-length */\r\n        // 0\r\n        {\r\n            levelData: \"eaaaaaaaaafeaaaafeaaaaaaaaaaaaeaaaaaaaaafbccccdeaaaaaaaaaaaaeaaaaaaaaafooooooeaaaaaaaaaaaaeaaaaaaaaaf......eaaaaaaaaaaaaeaaaaaaaaaf......eaaaaaaaaaaaabcccccccccd......bcccmaaaaaaaajkpppkkpqkl......jkqpeaaaaaaaa.....................eaaaaaaaa.....................eamccccnc.....................bcdkpkq.k.....................qpl..............................................................................................................................................................................................................................................................................................................................................................................\",\r\n            background: \"black\",\r\n            backgroundMusic: [\"music/exploration\"],\r\n            text: [{\r\n                    text: \"Small challenges\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-214, -26),\r\n                }],\r\n            stars: true,\r\n        },\r\n        // 1\r\n        {\r\n            levelData: \"aaaaaaaaaafr.r.r.r.r.r.eaaaaaaaaaaaaaaaafo.o.o.o.o.o.eaaaaaaaaaaaaaaaaf............eaaaaaaaaaaaaaaaaf............eaaaaaaaaaaaaaaaaf............eaaaaaaaaaaaaaaaaf.gi.........eaaaaaaaaaaaaaaaaf.jl.........eaaaaaaaaaaaaaaaaf.......gi...eaaaaaaccccccccccd.......jl...eaaaaaaqkkpkpqqkkl...........gmaaaaaa.....................gmaaaaaaa.....................bcmaaaaaa.....................kqeaaaaaa............ghhhhi.....eaaaaaa............jpqqkl.....eaaaaaa......ghi..............eaaaaaa......qkp..............eaaaaaa.......................eaaaaaa.............ghhhhi....bccnccc.............jqkkpl....pkq.kqk..........................................................................................\",\r\n            text: [{\r\n                    text: \"Higher Hills!\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-40, -124),\r\n                }],\r\n        },\r\n        // 2\r\n        {\r\n            levelData: \"aaaaaaf..............srrrrrrrraaaaaaf..............srrrrrrrraaaaaaf..............srrrrrrrraaaaaaf..............sssssrrrraaaaaaf..................srrrraaaaaaf..t....t..........srrrraaaaaaf..................srrrraaaaaaf..................ssnssaaaaaaf.......................ccccccd.......................kpkqqkl....gi............................ef.........ghhhhhhh...........ef.......ghmaaaaaaa...........ef......gmaaaaaaaaa...........emhhhhhhmaaaaaaaaaa...........eaaaaaaaaaaaaaaaaaa.........ghmaaaaaaaaaaaaaaaaaa.......ghmaaaaaaaaaaaaaaaaaaaa.....ghmaaaaaaaaaaaaaaaaaaaaaa...ghmaaaaaaaaaaaaaaaaaaaaaaaa..gmaaaaaaaaaaaaaaaaaaaaaaaaaa.gmaaaaaaaaaaaaaaaaaaaaaaaaaaa.eaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\r\n            text: [{\r\n                    text: \"They crumble beneath you!\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-112, -144),\r\n                }],\r\n        },\r\n        // 3\r\n        {\r\n            levelData: \"rrrrrs...................srrrrrrrrrs...................srrrrrrrrrs...................srrrrrrrrrs...................srrrrrrssss...................ssnssrrs......t...t................rrs...........................sss..............t...................................................gi............................emhi.................hi......gmaaf.................amhi...gmaaami...............gaaamhhhmaaaaamhi...........ghmaaaaaaaaaaaaaaamhhi.....ghhmaaaaaaaaaaaaaaaaaaaamhhhhhmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\r\n            text: [{\r\n                    text: \"Watch your faces...\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-80, 92),\r\n                }, {\r\n                    text: \"All six of them\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-64, 84),\r\n                },\r\n            ],\r\n        },\r\n        // 4\r\n        {\r\n            levelData: \"aaaaaf.............t....eaaaaaaaaaaf...t..............bcmaaaaaaaaf........t...........bmaaaaamcd.....................bcmmccd.........................ef...........................gmf.....ghhhvvvvvvhhhi.......gmami...gmmcdoo..oobccmhhi....peafp..gmaf...........bcmmhhi..eaf...qeaf.............bmafp..eami...em]i.............emd...eaami..efpp..ghhhi......ef...gmaafq..ef....pqncmi....gmd...eaaaf...bmi.......ef....bd....eaaaf....ef.......ef....w....gmaaami...ef.ghhhhhmmi...w....eaaaaami..emhmccuccmamhi.w..ghmaaaaaaf..bccd.....bmaamhhhhmaaaaaaaaf............eaaaaaaaaaaaaaaaami..........gmaaaaaaaaaaaaaaaaami.......ghmaaaaaaaaaaaaaaaaaaamhhhhhhhmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\r\n        },\r\n        // 5\r\n        {\r\n            levelData: \"aaaaaaaaaaafbccccdeaaaaaaaaaaaaaaaaaaaaaafooooooeaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaacccccccccccd......bccccccccccckkpppkkqpkkl......jkqkqkkpqqpp....................................................................................................................................................................................................................................................................................................................................................................................................................................\",\r\n            boss: {\r\n                type: \"sword\"\r\n            },\r\n            backgroundMusic: [\"music/boss/1\", \"music/boss/2\"],\r\n        },\r\n        // 6\r\n        {\r\n            levelData: \"aaaaaa5...................4aaaaaaaaa5...........y.......4aaaaaaaaa5...................4aaaaaaaaa5.....y.zzz.........1222aaaaaa5............zzz......x.aaaaaa5.......................2222223..zzz..............................................................................................................y..........................................................................................................................y678...........................4a5..........67778............123...t......4aaa5......68..............t..12n23......13....................................................................................................................................................\",\r\n            backgroundMusic: [\"music/blackroad/1\", \"music/blackroad/2\"],\r\n        },\r\n        // 7\r\n        {\r\n            levelData: \"aaaaaaaaaaaaaaaa5..!!!!!4aa5..aaaaaaaaaaaaaaaa5.....x.4aa98.aaaaaaaaaaaaaaaa5.......4aaa5.a9222222222229aa5.......4aaa98a5...w..w....4aa5..!!!!!122223a5...w.......4aa5.......aaaa..a5...w.......4aa5.......aaaa..a5.........!!4aa5!!!!!!!6778!.a5...........4aa5ooooooo4aa5..a978.........1223.......1223..aaa978........................aaaaa98.......................aaaaaa98......................aaaaaaa9778!!!!!..............229a9222223....................z1u3z.........................z...z......68ww68.............z...z......45!!45.............zzzzz......45..45........................45..45........................45..45........................497@95........................4aaaa5............\",\r\n        },\r\n        // 8\r\n        {\r\n            levelData: \"aaaa5...ooo45.45..45..soo4aaaaaaaa5......13.13..13..s..4aaaaaaaa5....s............s..4aaaa22223....s..#s$.......s..12222.........s..#ssss%s...s.......8........s..#ssssss!!!s.......978.....ss..#ss.......s.......aa98.....s...s$.sssssss@s.....aaa98....s...s$.s.......s.....aaaa98...s$..s$!s.......s.....aaaa93...s$..s$.s.......s.....aaaa5....s$..s$.s.......s.....aaaa5....s$..s$.s.......s.....aaaa5....s...s$!s.......s.....aaaa5...ss...s$.s.......s.....aaaa5....s..#s$.s!!!!!!!s.....aaaa5....s..#s$.sooooooos.....aaaa5....s..#s$!s......!s.....aaaa5.......#s$...............aaaa5.......ss$...............aaaa97778...ss$...............aaaaaaaa97778.................aaaaaaaaaaaa5.................\",\r\n        },\r\n        // 9\r\n        {\r\n            levelData: \"aaaaaaaaa5oooooooo4aa5......4aaaaaaaaaa5........4aa5......4aaaaaaaaaa5........1223......4a22222229a5..................4a.......4a5..................4a.......4a5..................4a.......4a5.............%....4a8ss....4a5.............o....4a5oo....4a5..................4a5......4a5..................4a5......4a5..................4a5......4a5...678............4a5....ss4a5...4a5.......%....4a5....oo4a5...4a5.......o....4a5......4a5...4a5............4a5......4a5...4a5............4a5......4a5...4a5............4a5s.....4a5...4a5............4a5o.....123...4a5.......%....4a5............4a5.......o....1n5............4a5..............5............4a5..............5............4a5..............\",\r\n            text: [{\r\n                    text: \"Touch a dot, jump again!\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-56, -108),\r\n                }],\r\n            jumpLights: [\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-168, -60),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-184, 20),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-168, 100),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-56, 36),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(136, -132),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(184, -76),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(136, -20),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(88, 20),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(136, 76),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(184, 116),\r\n            ],\r\n        },\r\n        // 10\r\n        {\r\n            levelData: \"4aaaaaaaaaaaaa5............4aa4aaaaaaaaaaaaa5............4aa4aaaaaaaaaaaaa5............4aa4aaaaaaaaaaaaa5............1n2122222222222223............w........y....................w........y.............zzz....w..$..#ss$.#s..........z.z....w..$...#s$.#s..........z.z....w..$....s$.#s....%.....zzz....w..s$...s$.#s...#s$...........w..ss$..s$.#s...#s$...........w..sss!!s$.#s...#s$...........w..sx...s$.#s...#s$...........w..s....s$.#s...#s$...........w.......su!ss...#s$...........w.......s...s...#s$...........w.......s...s...#s$...........w.......s...s...#s$...........w.......s!!!s...#s$..........#s$..............#s$..........#s$..............#s$..........#s$..............#s$..........#s$.\",\r\n            jumpLights: [\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-200, 116),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(104, -52),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-120, -44),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-120, 36),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-200, -28),\r\n            ],\r\n        },\r\n        // 11\r\n        {\r\n            levelData: \"aaaaaa5....................4aaaaa92n3....................4aaaaa5......................69aaaaa5.....................6aaaaaaa9778..................129aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aa2222223[[[[[[[[[[[[[[[[[[[[1u2..............................................................................................................................................................................................................................................................................\",\r\n            jumpLights: [\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(104, -28),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-80, -116),\r\n            ],\r\n        },\r\n        // 12\r\n        {\r\n            levelData: \"2222222222229aaaa9222222222222............4aaaa5........................4aaaa5........................122223......................................._=+...........................)^-...........................)^-...........................)^-......6778.................)^-......1223.................)^-...........................)^-...........................)^-...........................)^-.......................6777)^-.......................1222)^-...........................)^-...........................)^-...67778...................)^-...12223...................)^-...........................)^-.........................._`^-..........................&**(..............................\",\r\n            boss: {\r\n                type: \"noss1\"\r\n            },\r\n            backgroundMusic: [\"music/boss/1\", \"music/boss/2\"],\r\n            jumpLights: [\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, -44),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, 20),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, 84),\r\n            ],\r\n        },\r\n        // 13\r\n        {\r\n            levelData: \"^^^-..........................^^^-..........................***(...t...................................t.............................................................................................t.....................................................................................t.......t................t..............................................................................u.......................................t.....%%%..........................%_=+%........................#_`^`+$.......................#)^^^-$.......................#&*n*($........%%%..............w.w.........._=+..............www..........)^-...........................)^-...........................)^-.\",\r\n            background: \"castle\",\r\n            backgroundMusic: [\"music/netherslament\"],\r\n            text: [{\r\n                    text: \"Your final challenges.\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(56, -127),\r\n                }],\r\n            stars: false,\r\n        },\r\n        // 14\r\n        {\r\n            levelData: \"^^^^-......................)^^^^^^-......................)^^****(...t...t...t...t..t..t)^^...........................)^^...........................)^^...........................&**....._==================+..........)`*****************(.....=====`-oooooooooooooooooo.....******(..t...t...t...t...t.....................................................................t.............................._=======================......&*******************`^^^......oooooooooooooooooooo)^^^......t....t....t....t....&*n*........................................................................................................................==============================^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\",\r\n        },\r\n        // 15\r\n        {\r\n            levelData: \"^^^^-....................)^^^^^^^^-....................)^^^^****(....................&*u**.....................................................................................................................................................................................................................................................................................................................................%%%%%====+...................._====^^^^-....................)^^^^****(....................&*n**..x......................zw.wz.........................zwwwz.........................zzzzz..........................................................................................\",\r\n            text: [{\r\n                    text: \"Timing is everything\",\r\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-80, -130),\r\n                }],\r\n            jumpLights: [\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-144, -60),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-144, 0),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-144, 60),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, -44),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(144, -60),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(144, 0),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(144, 60),\r\n            ],\r\n        },\r\n        // 16\r\n        {\r\n            levelData: \"^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^`****************************`-...........................#)-...........................#)-...........................#)-!!_+......y.....zww..._+z..#)-..)-..................)-...#)-..)-..................)-...#)-%.)-..................)-...#)-sz)-......y.......zww.)-z..#)-..)-..................)-...#)-..)-..................)-...#)-.%)-..................)-...#)-zs)-......y.....wwz...)-z..#)-..)-..................)-...#)-..)-..................)-...#)-%.)-......s........._=`-s..#)-uz&(......x.........&n`-x..#)-....................w.)-...#)-....................w.)-...#)`======================``====`^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\",\r\n        },\r\n        // 17\r\n        {\r\n            levelData: \"^^^^^^^^^^^^-....)^^^^^^^-....^^^^^^^^^^^^-....)^^^^^^^-....************(....&*******(................................................................................................yyy......................t.................................................................y..........ss............................x..............t.................................w............................w.w..........................._@+....................t......)^-................t..........&u(...t...t...t.................................................................................................................................................................................................\",\r\n            dark: true,\r\n            backgroundMusic: [\"music/challenge\"],\r\n        },\r\n        // 18\r\n        {\r\n            levelData: \"^^^^^^^^-oooooooooooo)^^^^^^^^^^^^^^^^-............)^^^^^^^^^^^^^^^^-............)^^^^^^^^********(............&********................................................................................................................................................................................................................................................==================+$..........^^^^^^^^^^^^^^^^^^-$..........`*****************($..........-.............................-.............................-.............................-.............................-.............................-.............................`=@=======+...................^^^^^^^^^^-...................\",\r\n            dark: true,\r\n            jumpLights: [\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, -52),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(104, 20),\r\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(176, -35),\r\n            ],\r\n        },\r\n        // 19\r\n        {\r\n            levelData: \"..)^^^^^^^^^^^^^^^^^^^^^^^^-....)^^^^^^^^^^^^^^^^^^^^^^^^-....&************************(..........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................\",\r\n            backgroundMusic: [\"music/finalboss/1\", \"music/finalboss/2\"],\r\n            boss: {\r\n                type: \"noss2\",\r\n            },\r\n            spawn: {\r\n                type: \"range\",\r\n                minX: 0,\r\n                maxX: _engine_runtime__WEBPACK_IMPORTED_MODULE_0__[\"CANVAS_WIDTH\"],\r\n            },\r\n            background: \"black\",\r\n            stars: true,\r\n        },\r\n        // Goodbye\r\n        {\r\n            levelData: \"\",\r\n            backgroundMusic: [],\r\n            handlers: [goodbye],\r\n            stars: false,\r\n        },\r\n    ];\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/levels.ts?");

/***/ }),

/***/ "./src/game/physics.ts":
/*!*****************************!*\
  !*** ./src/game/physics.ts ***!
  \*****************************/
/*! exports provided: runPhysics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"runPhysics\", function() { return runPhysics; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../engine/utils */ \"./src/engine/utils.ts\");\n\r\n\r\nfunction runPhysics(sprite, opts = {}) {\r\n    opts.collision = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.collision, true);\r\n    opts.restrictPositionValues = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.restrictPositionValues, true);\r\n    opts.friction = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.friction, _config__WEBPACK_IMPORTED_MODULE_0__[\"FRICTION\"]);\r\n    opts.midAirFriction = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.midAirFriction, true);\r\n    opts.roundValues = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.roundValues, true);\r\n    sprite.x += sprite.xv;\r\n    if (opts.collision && handleCollision(sprite, true)) {\r\n        sprite.xv = 0;\r\n    }\r\n    if (opts.restrictPositionValues) {\r\n        if (sprite.x < 0) {\r\n            sprite.x = 0;\r\n            sprite.xv = 0;\r\n        }\r\n        else if (sprite.x + sprite.width > sprite.runtime.canvas.width) {\r\n            sprite.x = sprite.runtime.canvas.width - sprite.width;\r\n            sprite.xv = 0;\r\n        }\r\n    }\r\n    let onGround = false;\r\n    sprite.yv -= _config__WEBPACK_IMPORTED_MODULE_0__[\"GRAVITY\"];\r\n    sprite.y -= sprite.yv;\r\n    if (opts.collision && handleCollision(sprite, false)) {\r\n        if (sprite.yv < 0) {\r\n            onGround = true;\r\n        }\r\n        sprite.yv = 0;\r\n    }\r\n    if (opts.friction !== false) {\r\n        if (onGround || opts.midAirFriction) {\r\n            sprite.xv *= opts.friction;\r\n        }\r\n    }\r\n    if (opts.roundValues) {\r\n        sprite.x = Math.round(sprite.x);\r\n        sprite.y = Math.round(sprite.y);\r\n    }\r\n    return onGround;\r\n}\r\nfunction handleCollision(sprite, horizontal) {\r\n    const center = sprite.centerPosition;\r\n    const blocksFromLeft = Math.floor(center.x / _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"]);\r\n    const blocksFromBottom = Math.floor((sprite.runtime.canvas.height - center.y) / _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\r\n    const centerLevelIndex = blocksFromBottom * _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + blocksFromLeft;\r\n    const ordereredBlocks = sprite.runtime.ordereredBlocks;\r\n    const blocks = [\r\n        // For each block a 3x3 grid is shown, centered around the player\r\n        // O represents the block this selects\r\n        /*\r\n        X X X\r\n        X X X\r\n        O X X\r\n        */\r\n        ordereredBlocks[centerLevelIndex - _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1],\r\n        /*\r\n        X X X\r\n        X X X\r\n        X O X\r\n        */\r\n        ordereredBlocks[centerLevelIndex - _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"]],\r\n        /*\r\n        X X X\r\n        X X X\r\n        X X O\r\n        */\r\n        ordereredBlocks[centerLevelIndex - _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1],\r\n        /*\r\n        X X X\r\n        X X O\r\n        X X X\r\n        */\r\n        ordereredBlocks[centerLevelIndex + 1],\r\n        /*\r\n        X X X\r\n        X O X\r\n        X X X\r\n        */\r\n        ordereredBlocks[centerLevelIndex],\r\n        /*\r\n        X X X\r\n        O X X\r\n        X X X\r\n        */\r\n        ordereredBlocks[centerLevelIndex - 1],\r\n        /*\r\n        X O X\r\n        X X X\r\n        X X X\r\n        */\r\n        ordereredBlocks[centerLevelIndex + _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"]],\r\n        /*\r\n        X X O\r\n        X X X\r\n        X X X\r\n        */\r\n        ordereredBlocks[centerLevelIndex + _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1],\r\n        /*\r\n        O X X\r\n        X X X\r\n        X X X\r\n        */\r\n        ordereredBlocks[centerLevelIndex + _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1],\r\n    ];\r\n    const intersecting = [];\r\n    // Create a list of blocks that intersect the sprite\r\n    for (const block of blocks) {\r\n        if (!block) {\r\n            continue;\r\n        }\r\n        if (block.solid && block.visible && block.intersects(sprite)) {\r\n            intersecting.push(block);\r\n        }\r\n    }\r\n    // Sort the sprites so that those that are \"intersectingDeferred\" come last\r\n    intersecting.sort((a, b) => {\r\n        if (a.intersectingDeferred && !b.intersectingDeferred) {\r\n            return 1;\r\n        }\r\n        if (b.intersectingDeferred && !a.intersectingDeferred) {\r\n            return -1;\r\n        }\r\n        return 0;\r\n    });\r\n    // Loop through all the sorted blocks in order and attempt collision with them.\r\n    for (const block of intersecting) {\r\n        if (block.handleIntersect(sprite, horizontal ? sprite.xv : sprite.yv, horizontal) !== false) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/physics.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/black.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/black.ts ***!
  \******************************************/
/*! exports provided: BlackBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlackBlock\", function() { return BlackBlock; });\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\nclass BlackBlock extends _block__WEBPACK_IMPORTED_MODULE_0__[\"PseudoSolidBlock\"] {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.static = true;\r\n    }\r\n    render(ctx) {\r\n        ctx.fillStyle = \"black\";\r\n        ctx.fillRect(this.x, this.y, this.width, this.height);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/black.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/block.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/block.ts ***!
  \******************************************/
/*! exports provided: Block, SolidBlock, StaticSolidBlock, PseudoSolidBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Block\", function() { return Block; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SolidBlock\", function() { return SolidBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StaticSolidBlock\", function() { return StaticSolidBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PseudoSolidBlock\", function() { return PseudoSolidBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n\r\n\r\nclass Block extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.solid = false;\r\n        this.intersectingDeferred = false;\r\n        this.levelIndex = typeof opts.levelIndex !== \"undefined\" ? opts.levelIndex : -1;\r\n        this.runtime.blocks.push(this);\r\n        if (typeof opts.levelIndex !== \"undefined\") {\r\n            this.runtime.ordereredBlocks[opts.levelIndex] = this;\r\n        }\r\n        if (this.needsReinstantiate) {\r\n            this.spawningOptions = opts;\r\n        }\r\n    }\r\n    // Ugly duplication but it works\r\n    // Align the sprite to the floor and centered horizontally\r\n    floorAlign() {\r\n        this.centerAlign(true, false);\r\n        this.y += _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] - this.height;\r\n        this.y = Math.floor(this.y);\r\n    }\r\n    // Align the sprite to the left and centered vertically\r\n    leftAlign() {\r\n        this.centerAlign(false, true);\r\n        this.x += _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] - this.width;\r\n        this.x = Math.floor(this.x);\r\n    }\r\n    // Center the sprite\r\n    centerAlign(centerX = true, centerY = true) {\r\n        if (centerX) {\r\n            this.x += (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] - this.width) / 2;\r\n            this.x = Math.floor(this.x);\r\n        }\r\n        if (centerY) {\r\n            this.y += (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] - this.height) / 2;\r\n            this.y = Math.floor(this.y);\r\n        }\r\n    }\r\n    /**\r\n     * Moves the sprite off of this block\r\n     * Return values:\r\n     * true or undefined - collision handled\r\n     * false - collision was not handled, this is used by other blocks that replace this method\r\n     */\r\n    handleIntersect(sprite, velocity, horizontal) {\r\n        if (horizontal) {\r\n            if (velocity > 0) {\r\n                sprite.x = this.x - sprite.width;\r\n            }\r\n            else if (velocity < 0) {\r\n                sprite.x = this.x + this.width;\r\n            }\r\n        }\r\n        else {\r\n            if (velocity > 0) {\r\n                sprite.y = this.y + this.height;\r\n            }\r\n            else if (velocity < 0) {\r\n                sprite.y = this.y - sprite.height;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    destroy() {\r\n        super.destroy();\r\n        this._removeFromList(this.runtime.blocks);\r\n        if (this.levelIndex > -1) {\r\n            this.runtime.ordereredBlocks[this.levelIndex] = undefined;\r\n        }\r\n    }\r\n    get needsReinstantiate() {\r\n        return false;\r\n    }\r\n    get type() {\r\n        console.warn(\"unimplemented getType()?\");\r\n        return Block;\r\n    }\r\n}\r\n// Block with solid = true by default\r\n// Note that just because solid = true does not actually mean it is solid, just likely that it is solid\r\n// Some blocks extend this then in handleIntersect have special behavior\r\nclass SolidBlock extends Block {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.solid = true;\r\n    }\r\n}\r\n// Block with solid = true and staic = true by default\r\n// Setting static = true can greatly improve performance by not rendering things more than they need to be\r\nclass StaticSolidBlock extends SolidBlock {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.static = true;\r\n    }\r\n}\r\n// Block that is solid but doesn't handle intersecting\r\n// Used for blocks that shouldn't be solid but needed for player.reset() to work\r\nclass PseudoSolidBlock extends StaticSolidBlock {\r\n    handleIntersect() {\r\n        return false;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/block.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/blockswitchspawner.ts":
/*!*******************************************************!*\
  !*** ./src/game/sprites/blocks/blockswitchspawner.ts ***!
  \*******************************************************/
/*! exports provided: BlockSwitchSpawnerBlock, RedGreenBlockSwitchSpawner, AquaOrangeBlockSwitchSpawner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlockSwitchSpawnerBlock\", function() { return BlockSwitchSpawnerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenBlockSwitchSpawner\", function() { return RedGreenBlockSwitchSpawner; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AquaOrangeBlockSwitchSpawner\", function() { return AquaOrangeBlockSwitchSpawner; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _blockswitch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blockswitch */ \"./src/game/sprites/blockswitch.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _falling__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./falling */ \"./src/game/sprites/blocks/falling.ts\");\n\r\n\r\n\r\n\r\n\r\n// Block that spawns a switch\r\nclass BlockSwitchSpawnerBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\r\n    constructor(opts, group, textureFolder) {\r\n        super(opts);\r\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\r\n        position.y -= _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\r\n        new _blockswitch__WEBPACK_IMPORTED_MODULE_2__[\"BlockSwitch\"]({\r\n            texture: this.runtime.getImage(\"blocks/button/redgreen/button\"),\r\n            position,\r\n            spawner: this,\r\n            group,\r\n            textureFolder,\r\n        });\r\n    }\r\n}\r\nclass RedGreenBlockSwitchSpawner extends BlockSwitchSpawnerBlock {\r\n    constructor(opts) {\r\n        super(opts, _falling__WEBPACK_IMPORTED_MODULE_4__[\"FallingBlockGroups\"].RedGreen, \"redgreen\");\r\n    }\r\n}\r\nclass AquaOrangeBlockSwitchSpawner extends BlockSwitchSpawnerBlock {\r\n    constructor(opts) {\r\n        super(opts, _falling__WEBPACK_IMPORTED_MODULE_4__[\"FallingBlockGroups\"].AquaOrange, \"aquaorange\");\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/blockswitchspawner.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/coinspawner.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/blocks/coinspawner.ts ***!
  \************************************************/
/*! exports provided: AboveLevelUpCoinSpawnerBlock, BelowLevelUpCoinSpawnerBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AboveLevelUpCoinSpawnerBlock\", function() { return AboveLevelUpCoinSpawnerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BelowLevelUpCoinSpawnerBlock\", function() { return BelowLevelUpCoinSpawnerBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _coin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../coin */ \"./src/game/sprites/coin.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n\r\n\r\n/*\r\n * Spawns the level up coin\r\n * The level up coin itself is not part of the level code,\r\n * only the spawner.\r\n *\r\n * Different types becasue that's how the level codes are. (and I really don't want to touch those)\r\n */\r\nclass LevelUpCoinSpawnerBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.static = true;\r\n        const position = this.getCoinPosition();\r\n        new _coin__WEBPACK_IMPORTED_MODULE_2__[\"LevelUpCoinSprite\"]({\r\n            position,\r\n            texture: this.runtime.getImage(\"coin/1\"),\r\n        });\r\n    }\r\n}\r\n// Spawns the coin above the block\r\nclass AboveLevelUpCoinSpawnerBlock extends LevelUpCoinSpawnerBlock {\r\n    getCoinPosition() {\r\n        return new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.x, this.y - _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\r\n    }\r\n}\r\n// Spawns the coin below the block\r\nclass BelowLevelUpCoinSpawnerBlock extends LevelUpCoinSpawnerBlock {\r\n    getCoinPosition() {\r\n        return new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.x, this.y + _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/coinspawner.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/corner.ts":
/*!*******************************************!*\
  !*** ./src/game/sprites/blocks/corner.ts ***!
  \*******************************************/
/*! exports provided: RotatedCornerBlock, CastleCornerBlock, SolidRotatedCornerBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RotatedCornerBlock\", function() { return RotatedCornerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CastleCornerBlock\", function() { return CastleCornerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SolidRotatedCornerBlock\", function() { return SolidRotatedCornerBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n\r\n\r\n/*\r\n * A block that is in the corner\r\n */\r\nconst AIR = [\r\n    \".\",\r\n    \"l\", \"k\", \"j\",\r\n    \"p\", \"q\",\r\n    \"%\", \"#\", \"$\", \"o\",\r\n];\r\nclass CornerBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"Block\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.levelIndex = opts.levelIndex || 0;\r\n        // queue deletion after other stuff runs\r\n        this.destroy();\r\n    }\r\n    /**\r\n     * If the block that is X distance from this one is air,\r\n     * then create a new sprite with the texture, rotation, x offset, and y offset as provided\r\n     */\r\n    testCorner(offset, texture, rotation, x, y) {\r\n        const charAtOffset = this.runtime.levelData[this.levelIndex + offset];\r\n        const isAir = AIR.indexOf(charAtOffset) > -1;\r\n        if (isAir) {\r\n            const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.x + x * (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] / 2), this.y + y * (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] / 2));\r\n            // these should be static, but that seems to cause problems that i don't want to debug\r\n            const sprite = new _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"]({\r\n                position,\r\n                texture,\r\n                rotation,\r\n                static: true,\r\n            });\r\n        }\r\n    }\r\n}\r\n// A normal corner block that spawns rotations of itself\r\n// Used in all zones but castle\r\nclass RotatedCornerBlock extends CornerBlock {\r\n    constructor(opts) {\r\n        super(opts);\r\n        // black background\r\n        new _block__WEBPACK_IMPORTED_MODULE_3__[\"Block\"]({\r\n            texture: this.runtime.getImage(\"blocks/a\"),\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.x, this.y, -1),\r\n            static: true,\r\n        });\r\n        const offset = this.width === _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] ? 0 : 1;\r\n        // if spawned on far left edge then don't check for things that will wrap around to other side of screen\r\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== 0) {\r\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.texture, -90, 0, 0);\r\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.texture, 180, 0, offset);\r\n        }\r\n        // if spawned on far right edge then don't check for things that will wrap around to other side of screen\r\n        // untested but should work\r\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1) {\r\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.texture, 0, offset, 0);\r\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.texture, 90, offset, offset);\r\n        }\r\n    }\r\n}\r\n// The corner blocks in the castle are special\r\n// I believe this block actually only shows up like once in the whole game\r\nclass CastleCornerBlock extends CornerBlock {\r\n    constructor(opts) {\r\n        super(opts);\r\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== 0) {\r\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.runtime.getImage(\"blocks/castlecorner/topleft\"), 0, 0, 0);\r\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.runtime.getImage(\"blocks/castlecorner/bottomleft\"), 0, 0, 0);\r\n        }\r\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1) {\r\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.runtime.getImage(\"blocks/castlecorner/topright\"), 0, 0, 0);\r\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.runtime.getImage(\"blocks/castlecorner/bottomright\"), 0, 0, 0);\r\n        }\r\n    }\r\n}\r\n// I fix an OOB glitch in ONE level in the game!\r\n// So useful!\r\nclass SolidRotatedCornerBlock extends RotatedCornerBlock {\r\n    constructor(options) {\r\n        super(options);\r\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.position);\r\n        position.z = this.z - 1;\r\n        new _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"]({\r\n            texture: this.runtime.getImage(\"blocks/c\"),\r\n            position,\r\n            static: true,\r\n            levelIndex: this.levelIndex,\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/corner.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/crumble.ts":
/*!********************************************!*\
  !*** ./src/game/sprites/blocks/crumble.ts ***!
  \********************************************/
/*! exports provided: CrumblingBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CrumblingBlock\", function() { return CrumblingBlock; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _player_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n\r\n\r\n/*\r\n * A block that crumbles beneath you as you stand on it\r\n * Will reappear after a few seconds\r\n */\r\n// The amount of frames in the crumbling animation\r\nconst CRUMBLE_FRAMES = 9;\r\n// The length of each frame in the crumbling animation\r\nconst CRUMBLE_FRAME_LENGTH = 5;\r\n// How long before the block will reappear\r\nconst CRUMBLE_RESPAWN = 60 * 3;\r\nclass CrumblingBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.crumbling = false;\r\n        this.crumbleProgress = 1;\r\n        this.yv = 0;\r\n        this.xv = 0;\r\n        this.startingX = this.x;\r\n        this.startingY = this.y;\r\n    }\r\n    handleIntersect(sprite, velocity, horizontal) {\r\n        super.handleIntersect(sprite, velocity, horizontal);\r\n        if (!this.crumbling && !horizontal && velocity < 0 && sprite instanceof _player_player__WEBPACK_IMPORTED_MODULE_2__[\"PlayerSprite\"]) {\r\n            this.crumbling = true;\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n                run: (task) => this.crumble(task),\r\n                repeatEvery: CRUMBLE_FRAME_LENGTH,\r\n            }));\r\n        }\r\n    }\r\n    updateVisual() {\r\n        this.texture = this.runtime.getImage(`blocks/crumble/${this.crumbleProgress}`);\r\n        this.updateDimensions();\r\n    }\r\n    respawn() {\r\n        this.x = this.startingX;\r\n        this.y = this.startingY;\r\n        this.crumbling = false;\r\n        this.yv = 0;\r\n        this.crumbleProgress = 1;\r\n        this.solid = true;\r\n        this.updateVisual();\r\n    }\r\n    crumble(task) {\r\n        this.crumbleProgress++;\r\n        this.updateVisual();\r\n        this.runtime.playSound(\"blocks/break\", true);\r\n        if (this.crumbleProgress === CRUMBLE_FRAMES) {\r\n            task.stop();\r\n            this.solid = false;\r\n            this.runtime.playSound(\"blocks/fall\");\r\n            this.addTask((task2) => this.fall(task2));\r\n        }\r\n    }\r\n    fall(task) {\r\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_1__[\"runPhysics\"])(this, {\r\n            collision: false,\r\n        });\r\n        if (this.y >= this.runtime.canvas.height) {\r\n            task.stop();\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n                run: () => this.respawn(),\r\n                delay: CRUMBLE_RESPAWN,\r\n            }));\r\n        }\r\n    }\r\n    get needsReinstantiate() {\r\n        return true;\r\n    }\r\n    get type() {\r\n        return CrumblingBlock;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/crumble.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/falling.ts":
/*!********************************************!*\
  !*** ./src/game/sprites/blocks/falling.ts ***!
  \********************************************/
/*! exports provided: FallingBlockGroups, AbstractFallingBlock, InstantFallingBlock, VibratingFallingBlock, RedGreenInstantFallingBlock, RedGreenVibratingFallingBlock, AquaOrangeInstantFallingBlock, AquaOrangeVibratingFallingBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FallingBlockGroups\", function() { return FallingBlockGroups; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractFallingBlock\", function() { return AbstractFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InstantFallingBlock\", function() { return InstantFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VibratingFallingBlock\", function() { return VibratingFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenInstantFallingBlock\", function() { return RedGreenInstantFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenVibratingFallingBlock\", function() { return RedGreenVibratingFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AquaOrangeInstantFallingBlock\", function() { return AquaOrangeInstantFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AquaOrangeVibratingFallingBlock\", function() { return AquaOrangeVibratingFallingBlock; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n\r\n\r\n/*\r\n * A block that falls when you hit the switch.\r\n *\r\n * Will vibrate for a bit before disappearing.\r\n */\r\n// Time between each vibration before falling\r\nconst VIBRATE_EVERY = 3;\r\n// The distance to move when vibrating\r\nconst VIBRATE_RANGE = 2;\r\n// How many times to vibrate\r\nconst VIBRATE_TIMES = 20;\r\n// Delay before block will fall after vibrating\r\n// Makes blocks from the bottom fall before the ones on the top, which looks nice\r\nconst FALL_DELAY_PER_Y = 0.25;\r\nvar FallingBlockGroups;\r\n(function (FallingBlockGroups) {\r\n    FallingBlockGroups[FallingBlockGroups[\"RedGreen\"] = 0] = \"RedGreen\";\r\n    FallingBlockGroups[FallingBlockGroups[\"AquaOrange\"] = 1] = \"AquaOrange\";\r\n})(FallingBlockGroups || (FallingBlockGroups = {}));\r\nclass AbstractFallingBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\r\n    constructor(opts, group) {\r\n        super(opts);\r\n        this.xv = 0;\r\n        this.yv = 0;\r\n        this.group = group;\r\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\r\n    }\r\n    playSound() {\r\n        this.runtime.playSound(\"blocks/smash\");\r\n    }\r\n    fall(task) {\r\n        this.solid = false;\r\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_2__[\"runPhysics\"])(this, {\r\n            collision: false,\r\n        });\r\n        if (this.y >= this.runtime.canvas.height) {\r\n            task.stop();\r\n        }\r\n    }\r\n    get needsReinstantiate() {\r\n        return true;\r\n    }\r\n}\r\nclass InstantFallingBlock extends AbstractFallingBlock {\r\n    trigger() {\r\n        this.playSound();\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: (task) => this.fall(task),\r\n            repeatEvery: 0,\r\n        }));\r\n    }\r\n}\r\nclass VibratingFallingBlock extends InstantFallingBlock {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.vibrateProgress = 0;\r\n        this.frame = 0;\r\n    }\r\n    get needsReinstantiate() {\r\n        return true;\r\n    }\r\n    trigger() {\r\n        this.x -= VIBRATE_RANGE / 2;\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: (task) => this.vibrate(task),\r\n            repeatEvery: 3,\r\n        }));\r\n    }\r\n    vibrate(task) {\r\n        this.vibrateProgress++;\r\n        if (this.vibrateProgress === VIBRATE_TIMES) {\r\n            const fromBottom = this.runtime.canvas.height - this.y;\r\n            task.stop();\r\n            this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.startingPosition);\r\n            const delay = fromBottom * FALL_DELAY_PER_Y;\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n                run: (task2) => this.fall(task2),\r\n                delay,\r\n                repeatEvery: 0,\r\n            }));\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n                run: () => this.playSound(),\r\n                delay,\r\n            }));\r\n        }\r\n        else if (this.vibrateProgress % 2 === 0) {\r\n            this.x -= VIBRATE_RANGE;\r\n        }\r\n        else {\r\n            this.x += VIBRATE_RANGE;\r\n        }\r\n    }\r\n}\r\nclass RedGreenInstantFallingBlock extends InstantFallingBlock {\r\n    constructor(opts) {\r\n        super(opts, FallingBlockGroups.RedGreen);\r\n    }\r\n    get type() { return RedGreenInstantFallingBlock; }\r\n}\r\nclass RedGreenVibratingFallingBlock extends VibratingFallingBlock {\r\n    constructor(opts) {\r\n        super(opts, FallingBlockGroups.RedGreen);\r\n    }\r\n    get type() { return RedGreenVibratingFallingBlock; }\r\n}\r\nclass AquaOrangeInstantFallingBlock extends InstantFallingBlock {\r\n    constructor(opts) {\r\n        super(opts, FallingBlockGroups.AquaOrange);\r\n    }\r\n    get type() { return AquaOrangeInstantFallingBlock; }\r\n}\r\nclass AquaOrangeVibratingFallingBlock extends VibratingFallingBlock {\r\n    constructor(opts) {\r\n        super(opts, FallingBlockGroups.AquaOrange);\r\n    }\r\n    get type() { return AquaOrangeVibratingFallingBlock; }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/falling.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/grass.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/grass.ts ***!
  \******************************************/
/*! exports provided: GrassBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GrassBlock\", function() { return GrassBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _zindex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../zindex */ \"./src/game/sprites/zindex.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n\r\n/*\r\n * It's a grass block.\r\n *\r\n * It is spawned on top of the regular blocks and moves itself down onto the block below.\r\n */\r\nclass GrassBlock extends _block__WEBPACK_IMPORTED_MODULE_2__[\"Block\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.static = true;\r\n        this.z = _zindex__WEBPACK_IMPORTED_MODULE_1__[\"ZIndexes\"].Grass;\r\n        // Move ourselves down\r\n        this.y += _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/grass.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/lightblock.ts":
/*!***********************************************!*\
  !*** ./src/game/sprites/blocks/lightblock.ts ***!
  \***********************************************/
/*! exports provided: LightBlockGroups, LightBlock, AbstractEnabledLightBlock, AbstractDisabledLightBlock, EnabledLightBlock1, DisabledLightBlock1, EnabledLightBlock2, DisabledLightBlock2, EnabledLightBlock3, DisabledLightBlock3, EnabledLightBlock4, DisabledLightBlock4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightBlockGroups\", function() { return LightBlockGroups; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightBlock\", function() { return LightBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractEnabledLightBlock\", function() { return AbstractEnabledLightBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractDisabledLightBlock\", function() { return AbstractDisabledLightBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock1\", function() { return EnabledLightBlock1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock1\", function() { return DisabledLightBlock1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock2\", function() { return EnabledLightBlock2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock2\", function() { return DisabledLightBlock2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock3\", function() { return EnabledLightBlock3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock3\", function() { return DisabledLightBlock3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock4\", function() { return EnabledLightBlock4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock4\", function() { return DisabledLightBlock4; });\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n/*\r\n * A block that is toggled solid/not solid when a switch is hit.\r\n */\r\nvar LightBlockGroups;\r\n(function (LightBlockGroups) {\r\n    LightBlockGroups[LightBlockGroups[\"RedGreen\"] = 0] = \"RedGreen\";\r\n})(LightBlockGroups || (LightBlockGroups = {}));\r\nclass LightBlock extends _block__WEBPACK_IMPORTED_MODULE_0__[\"Block\"] {\r\n    constructor(options, group, lit, dark = \"blocks/y\") {\r\n        super(options);\r\n        this.solid = true;\r\n        this.group = 0;\r\n        this.litTexture = lit;\r\n        this.darkTexture = dark;\r\n        this.group = group;\r\n    }\r\n    setSolid(solid) {\r\n        this.solid = solid;\r\n        if (this.solid) {\r\n            this.texture = this.runtime.getImage(this.litTexture);\r\n        }\r\n        else {\r\n            this.texture = this.runtime.getImage(this.darkTexture);\r\n        }\r\n    }\r\n    get needsReinstantiate() {\r\n        return true;\r\n    }\r\n    toggleSolid() {\r\n        this.setSolid(!this.solid);\r\n    }\r\n}\r\nclass AbstractEnabledLightBlock extends LightBlock {\r\n    constructor(options, group, lit, dark) {\r\n        super(options, group, lit, dark);\r\n        this.setSolid(true);\r\n    }\r\n}\r\nclass AbstractDisabledLightBlock extends LightBlock {\r\n    constructor(options, group, lit, dark) {\r\n        super(options, group, lit, dark);\r\n        this.setSolid(false);\r\n    }\r\n}\r\nclass EnabledLightBlock1 extends AbstractEnabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/z\");\r\n    }\r\n    get type() { return EnabledLightBlock1; }\r\n}\r\nclass DisabledLightBlock1 extends AbstractDisabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/z\");\r\n    }\r\n    get type() { return DisabledLightBlock1; }\r\n}\r\nclass EnabledLightBlock2 extends AbstractEnabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalz\");\r\n    }\r\n    get type() { return EnabledLightBlock2; }\r\n}\r\nclass DisabledLightBlock2 extends AbstractDisabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalz\");\r\n    }\r\n    get type() { return DisabledLightBlock2; }\r\n}\r\nclass EnabledLightBlock3 extends AbstractEnabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalp\");\r\n    }\r\n    get type() { return EnabledLightBlock3; }\r\n}\r\nclass DisabledLightBlock3 extends AbstractDisabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalp\");\r\n    }\r\n    get type() { return DisabledLightBlock3; }\r\n}\r\nclass EnabledLightBlock4 extends AbstractEnabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalq\");\r\n    }\r\n    get type() { return EnabledLightBlock4; }\r\n}\r\nclass DisabledLightBlock4 extends AbstractDisabledLightBlock {\r\n    constructor(opts) {\r\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalq\");\r\n    }\r\n    get type() { return DisabledLightBlock4; }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/lightblock.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/lightswitch.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/blocks/lightswitch.ts ***!
  \************************************************/
/*! exports provided: LightSwitchBlock, RedGreenLightSwitchBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightSwitchBlock\", function() { return LightSwitchBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenLightSwitchBlock\", function() { return RedGreenLightSwitchBlock; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _player_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _lightblock__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lightblock */ \"./src/game/sprites/blocks/lightblock.ts\");\n\r\n\r\n\r\n\r\n\r\n/*\r\n * A block that toggles the solidity of LightBlocks\r\n */\r\n// Frames to be played in the animation\r\nconst ANIMATION_FRAMES = [\r\n    \"blocks/lightbutton/1\",\r\n    \"blocks/lightbutton/2\",\r\n];\r\n// The length of each animation frame\r\nconst ANIMATION_FRAME_LENGTH = 5;\r\n// How long the switch will remaing as pressed before hiding\r\nconst HIDE_DELAY = 30;\r\nclass LightSwitchBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\r\n    constructor(opts, group) {\r\n        super(opts);\r\n        this.activated = false;\r\n        this.animationProgress = 0;\r\n        this.group = group;\r\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\r\n        this.show();\r\n    }\r\n    get needsReinstantiate() {\r\n        return true;\r\n    }\r\n    show() {\r\n        // reset variables\r\n        this.animationProgress = 0;\r\n        this.activated = false;\r\n        // reset texture and position\r\n        this.texture = this.runtime.getImage(ANIMATION_FRAMES[0]);\r\n        this.updateDimensions();\r\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.startingPosition);\r\n        this.visible = true;\r\n        // start animating\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: (task) => this.animate(task),\r\n            repeatEvery: ANIMATION_FRAME_LENGTH,\r\n        }));\r\n    }\r\n    animate(task) {\r\n        if (this.activated) {\r\n            task.stop();\r\n            return;\r\n        }\r\n        this.animationProgress++;\r\n        if (this.animationProgress === ANIMATION_FRAMES.length) {\r\n            this.animationProgress = 0;\r\n        }\r\n        this.texture = this.runtime.getImage(ANIMATION_FRAMES[this.animationProgress]);\r\n    }\r\n    activate() {\r\n        this.activated = true;\r\n        const sprites = this.runtime.sprites;\r\n        const lightBlocks = sprites\r\n            .filter((s) => s instanceof _lightblock__WEBPACK_IMPORTED_MODULE_4__[\"LightBlock\"])\r\n            .filter((s) => s.group === this.group);\r\n        for (const block of lightBlocks) {\r\n            block.toggleSolid();\r\n        }\r\n        const otherSwitches = sprites\r\n            .filter((s) => s instanceof LightSwitchBlock && s !== this)\r\n            .filter((s) => s.group === this.group);\r\n        for (const block of otherSwitches) {\r\n            if (block.activated) {\r\n                block.show();\r\n            }\r\n        }\r\n        this.texture = this.runtime.getImage(\"blocks/lightbutton/down\");\r\n        this.updateDimensions();\r\n        this.floorAlign();\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.hide(),\r\n            delay: HIDE_DELAY,\r\n        }));\r\n        this.runtime.playSound(\"blocks/fds\");\r\n    }\r\n    hide() {\r\n        this.visible = false;\r\n    }\r\n    handleIntersect(sprite, velocity, horizontal) {\r\n        const res = super.handleIntersect(sprite, velocity, horizontal);\r\n        if (!this.activated && sprite.y + sprite.height === this.y && sprite instanceof _player_player__WEBPACK_IMPORTED_MODULE_2__[\"PlayerSprite\"]) {\r\n            this.activate();\r\n            return false;\r\n        }\r\n        return res;\r\n    }\r\n}\r\nclass RedGreenLightSwitchBlock extends LightSwitchBlock {\r\n    constructor(opts) {\r\n        super(opts, _lightblock__WEBPACK_IMPORTED_MODULE_4__[\"LightBlockGroups\"].RedGreen);\r\n    }\r\n    get type() { return RedGreenLightSwitchBlock; }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/lightswitch.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/oneway.ts":
/*!*******************************************!*\
  !*** ./src/game/sprites/blocks/oneway.ts ***!
  \*******************************************/
/*! exports provided: OneWayBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OneWayBlock\", function() { return OneWayBlock; });\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n/*\r\n * A block that allows things to go up but not down.\r\n */\r\nclass OneWayBlock extends _block__WEBPACK_IMPORTED_MODULE_0__[\"SolidBlock\"] {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.static = true;\r\n        this.intersectsPlayer = false;\r\n    }\r\n    handleIntersect(sprite, velocity, horizontal) {\r\n        // Horizontally these have no collision\r\n        if (horizontal) {\r\n            return false;\r\n        }\r\n        else {\r\n            const previousY = sprite.y + velocity;\r\n            // If below then not solid\r\n            // Otherwise use normal behavior when above\r\n            if (previousY + sprite.height > this.y) {\r\n                return false;\r\n            }\r\n            else {\r\n                return super.handleIntersect(sprite, velocity, horizontal);\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/oneway.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/spike.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/spike.ts ***!
  \******************************************/
/*! exports provided: UpSpikeBlock, DownSpikeBlock, LeftSpikeBlock, RightSpikeBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UpSpikeBlock\", function() { return UpSpikeBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DownSpikeBlock\", function() { return DownSpikeBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LeftSpikeBlock\", function() { return LeftSpikeBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RightSpikeBlock\", function() { return RightSpikeBlock; });\n/* harmony import */ var _player_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n/*\r\n * It's a spike. It kills the player.\r\n */\r\n// Spikes share pretty much all of their code\r\n// So an abstract class is made and extended\r\nclass SpikeBlock extends _block__WEBPACK_IMPORTED_MODULE_1__[\"SolidBlock\"] {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.static = true;\r\n        this.intersectingDeferred = true;\r\n    }\r\n    handleIntersect(sprite, velocity, horizontal) {\r\n        super.handleIntersect(sprite, velocity, horizontal);\r\n        if (this.canKill(sprite) && sprite instanceof _player_player__WEBPACK_IMPORTED_MODULE_0__[\"PlayerSprite\"]) {\r\n            sprite.kill();\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\nclass UpSpikeBlock extends SpikeBlock {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.floorAlign();\r\n    }\r\n    canKill(sprite) {\r\n        return sprite.y + sprite.height === this.y;\r\n    }\r\n}\r\nclass DownSpikeBlock extends SpikeBlock {\r\n    // Already aligned due to spawning\r\n    canKill(sprite) {\r\n        return sprite.y === this.y + this.height;\r\n    }\r\n}\r\nclass LeftSpikeBlock extends SpikeBlock {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.leftAlign();\r\n    }\r\n    canKill(sprite) {\r\n        return sprite.x + sprite.width === this.x;\r\n    }\r\n}\r\nclass RightSpikeBlock extends SpikeBlock {\r\n    // Already aligned due to spawning\r\n    canKill(sprite) {\r\n        return sprite.x === this.x + this.width;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/spike.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/tallgrass.ts":
/*!**********************************************!*\
  !*** ./src/game/sprites/blocks/tallgrass.ts ***!
  \**********************************************/
/*! exports provided: TallGrassBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TallGrassBlock\", function() { return TallGrassBlock; });\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _grass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./grass */ \"./src/game/sprites/blocks/grass.ts\");\n\r\n\r\n\r\n/*\r\n * It's a tall grass block.\r\n *\r\n * It is spawned like normal grass blocks but also shows a taller grass on top of the block\r\n * It creates a normal grass to go below it\r\n */\r\nclass TallGrassBlock extends _block__WEBPACK_IMPORTED_MODULE_1__[\"Block\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.static = true;\r\n        new _grass__WEBPACK_IMPORTED_MODULE_2__[\"GrassBlock\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](this.position),\r\n            texture: this.runtime.getImage(\"blocks/k\"),\r\n        });\r\n        this.floorAlign();\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/tallgrass.ts?");

/***/ }),

/***/ "./src/game/sprites/blockswitch.ts":
/*!*****************************************!*\
  !*** ./src/game/sprites/blockswitch.ts ***!
  \*****************************************/
/*! exports provided: BlockSwitch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlockSwitch\", function() { return BlockSwitch; });\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _blocks_falling__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blocks/falling */ \"./src/game/sprites/blocks/falling.ts\");\n\r\n\r\n\r\nclass BlockSwitch extends _blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"Block\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.triggered = false;\r\n        this.group = opts.group;\r\n        this.textureFolder = opts.textureFolder;\r\n        this.spawner = opts.spawner;\r\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](this.position);\r\n        this.floorAlign();\r\n        this.addTask(() => this.run());\r\n        this.spawner.texture = this.getImage(\"spawner\");\r\n        this.texture = this.getImage(\"button\");\r\n    }\r\n    getImage(str) {\r\n        return this.runtime.getImage(`blocks/button/${this.textureFolder}/${str}`);\r\n    }\r\n    get needsReinstantiate() {\r\n        return true;\r\n    }\r\n    get type() {\r\n        return BlockSwitch;\r\n    }\r\n    trigger() {\r\n        const allSprites = this.runtime.sprites;\r\n        const fallingBlocks = allSprites\r\n            .filter((sprite) => sprite instanceof _blocks_falling__WEBPACK_IMPORTED_MODULE_2__[\"AbstractFallingBlock\"])\r\n            .filter((sprite) => sprite.group === this.group);\r\n        for (const sprite of fallingBlocks) {\r\n            sprite.trigger();\r\n        }\r\n        this.spawner.texture = this.getImage(\"spawner2\");\r\n        this.texture = this.getImage(\"button2\");\r\n        this.updateDimensions();\r\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](this.startingPosition);\r\n        this.floorAlign();\r\n        this.triggered = true;\r\n        this.runtime.playSound(\"blocks/button\");\r\n    }\r\n    run() {\r\n        if (!this.triggered && this.intersects(this.runtime.player)) {\r\n            this.trigger();\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/blockswitch.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/boss.ts":
/*!*****************************************!*\
  !*** ./src/game/sprites/bosses/boss.ts ***!
  \*****************************************/
/*! exports provided: AbstractBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractBoss\", function() { return AbstractBoss; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _coin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../coin */ \"./src/game/sprites/coin.ts\");\n/* harmony import */ var _hiteffect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hiteffect */ \"./src/game/sprites/bosses/hiteffect.ts\");\n\r\n\r\n\r\n\r\nconst PLAYER_JUMP_YV = 3;\r\nclass AbstractBoss extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.phaseDelay = 0;\r\n    }\r\n    // call super.startRoutine() in implementations!!!\r\n    startRoutine() {\r\n        this.phaseDelay = 0;\r\n    }\r\n    addPhase(task, afterDelay = 0) {\r\n        task.delay += this.phaseDelay;\r\n        if (task.repeatEvery > -1) {\r\n            this.phaseDelay += task.repeatMax * (task.repeatEvery + 1);\r\n        }\r\n        this.phaseDelay += (task.originalOptions.delay) || 0;\r\n        this.phaseDelay += afterDelay;\r\n        this.addTask(task);\r\n    }\r\n    playerJumpedOn() {\r\n        return this.intersects(this.runtime.player) && this.runtime.player.yv < -1;\r\n    }\r\n    bouncePlayer() {\r\n        this.runtime.playSound(\"boss/ouch\");\r\n        this.runtime.player.yv = PLAYER_JUMP_YV;\r\n    }\r\n    spawnLevelUpCoin(position) {\r\n        const texture = this.runtime.getImage(\"coin/1\");\r\n        new _coin__WEBPACK_IMPORTED_MODULE_2__[\"LevelUpCoinSprite\"]({\r\n            texture,\r\n            position,\r\n        });\r\n    }\r\n    spawnHitEffect(type) {\r\n        const texture = this.runtime.getImage(`hit/${type}`);\r\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.centerX, this.y);\r\n        position.y -= texture.height;\r\n        position.x -= texture.width / 2;\r\n        new _hiteffect__WEBPACK_IMPORTED_MODULE_3__[\"HitEffectSprite\"]({\r\n            texture, position,\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/boss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/final/finalboss.ts":
/*!****************************************************!*\
  !*** ./src/game/sprites/bosses/final/finalboss.ts ***!
  \****************************************************/
/*! exports provided: FinalBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FinalBoss\", function() { return FinalBoss; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _zindex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../zindex */ \"./src/game/sprites/zindex.ts\");\n/* harmony import */ var _noss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../noss */ \"./src/game/sprites/bosses/noss.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst HEALTH = 3;\r\n// seen in scratch as \"Attack2\"\r\nconst SLIDE_ATTACK_SPEED = 8;\r\n// todo: can't figure out how to get the canvas width from outside a sprite\r\n// so just hard coding a value for now\r\nconst SLIDE_ATTACK_REPEAT = Math.ceil(480 / SLIDE_ATTACK_SPEED);\r\nconst SLIDE_ATTACK_SIZE_CHANGE = 0.2 / 2;\r\nconst SLIDE_ATTACK_MIN = 5;\r\nconst SLIDE_ATTACK_MAX = 7;\r\n// any size changes during thet slide attack are replaced with this for consistency\r\nconst DROP_ATTACK_SCALE = 3;\r\nconst DROP_ATTACK_GRAVITY = 14;\r\nconst DROP_ATTACK_FALL_LENGTH = 23;\r\nconst DROP_ATTACK_END = 264;\r\nconst DROP_ATTACK_REPEAT = 4; // +1 for the last one where the boss becomes vulnerable\r\nconst REST_TEXTURE = \"boss/noss/rest\";\r\nclass FinalBoss extends _noss__WEBPACK_IMPORTED_MODULE_5__[\"AbstractNossBoss\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.canKillPlayer = false;\r\n        this.health = HEALTH;\r\n        this.wasHit = false;\r\n        this.animationProgress = 0;\r\n        this.sizeScale = 1;\r\n        this.z = _zindex__WEBPACK_IMPORTED_MODULE_4__[\"ZIndexes\"].FinalBoss;\r\n        this.visible = false;\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.startRoutine(),\r\n            delay: 60,\r\n        }));\r\n        this.addTask(() => this.testForPlayer());\r\n    }\r\n    testForPlayer() {\r\n        if (this.canKillPlayer && this.intersects(this.runtime.player)) {\r\n            this.runtime.player.kill();\r\n        }\r\n    }\r\n    startRoutine() {\r\n        super.startRoutine();\r\n        this.canKillPlayer = true;\r\n        this.wasHit = false;\r\n        this.setScale(1, false);\r\n        this.visible = false;\r\n        const repeatSlideAttack = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(SLIDE_ATTACK_MIN, SLIDE_ATTACK_MAX);\r\n        for (let i = 0; i < repeatSlideAttack; i++) {\r\n            const addSpinAttack = (direction) => {\r\n                this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                    run: () => this.prepareSlideAttack(direction),\r\n                }), Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(0, 60));\r\n                this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                    run: () => this.slideAttack(direction),\r\n                    repeatEvery: 0,\r\n                    repeatMax: SLIDE_ATTACK_REPEAT,\r\n                }));\r\n            };\r\n            addSpinAttack(1);\r\n            addSpinAttack(-1);\r\n        }\r\n        const addDropAttack = (endDelay = true) => {\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.prepareDropAttack(),\r\n            }));\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.dropAttack(),\r\n                repeatEvery: 0,\r\n                repeatMax: DROP_ATTACK_FALL_LENGTH,\r\n            }), endDelay ? 33 : 0); // 33: 0.05 sec + 30 frames (repeat 15)\r\n        };\r\n        for (let i = 0; i < DROP_ATTACK_REPEAT; i++) {\r\n            addDropAttack();\r\n        }\r\n        addDropAttack(false);\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: (task) => this.vulnerableAfterDropAttack(task),\r\n            repeatEvery: 0,\r\n            repeatMax: 120,\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.endRoutine(this.wasHit),\r\n        }));\r\n    }\r\n    endRoutine(wasHit = false) {\r\n        if (wasHit) {\r\n            return;\r\n        }\r\n        this.poof();\r\n        this.visible = false;\r\n        this.texture = this.runtime.getImage(_noss__WEBPACK_IMPORTED_MODULE_5__[\"BASE_TEXTURE\"]);\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.startRoutine(),\r\n            delay: 120,\r\n        }));\r\n    }\r\n    prepareSlideAttack(direction) {\r\n        this.runtime.playSound(\"boss/noss/shadow3\");\r\n        this.visible = false;\r\n        this.setScale((Math.abs(this.sizeScale) + SLIDE_ATTACK_SIZE_CHANGE) * direction);\r\n        if (direction === 1) {\r\n            this.x = 0;\r\n        }\r\n        else if (direction === -1) {\r\n            this.x = this.runtime.canvas.width;\r\n        }\r\n        this.y = this.runtime.player.y - ((this.width - this.runtime.player.width) / 2);\r\n    }\r\n    slideAttack(direction) {\r\n        this.visible = true;\r\n        this.canKillPlayer = true;\r\n        this.x += SLIDE_ATTACK_SPEED * direction;\r\n    }\r\n    prepareDropAttack() {\r\n        this.visible = true;\r\n        this.runtime.playSound(\"boss/noss/shadow2\");\r\n        this.setScale(DROP_ATTACK_SCALE);\r\n        this.y = -this.height;\r\n        this.x = this.runtime.player.x - ((this.width - this.runtime.player.width) / 2);\r\n    }\r\n    dropAttack() {\r\n        this.y += DROP_ATTACK_GRAVITY;\r\n        if (this.y > DROP_ATTACK_END) {\r\n            this.y = DROP_ATTACK_END;\r\n        }\r\n    }\r\n    vulnerableAfterDropAttack(task) {\r\n        this.canKillPlayer = false;\r\n        this.texture = this.runtime.getImage(REST_TEXTURE);\r\n        if (this.playerJumpedOn()) {\r\n            this.bouncePlayer();\r\n            this.spawnHitEffect(\"-1\");\r\n            this.health--;\r\n            this.wasHit = true;\r\n            this.animationProgress = 0;\r\n            task.stop();\r\n            if (this.health === 0) {\r\n                this.playDeadAnimation();\r\n            }\r\n            else {\r\n                this.playHitAnimation();\r\n                this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                    run: () => this.endRoutine(),\r\n                    delay: _noss__WEBPACK_IMPORTED_MODULE_5__[\"HIT_ANIMATION_TOTAL_LENGTH\"],\r\n                }));\r\n            }\r\n        }\r\n    }\r\n    kill() {\r\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.x + _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"], this.y + _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\r\n        this.spawnLevelUpCoin(position);\r\n        this.destroy();\r\n    }\r\n    setScale(s, center = true) {\r\n        const oldScale = this.sizeScale;\r\n        const oldHeight = this.height;\r\n        const oldWidth = this.width;\r\n        const as = Math.abs(s);\r\n        this.sizeScale = as;\r\n        this.width = this.texture.width * as;\r\n        this.height = this.texture.height * as;\r\n        if (center) {\r\n            const widthChange = this.width - oldWidth;\r\n            this.x -= (widthChange / 2);\r\n            const heightChange = this.height - oldHeight;\r\n            this.y -= (heightChange / 2);\r\n        }\r\n        if (s < 0) {\r\n            this.scale.x = -1;\r\n        }\r\n        else {\r\n            this.scale.x = 1;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/final/finalboss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/hiteffect.ts":
/*!**********************************************!*\
  !*** ./src/game/sprites/bosses/hiteffect.ts ***!
  \**********************************************/
/*! exports provided: HitEffectSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HitEffectSprite\", function() { return HitEffectSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n\r\n\r\n/*\r\n * Health events for bosses\r\n *\r\n * +0, +1, -1\r\n */\r\nconst LIFESPAN = 60;\r\nconst OPACITY_PER_FRAME = 1 / LIFESPAN;\r\nconst SIZE_CHANGE = 0.025;\r\nconst Y_CHANGE = 0.5;\r\nclass HitEffectSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.lifespan = 0;\r\n        this.addTask(() => this.run());\r\n        this.startingHeight = this.height;\r\n        this.startingWidth = this.width;\r\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\r\n    }\r\n    run() {\r\n        this.lifespan++;\r\n        if (this.lifespan >= LIFESPAN) {\r\n            this.destroy();\r\n        }\r\n        this.opacity -= OPACITY_PER_FRAME;\r\n        // adjust the size accordingly\r\n        const mult = (1 + (this.lifespan * SIZE_CHANGE));\r\n        this.height = this.startingHeight * mult;\r\n        this.width = this.startingWidth * mult;\r\n        this.x = this.startingPosition.x - ((this.width - this.startingWidth) / 2);\r\n        this.y = this.startingPosition.y - ((this.height - this.startingHeight) / 2);\r\n        // this is terrible\r\n        this.startingPosition.y -= Y_CHANGE;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/hiteffect.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/noss.ts":
/*!*****************************************!*\
  !*** ./src/game/sprites/bosses/noss.ts ***!
  \*****************************************/
/*! exports provided: BASE_TEXTURE, HIT_ANIMATION_REPEAT, HIT_ANIMATION_REPEAT2, HIT_ANIMATION_TOTAL_LENGTH, HIT_ANIMATION_TOTAL_LENGTH2, AbstractNossBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BASE_TEXTURE\", function() { return BASE_TEXTURE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_REPEAT\", function() { return HIT_ANIMATION_REPEAT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_REPEAT2\", function() { return HIT_ANIMATION_REPEAT2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_TOTAL_LENGTH\", function() { return HIT_ANIMATION_TOTAL_LENGTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_TOTAL_LENGTH2\", function() { return HIT_ANIMATION_TOTAL_LENGTH2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractNossBoss\", function() { return AbstractNossBoss; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _boss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boss */ \"./src/game/sprites/bosses/boss.ts\");\n\r\n\r\n\r\nconst PARTICLE_LIFESPAN = 20;\r\nconst PARTICLE_STEP = 1;\r\nconst POOF_PARTICLE_COUNT = 8;\r\nconst POOF_PARTICLE_ANGLE = 360 / POOF_PARTICLE_COUNT;\r\nconst BASE_TEXTURE = \"boss/noss/noss\";\r\nconst HIT_ANIMATION_FRAMES = [\r\n    \"boss/noss/hit\",\r\n    BASE_TEXTURE,\r\n];\r\nconst HIT_ANIMATION_LENGTH = 2;\r\nconst HIT_ANIMATION_REPEAT = 12;\r\nconst HIT_ANIMATION_REPEAT2 = 35; // for dead\r\nconst HIT_ANIMATION_TOTAL_LENGTH = HIT_ANIMATION_LENGTH *\r\n    HIT_ANIMATION_REPEAT *\r\n    HIT_ANIMATION_FRAMES.length +\r\n    HIT_ANIMATION_LENGTH;\r\nconst HIT_ANIMATION_TOTAL_LENGTH2 = HIT_ANIMATION_LENGTH *\r\n    HIT_ANIMATION_REPEAT2 *\r\n    HIT_ANIMATION_FRAMES.length +\r\n    HIT_ANIMATION_LENGTH;\r\nclass NossBossDustSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.destroy(),\r\n            delay: PARTICLE_LIFESPAN,\r\n        }));\r\n        this.addTask(() => this.move());\r\n    }\r\n    move() {\r\n        this.moveForward(PARTICLE_STEP);\r\n    }\r\n}\r\nclass AbstractNossBoss extends _boss__WEBPACK_IMPORTED_MODULE_2__[\"AbstractBoss\"] {\r\n    poof() {\r\n        const position = this.centerPosition;\r\n        const texture = this.runtime.getImage(\"boss/noss/dust\");\r\n        position.x -= texture.width / 2;\r\n        position.y -= texture.height / 2;\r\n        for (let i = 0; i < POOF_PARTICLE_COUNT; i++) {\r\n            new NossBossDustSprite({\r\n                rotation: i * POOF_PARTICLE_ANGLE,\r\n                position,\r\n                texture,\r\n            });\r\n        }\r\n    }\r\n    playDeadAnimation() {\r\n        this.playHitAnimation(HIT_ANIMATION_REPEAT2);\r\n        this.runtime.playSound(\"boss/shadow5\");\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.kill(),\r\n            delay: HIT_ANIMATION_TOTAL_LENGTH2 + 60,\r\n        }));\r\n    }\r\n    kill() {\r\n        this.runtime.playSound(\"boss/noss/shadow1\");\r\n        this.poof();\r\n        this.spawnLevelUpCoin(this.position);\r\n        this.destroy();\r\n    }\r\n    playHitAnimation(repeat = HIT_ANIMATION_REPEAT) {\r\n        for (let i = 0; i < HIT_ANIMATION_FRAMES.length; i++) {\r\n            const frame = HIT_ANIMATION_FRAMES[i];\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.texture = this.runtime.getImage(frame),\r\n                repeatEvery: HIT_ANIMATION_LENGTH * 2,\r\n                delay: i * HIT_ANIMATION_LENGTH,\r\n                repeatMax: repeat,\r\n            }));\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/noss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/noss/bullet.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/bosses/noss/bullet.ts ***!
  \************************************************/
/*! exports provided: MOVE_TIME, NossBossBulletSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MOVE_TIME\", function() { return MOVE_TIME; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NossBossBulletSprite\", function() { return NossBossBulletSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils */ \"./src/utils.ts\");\n\r\n\r\n\r\n\r\n\r\nconst GLIDE_TIME = 30;\r\nconst SPEED_GAIN = 0.2;\r\nconst TURN_SPEED = 7.5;\r\nconst MOVE_TIME = 180;\r\nclass NossBossBulletSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.speed = 0;\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.glideToCenter(),\r\n            repeatEvery: 0,\r\n            repeatMax: GLIDE_TIME,\r\n        }));\r\n        const canvasX = (this.runtime.canvas.width / 2) - (this.width / 2);\r\n        const canvasY = (this.runtime.canvas.height / 2) - (this.height / 2);\r\n        const center = new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](canvasX, canvasY);\r\n        // figure out what rotation should be in order to glide to the center\r\n        const distance = this.distanceTo(center);\r\n        this.glideMoveSpeed = distance / GLIDE_TIME;\r\n        const heightDifference = this.centerY - canvasY;\r\n        this.rotation = -Object(_engine_utils__WEBPACK_IMPORTED_MODULE_2__[\"radiansToDegree\"])(Math.acos(heightDifference / distance));\r\n        if (this.centerX > canvasX) {\r\n            this.rotation *= -1;\r\n        }\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.move(),\r\n            delay: GLIDE_TIME,\r\n            repeatEvery: 0,\r\n            repeatMax: MOVE_TIME,\r\n        }));\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.destroy(),\r\n            delay: MOVE_TIME,\r\n        }));\r\n        this.addTask(() => this.testIntersects());\r\n    }\r\n    glideToCenter() {\r\n        this.moveForward(-this.glideMoveSpeed);\r\n    }\r\n    testIntersects() {\r\n        if (this.intersects(this.runtime.player)) {\r\n            this.runtime.player.kill();\r\n        }\r\n    }\r\n    move() {\r\n        this.speed += SPEED_GAIN;\r\n        this.rotation -= TURN_SPEED;\r\n        this.moveForward(this.speed);\r\n        this.x = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"clamp\"])(this.x, 0, this.runtime.canvas.width);\r\n        this.y = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"clamp\"])(this.y, 0, this.runtime.canvas.height);\r\n    }\r\n    render() {\r\n        const rotation = this.rotation;\r\n        this.rotation = 0;\r\n        super.render.apply(this, arguments);\r\n        this.rotation = rotation;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/noss/bullet.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/noss/noss.ts":
/*!**********************************************!*\
  !*** ./src/game/sprites/bosses/noss/noss.ts ***!
  \**********************************************/
/*! exports provided: NossBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NossBoss\", function() { return NossBoss; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _noss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../noss */ \"./src/game/sprites/bosses/noss.ts\");\n/* harmony import */ var _bullet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bullet */ \"./src/game/sprites/bosses/noss/bullet.ts\");\n\r\n\r\n\r\n\r\n\r\nconst POSITIONS = [\r\n    {\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-156, 136),\r\n    },\r\n    {\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-116, -8),\r\n    },\r\n    {\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(156, 72),\r\n        direction: -1,\r\n    },\r\n];\r\nconst VULNERABLE_TEXTURE = \"boss/noss/rest\";\r\nconst STARTING_POS = Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-4, -104); // original (0, -108)\r\nconst HEALTH = 3;\r\nclass NossBoss extends _noss__WEBPACK_IMPORTED_MODULE_3__[\"AbstractNossBoss\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.health = HEALTH;\r\n        this.shouldEndRoutine = false;\r\n        this.alreadyHit = false;\r\n        this.visible = false;\r\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](STARTING_POS);\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.start(),\r\n            delay: 60,\r\n        }));\r\n    }\r\n    start() {\r\n        this.audiblePoof(true);\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.startRoutine(),\r\n            delay: 90,\r\n        }));\r\n    }\r\n    //\r\n    // ROUTINE\r\n    //\r\n    startRoutine() {\r\n        super.startRoutine();\r\n        this.alreadyHit = false;\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.poof(),\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.runtime.playSound(\"boss/noss/shadow1\"),\r\n        }), 60);\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.runtime.playSound(\"boss/noss/shadow3\"),\r\n        }), 90);\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.teleport(),\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.audiblePoof(),\r\n        }), 60);\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.spawnBullets(),\r\n            repeatEvery: 1,\r\n            repeatMax: 10,\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.afterSpawnBullets(),\r\n        }), _bullet__WEBPACK_IMPORTED_MODULE_4__[\"MOVE_TIME\"]);\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.texture = this.runtime.getImage(VULNERABLE_TEXTURE),\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            // note: this.rest() does its own endRoutine(), task.stop()\r\n            run: (task) => this.rest(task),\r\n            repeatEvery: 0,\r\n        }));\r\n    }\r\n    endRoutine() {\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.startRoutine(),\r\n            delay: 0,\r\n        }));\r\n    }\r\n    teleport() {\r\n        const position = POSITIONS[Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"getRandomInt\"])(0, POSITIONS.length - 1)];\r\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](position.position);\r\n        this.scale.x = position.direction || 1;\r\n        this.texture = this.runtime.getImage(_noss__WEBPACK_IMPORTED_MODULE_3__[\"BASE_TEXTURE\"]);\r\n    }\r\n    rest(task) {\r\n        if (this.shouldEndRoutine || (!this.alreadyHit && task.repeatCount >= 300)) {\r\n            this.endRoutine();\r\n            task.stop();\r\n            return;\r\n        }\r\n        if (!this.alreadyHit && this.playerJumpedOn()) {\r\n            this.alreadyHit = true;\r\n            this.bouncePlayer();\r\n            this.spawnHitEffect(\"-1\");\r\n            this.health--;\r\n            if (this.health === 0) {\r\n                this.dead();\r\n            }\r\n            else {\r\n                this.damage();\r\n            }\r\n        }\r\n    }\r\n    damage() {\r\n        this.playHitAnimation();\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.shouldEndRoutine = true,\r\n            delay: _noss__WEBPACK_IMPORTED_MODULE_3__[\"HIT_ANIMATION_TOTAL_LENGTH\"],\r\n        }));\r\n    }\r\n    dead() {\r\n        this.playDeadAnimation();\r\n    }\r\n    spawnBullets() {\r\n        new _bullet__WEBPACK_IMPORTED_MODULE_4__[\"NossBossBulletSprite\"]({\r\n            position: this.position,\r\n            texture: this.runtime.getImage(\"boss/noss/bullet\"),\r\n        });\r\n    }\r\n    afterSpawnBullets() {\r\n        this.runtime.playSound(\"boss/noss/shadow4\");\r\n        this.shouldEndRoutine = false;\r\n    }\r\n    poof(newVisibility = !this.visible) {\r\n        super.poof();\r\n        this.visible = newVisibility;\r\n    }\r\n    // this function is brought to you by audible\r\n    audiblePoof(newVisibility) {\r\n        this.poof(newVisibility);\r\n        this.runtime.playSound(\"boss/noss/shadow2\");\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/noss/noss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/sword/sword.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/bosses/sword/sword.ts ***!
  \************************************************/
/*! exports provided: SwordBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SwordBoss\", function() { return SwordBoss; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _engine_vector2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../engine/vector2d */ \"./src/engine/vector2d.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _coin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../coin */ \"./src/game/sprites/coin.ts\");\n/* harmony import */ var _boss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../boss */ \"./src/game/sprites/bosses/boss.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n * The first boss: A Sword\r\n */\r\n// swipe and spin cycle\r\nconst SPIN_ROTATION_SPEED = 5 / 2;\r\nconst SPIN_SIZE_CHANGE_RATE = 0.035;\r\nconst SWIPE_ROTATION_SPEED = 10 / 2;\r\nconst SWIPE_MOVE_SPEED = 12.5 / 2;\r\nconst SWIPE_BASE_DELAY = 60;\r\nconst SWIPE_SIZE_CHANGE_RATE = 0.11;\r\nconst SWIPE_ANIMATE_TIMES = 25;\r\nconst SWIPE_ANIMATE_FRAME_LENGTH = 3;\r\nconst SWIPE_TEXTURES = [\r\n    \"boss/sword/sword\",\r\n    \"boss/sword/open\",\r\n];\r\nconst SWIPE_DOWN_SPEED = 15 / 2;\r\nconst SWIPE_UP_SPEED = SWIPE_DOWN_SPEED / 2;\r\n// getting damaged\r\nconst DAMAGED_FALL_SPEED = 5;\r\nconst DAMAGED_RISE_SPEED = DAMAGED_FALL_SPEED / 2;\r\nconst DAMAGED_ANIMATE_TIMES = 20;\r\nconst DEAD_ANIMATE_TIMES = 35;\r\nconst DAMAGED_TEXTURES = [\r\n    \"boss/sword/open\",\r\n    \"boss/sword/hurt\",\r\n];\r\nconst DAMAGE_ANIMATE_FRAME_LENGTH = 2;\r\nconst PLAYER_JUMP_YV = 3;\r\n// death\r\nconst DEAD_ROTATION_SPEED = 0.742857142857 / 2; // 0.742... is how the game actually defines this.\r\nconst DEAD_STARTING_VELOCITY = 2;\r\nconst REST_PHASE_LENGTH = 180;\r\nclass SwordBoss extends _boss__WEBPACK_IMPORTED_MODULE_6__[\"AbstractBoss\"] {\r\n    constructor(opts, options = {}) {\r\n        super(opts);\r\n        this.hitPlayer = false;\r\n        this._sizeScale = 1;\r\n        this.spinDirection = 1;\r\n        this.testCollision = false;\r\n        this.yv = DEAD_STARTING_VELOCITY;\r\n        this.xv = 0;\r\n        this.blocksFromTop = options.blocksFromTop || 14;\r\n        this.startingHealth = options.health || 3;\r\n        this.health = this.startingHealth;\r\n        this.startingHeight = this.height;\r\n        this.startingWidth = this.width;\r\n        this.resetCoordinates();\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.beginSpinAttack(),\r\n            delay: 60,\r\n        }));\r\n        this.addTask(() => this.intersectTest());\r\n        this.rotationPoint = new _engine_vector2d__WEBPACK_IMPORTED_MODULE_3__[\"Vector2D\"](0.5, 0.05);\r\n    }\r\n    //\r\n    // Utilities\r\n    //\r\n    intersectTest() {\r\n        if (!this.testCollision) {\r\n            return;\r\n        }\r\n        if (this.complexIntersectsSimple(this.runtime.player)) {\r\n            this.runtime.player.kill();\r\n            this.hitPlayer = true;\r\n        }\r\n    }\r\n    startRoutine() {\r\n        super.startRoutine();\r\n        this.texture = this.runtime.getImage(\"boss/sword/sword\");\r\n        this.beginSpinAttack();\r\n    }\r\n    resetCoordinates() {\r\n        this.recenter();\r\n        this.y = this.blocksFromTop * _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\r\n    }\r\n    recenter() {\r\n        this.x = this.runtime.canvas.width / 2 - this.width / 2;\r\n    }\r\n    animate(textures, times, length, cb) {\r\n        for (let i = 0; i < times; i++) {\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => {\r\n                    this.texture = this.runtime.getImage(textures[i % textures.length]);\r\n                    if (cb) {\r\n                        cb();\r\n                    }\r\n                },\r\n                delay: i * length,\r\n            }));\r\n        }\r\n    }\r\n    //\r\n    // Spin Attack\r\n    //\r\n    beginSpinAttack() {\r\n        this.testCollision = true;\r\n        this.spinDirection = -this.multiplier;\r\n        this.phaseDelay = SWIPE_BASE_DELAY;\r\n        this.hitPlayer = false;\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: (task) => this.spinAttack(task),\r\n            repeatEvery: 0,\r\n            delay: 60,\r\n        }));\r\n    }\r\n    spinAttack(task) {\r\n        this.rotation += this.spinDirection * SPIN_ROTATION_SPEED;\r\n        // could be pos or neg\r\n        if (Math.abs(this.rotation) >= 180) {\r\n            this.sizeScale -= SPIN_SIZE_CHANGE_RATE;\r\n        }\r\n        else {\r\n            this.sizeScale += SPIN_SIZE_CHANGE_RATE;\r\n        }\r\n        // could be pos or neg\r\n        if (Math.abs(this.rotation) >= 360) {\r\n            this.rotation = 0;\r\n            task.stop();\r\n            this.beginSwipeAttack();\r\n        }\r\n        this.resetCoordinates();\r\n    }\r\n    //\r\n    // Swipe Attack\r\n    //\r\n    beginSwipeAttack() {\r\n        // make sure some values are reset properly\r\n        this.sizeScale = 1;\r\n        this.rotation = 0;\r\n        this.phaseDelay = SWIPE_BASE_DELAY;\r\n        // This is terrible.\r\n        const multi = this.multiplier;\r\n        const animate = () => {\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.animate(SWIPE_TEXTURES, SWIPE_ANIMATE_TIMES, SWIPE_ANIMATE_FRAME_LENGTH),\r\n            }), SWIPE_ANIMATE_TIMES * SWIPE_ANIMATE_FRAME_LENGTH);\r\n        };\r\n        const attack = () => {\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.swipeAttack(SWIPE_DOWN_SPEED),\r\n                repeatEvery: 0,\r\n                repeatMax: 16,\r\n            }));\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.swipeAttack(-SWIPE_UP_SPEED),\r\n                repeatEvery: 0,\r\n                repeatMax: 32,\r\n            }));\r\n        };\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.swipeRotate(-1 * multi),\r\n            repeatEvery: 0,\r\n            repeatMax: 36,\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.swipeMove(1),\r\n            repeatEvery: 0,\r\n            repeatMax: 24,\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => {\r\n                this.swipeRotate(-1 * multi);\r\n                this.swipeSize(1);\r\n            },\r\n            repeatEvery: 0,\r\n            repeatMax: 18,\r\n        }));\r\n        animate();\r\n        attack();\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.swipeRotate(1 * multi),\r\n            repeatEvery: 0,\r\n            repeatMax: 36,\r\n        }));\r\n        animate();\r\n        attack();\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => {\r\n                this.swipeRotate(1 * multi);\r\n                this.swipeSize(-1);\r\n            },\r\n            repeatEvery: 0,\r\n            repeatMax: 18,\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.swipeMove(-1),\r\n            repeatEvery: 0,\r\n            repeatMax: 24,\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.beginRestPhase(),\r\n        }));\r\n    }\r\n    swipeRotate(multi) {\r\n        this.rotation += SWIPE_ROTATION_SPEED * multi;\r\n    }\r\n    swipeMove(multi) {\r\n        this.y -= SWIPE_MOVE_SPEED * multi;\r\n    }\r\n    swipeAttack(speed) {\r\n        this.y += speed;\r\n    }\r\n    swipeSize(multi) {\r\n        this.sizeScale += SWIPE_SIZE_CHANGE_RATE * multi;\r\n    }\r\n    //\r\n    // Rest Phase\r\n    //\r\n    beginRestPhase() {\r\n        this.testCollision = false;\r\n        if (this.hitPlayer) {\r\n            this.texture = this.runtime.getImage(\"boss/sword/heal\");\r\n            this.spawnHitEffect(this.health === this.startingHealth ? \"+0\" : \"+1\");\r\n            if (this.health < this.startingHealth) {\r\n                this.health++;\r\n            }\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.startRoutine(),\r\n                delay: 60,\r\n            }));\r\n        }\r\n        else {\r\n            this.texture = this.runtime.getImage(\"boss/sword/open\");\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: (task) => this.restVulnerable(task),\r\n                repeatEvery: 0,\r\n                repeatMax: REST_PHASE_LENGTH,\r\n            }));\r\n            const health = this.health;\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => {\r\n                    if (this.health === health) {\r\n                        this.startRoutine();\r\n                    }\r\n                },\r\n                delay: 180,\r\n            }));\r\n        }\r\n    }\r\n    restVulnerable(task) {\r\n        // use simple intersects for performance reasons\r\n        if (this.playerJumpedOn()) {\r\n            this.bouncePlayer();\r\n            this.damage();\r\n            task.stop();\r\n        }\r\n    }\r\n    damage() {\r\n        this.health--;\r\n        this.spawnHitEffect(\"-1\");\r\n        this.phaseDelay = 0;\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.runtime.playSound(\"boss/ouch\"),\r\n        }));\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.y += DAMAGED_FALL_SPEED,\r\n            repeatEvery: 0,\r\n            repeatMax: 5,\r\n        }));\r\n        if (this.health === 0) {\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.runtime.playSound(\"boss/shadow5\"),\r\n            }));\r\n        }\r\n        else {\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.runtime.playSound(\"boss/sword/rumble\"),\r\n            }));\r\n        }\r\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.animate(DAMAGED_TEXTURES, DAMAGED_ANIMATE_TIMES, DAMAGE_ANIMATE_FRAME_LENGTH),\r\n        }), DAMAGED_ANIMATE_TIMES * DAMAGE_ANIMATE_FRAME_LENGTH);\r\n        if (this.health === 0) {\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.animate(DAMAGED_TEXTURES, DEAD_ANIMATE_TIMES, DAMAGE_ANIMATE_FRAME_LENGTH, () => {\r\n                    this.rotation -= DEAD_ROTATION_SPEED;\r\n                }),\r\n            }), DEAD_ANIMATE_TIMES * DAMAGE_ANIMATE_FRAME_LENGTH);\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.runtime.setBackgroundMusic([]),\r\n            }));\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: (task) => this.deadPhysics(task),\r\n                repeatEvery: 0,\r\n            }));\r\n        }\r\n        else {\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.animate(DAMAGED_TEXTURES, DAMAGED_ANIMATE_TIMES, DAMAGE_ANIMATE_FRAME_LENGTH),\r\n            }), DAMAGED_ANIMATE_TIMES * DAMAGE_ANIMATE_FRAME_LENGTH);\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.texture = this.runtime.getImage(\"boss/sword/sword\"),\r\n            }));\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.y -= DAMAGED_RISE_SPEED,\r\n                repeatEvery: 0,\r\n                repeatMax: 10,\r\n            }));\r\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.startRoutine(),\r\n            }));\r\n        }\r\n    }\r\n    //\r\n    // Dead\r\n    //\r\n    deadPhysics(task) {\r\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_4__[\"runPhysics\"])(this, {\r\n            collision: false,\r\n        });\r\n        if (this.y > this.runtime.canvas.height) {\r\n            task.stop();\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.spawnCoin(),\r\n                delay: 30,\r\n            }));\r\n        }\r\n    }\r\n    spawnCoin() {\r\n        const texture = this.runtime.getImage(\"coin/1\");\r\n        const x = (this.runtime.canvas.width / 2) - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] / 2);\r\n        const y = this.runtime.canvas.height;\r\n        new _coin__WEBPACK_IMPORTED_MODULE_5__[\"SwordBossLevelUpCoinSprite\"]({\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](x, y),\r\n            texture,\r\n        });\r\n    }\r\n    //\r\n    // Getters and Setters\r\n    //\r\n    set sizeScale(scale) {\r\n        this.height = this.startingHeight * scale;\r\n        this.width = this.startingWidth * scale;\r\n        this._sizeScale = scale;\r\n        this.recenter();\r\n    }\r\n    get sizeScale() {\r\n        return this._sizeScale;\r\n    }\r\n    get multiplier() {\r\n        if ((this.runtime.player.x + this.runtime.player.width / 2) < (this.x + this.width / 2)) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return -1;\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/sword/sword.ts?");

/***/ }),

/***/ "./src/game/sprites/coin.ts":
/*!**********************************!*\
  !*** ./src/game/sprites/coin.ts ***!
  \**********************************/
/*! exports provided: LevelUpCoinSprite, SwordBossLevelUpCoinSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelUpCoinSprite\", function() { return LevelUpCoinSprite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SwordBossLevelUpCoinSprite\", function() { return SwordBossLevelUpCoinSprite; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n\r\n\r\n\r\n/*\r\n * The coin that levels you up\r\n */\r\n// Length of an animation frame\r\nconst FRAME_LENGTH = 4;\r\n// The total frames in the animation\r\nconst TOTAL_FRAMES = 4;\r\nclass LevelUpCoinSprite extends _blocks_block__WEBPACK_IMPORTED_MODULE_4__[\"Block\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.animationFrame = 1;\r\n        this.animated = true;\r\n        // In order to stay centered after changing position it will recenter using the startingPosition\r\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.position);\r\n        this.centerAlign();\r\n        this.addTask(() => this.run());\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.animate(),\r\n            repeatEvery: FRAME_LENGTH,\r\n            delay: FRAME_LENGTH,\r\n        }));\r\n    }\r\n    run() {\r\n        const touchingPlayer = this.intersects(this.runtime.player);\r\n        if (touchingPlayer) {\r\n            this.runtime.playSound(\"blocks/coin\");\r\n            this.runtime.level++;\r\n            if (this.runtime.level === this.runtime.levels.length) {\r\n                this.runtime.level = 0;\r\n            }\r\n            this.runtime.renderLevel();\r\n        }\r\n    }\r\n    animate() {\r\n        if (!this.animated) {\r\n            return;\r\n        }\r\n        this.animationFrame++;\r\n        if (this.animationFrame > TOTAL_FRAMES) {\r\n            this.animationFrame = 1;\r\n        }\r\n        this.texture = this.runtime.getImage(`coin/${this.animationFrame}`);\r\n        this.updateDimensions();\r\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.startingPosition);\r\n        this.centerAlign();\r\n    }\r\n}\r\nclass SwordBossLevelUpCoinSprite extends LevelUpCoinSprite {\r\n    constructor(options) {\r\n        super(options);\r\n        this.yv = 9;\r\n        this.xv = 0;\r\n        this.endY = (this.runtime.canvas.height / 2) - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] / 2) + this.height;\r\n        this.hasGoneAbove = false;\r\n        this.addTask((task) => this.fly(task));\r\n        this.animated = false;\r\n    }\r\n    fly(task) {\r\n        Object(_physics__WEBPACK_IMPORTED_MODULE_3__[\"runPhysics\"])(this, {\r\n            collision: false,\r\n        });\r\n        if (this.hasGoneAbove) {\r\n            if (this.y >= this.endY) {\r\n                this.y = this.endY;\r\n                this.animated = true;\r\n                const x = this.x - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] - this.width) / 2;\r\n                const y = this.y - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] - this.height) / 2;\r\n                this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](x, y);\r\n                this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](x, y);\r\n                this.centerAlign();\r\n                task.stop();\r\n            }\r\n        }\r\n        else {\r\n            if (this.y <= this.endY) {\r\n                this.hasGoneAbove = true;\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/coin.ts?");

/***/ }),

/***/ "./src/game/sprites/ending/EndingSceneSprite.ts":
/*!******************************************************!*\
  !*** ./src/game/sprites/ending/EndingSceneSprite.ts ***!
  \******************************************************/
/*! exports provided: EndingSceneSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EndingSceneSprite\", function() { return EndingSceneSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n\r\nconst MOVE_LENGTH = 368;\r\nclass EndingSceneSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(parent, options) {\r\n        super(options);\r\n        this.parent = parent;\r\n        this.endX = 0;\r\n        this.endY = this.runtime.canvas.height - this.height + 4;\r\n        const xDistance = Math.abs(this.endX - this.x);\r\n        const yDistance = Math.abs(this.endY - this.y);\r\n        this.moveX = xDistance / MOVE_LENGTH;\r\n        this.moveY = yDistance / MOVE_LENGTH;\r\n        this.addTask((task) => this.move(task));\r\n    }\r\n    move(task) {\r\n        this.x += this.moveX;\r\n        this.y -= this.moveY;\r\n        this.x = Math.min(this.x, this.endX);\r\n        this.y = Math.max(this.y, this.endY);\r\n        if (this.x === this.endX && this.y === this.endY) {\r\n            this.parent.sceneMoveEnd();\r\n            task.stop();\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/ending/EndingSceneSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/ending/EndingSprite.ts":
/*!*************************************************!*\
  !*** ./src/game/sprites/ending/EndingSprite.ts ***!
  \*************************************************/
/*! exports provided: EndingSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EndingSprite\", function() { return EndingSprite; });\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../text/StaticNightlightTextSprite */ \"./src/game/sprites/text/StaticNightlightTextSprite.ts\");\n/* harmony import */ var _EndingSceneSprite__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./EndingSceneSprite */ \"./src/game/sprites/ending/EndingSceneSprite.ts\");\n/* harmony import */ var _EndingThumbSprite__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./EndingThumbSprite */ \"./src/game/sprites/ending/EndingThumbSprite.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst INITIAL_DELAY = 60;\r\nconst BACKGROUND_PHASE_LENGTH = 300;\r\n// #2FB3FF\r\nconst BACKGROUND_COLOR_RED = 0x2F;\r\nconst BACKGROUND_COLOR_GREEN = 0xB3;\r\nconst BACKGROUND_COLOR_BLUE = 0xFF;\r\nconst TEXT_PHASE_LINE_DELAY = 120;\r\nconst TEXT = [\r\n    {\r\n        text: \"with noss, the cube of darkness' defeat,\",\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-160, 164),\r\n    },\r\n    {\r\n        text: \"the world was relieved to finally see the night pass.\",\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-212, 140),\r\n    },\r\n    {\r\n        text: \"our little hero is just taking in the scenery...\",\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-192, 116),\r\n    },\r\n];\r\nconst FADE_OUT_PHASE_DELAY = 600;\r\nclass EndingSprite extends _engine_sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        /**\r\n         * Well, that's the end.\r\n         */\r\n        // get rid of the player\r\n        this.runtime.player.destroy();\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: (task) => this.backgroundPhase(task),\r\n            onend: () => this.startTextPhase(),\r\n            delay: INITIAL_DELAY,\r\n            repeatMax: BACKGROUND_PHASE_LENGTH,\r\n            repeatEvery: 0,\r\n        }));\r\n    }\r\n    backgroundPhase(task) {\r\n        const progress = task.repeatCount / task.repeatMax;\r\n        const r = Math.floor(BACKGROUND_COLOR_RED * progress);\r\n        const g = Math.floor(BACKGROUND_COLOR_GREEN * progress);\r\n        const b = Math.floor(BACKGROUND_COLOR_BLUE * progress);\r\n        const hex = (val) => {\r\n            const hexadecimal = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_2__[\"toHex\"])(val);\r\n            if (hexadecimal.length === 1) {\r\n                return \"0\" + hexadecimal;\r\n            }\r\n            return hexadecimal;\r\n        };\r\n        this.runtime.background = `#${hex(r)}${hex(g)}${hex(b)}`;\r\n    }\r\n    startTextPhase() {\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.runtime.setBackgroundMusic([this.runtime.getSound(\"music/exploration\")]),\r\n            delay: TEXT_PHASE_LINE_DELAY,\r\n        }));\r\n        for (let i = 0; i < TEXT.length; i++) {\r\n            const delay = (i + 1) * TEXT_PHASE_LINE_DELAY;\r\n            const opts = TEXT[i];\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.displayText(opts),\r\n                delay,\r\n            }));\r\n        }\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.spawnEndScene(),\r\n            delay: (TEXT.length + 1) * TEXT_PHASE_LINE_DELAY,\r\n        }));\r\n    }\r\n    displayText(opts) {\r\n        new _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_5__[\"StaticNightlightTextSprite\"](opts);\r\n        this.runtime.updateStatic();\r\n    }\r\n    spawnEndScene() {\r\n        const image = this.runtime.getImage(\"end/scene\");\r\n        const x = -image.width * 2;\r\n        const y = this.runtime.canvas.height;\r\n        this.endingScene = new _EndingSceneSprite__WEBPACK_IMPORTED_MODULE_6__[\"EndingSceneSprite\"](this, {\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](x, y),\r\n            width: image.width * 8,\r\n            height: image.height * 8,\r\n            texture: image,\r\n        });\r\n    }\r\n    sceneMoveEnd() {\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: () => this.goodbye(),\r\n            delay: FADE_OUT_PHASE_DELAY,\r\n        }));\r\n    }\r\n    goodbye() {\r\n        new _EndingThumbSprite__WEBPACK_IMPORTED_MODULE_7__[\"EndingThumbSprite\"](this, {\r\n            texture: this.runtime.getImage(\"thumb\"),\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\r\n        });\r\n    }\r\n    render() {\r\n        // this sprite doesn't do rendering, it just handles running some things for the ending\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/ending/EndingSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/ending/EndingThumbSprite.ts":
/*!******************************************************!*\
  !*** ./src/game/sprites/ending/EndingThumbSprite.ts ***!
  \******************************************************/
/*! exports provided: EndingThumbSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EndingThumbSprite\", function() { return EndingThumbSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../text/StaticNightlightTextSprite */ \"./src/game/sprites/text/StaticNightlightTextSprite.ts\");\n/* harmony import */ var _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils */ \"./src/utils.ts\");\n\r\n\r\n\r\n\r\n\r\nconst FADE_LENGTH = 100;\r\nconst TEXT_DELAY = 120;\r\nconst TEXT = [\r\n    {\r\n        text: \"that's all the base game has to offer\",\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-148, 164),\r\n    },\r\n    {\r\n        text: \"consider trying out the level editor?\",\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-148, 140),\r\n    },\r\n    {\r\n        text: \"click to continue...\",\r\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-80, 116),\r\n    },\r\n];\r\nclass EndingThumbSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(parent, options) {\r\n        super(options);\r\n        this.parent = parent;\r\n        this.opacity = 0;\r\n        this.fadeIn();\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            run: (task) => this.testLevelEditor(task),\r\n            repeatEvery: 0,\r\n            delay: FADE_LENGTH,\r\n        }));\r\n    }\r\n    fadeIn() {\r\n        return new Promise((resolve) => {\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.opacity += 1 / FADE_LENGTH,\r\n                repeatEvery: 0,\r\n                repeatMax: FADE_LENGTH,\r\n                onend: () => {\r\n                    this.opacity = 1;\r\n                    resolve();\r\n                },\r\n            }));\r\n        });\r\n    }\r\n    fadeOut(amount = 1) {\r\n        return new Promise((resolve) => {\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => this.opacity -= 1 / FADE_LENGTH,\r\n                repeatEvery: 0,\r\n                repeatMax: FADE_LENGTH * amount,\r\n                onend: () => {\r\n                    this.opacity = 1 - amount;\r\n                    resolve();\r\n                },\r\n            }));\r\n        });\r\n    }\r\n    testLevelEditor(task) {\r\n        if (this.runtime.mouse.isClick) {\r\n            this.startLevelEditor();\r\n            task.stop();\r\n        }\r\n    }\r\n    startLevelEditor() {\r\n        // kill our sibling and parent\r\n        // haha yes\r\n        this.parent.endingScene.destroy();\r\n        this.parent.destroy();\r\n        // remove all text sprites\r\n        this.runtime.sprites.filter((i) => i instanceof _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"NightlightTextSprite\"]).forEach((i) => i.destroy());\r\n        this.runtime.updateStatic();\r\n        this.runtime.background = \"black\";\r\n        this.z = -2; // static renders at -1, we want to be below it for this part\r\n        this.fadeOut(0.75)\r\n            .then(() => this.lastSurpriseText())\r\n            .then(() => this.loadLevelEditor());\r\n    }\r\n    lastSurpriseText() {\r\n        return new Promise((resolve) => {\r\n            for (let i = 0; i < TEXT.length; i++) {\r\n                const delay = (i + 1) * TEXT_DELAY;\r\n                const opts = TEXT[i];\r\n                this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                    run: () => this.displayText(opts),\r\n                    delay,\r\n                }));\r\n            }\r\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n                run: () => resolve(),\r\n                delay: TEXT.length * TEXT_DELAY,\r\n            }));\r\n        });\r\n    }\r\n    displayText(opts) {\r\n        new _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"StaticNightlightTextSprite\"](opts);\r\n        this.runtime.updateStatic();\r\n    }\r\n    loadLevelEditor() {\r\n        this.addTask((task) => {\r\n            if (this.runtime.mouse.isClick) {\r\n                task.stop();\r\n                this.z = 0;\r\n                this.fadeIn().then(() => {\r\n                    location.search = \"?m=leveleditor&welcome=1\";\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/ending/EndingThumbSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/jumplight.ts":
/*!***************************************!*\
  !*** ./src/game/sprites/jumplight.ts ***!
  \***************************************/
/*! exports provided: JumpLight */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JumpLight\", function() { return JumpLight; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n\r\n\r\n/*\r\n * A light that will allow the player to jump again once while in the air.\r\n */\r\nconst HIDE_DURATION = 60 * 3;\r\nclass JumpLight extends _blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"Block\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.addTask(() => this.testIntersects());\r\n    }\r\n    show() {\r\n        this.visible = true;\r\n    }\r\n    activate(player) {\r\n        player.hasJumpLight = true;\r\n        this.visible = false;\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\r\n            run: () => this.show(),\r\n            delay: HIDE_DURATION,\r\n        }));\r\n    }\r\n    testIntersects() {\r\n        if (this.visible && this.intersects(this.runtime.player)) {\r\n            this.activate(this.runtime.player);\r\n        }\r\n    }\r\n    get needsReinstantiate() {\r\n        return true;\r\n    }\r\n    get type() {\r\n        return JumpLight;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/jumplight.ts?");

/***/ }),

/***/ "./src/game/sprites/pause/PauseSprite.ts":
/*!***********************************************!*\
  !*** ./src/game/sprites/pause/PauseSprite.ts ***!
  \***********************************************/
/*! exports provided: PauseSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PauseSprite\", function() { return PauseSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _zindex__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../zindex */ \"./src/game/sprites/zindex.ts\");\n\r\n\r\n\r\n\r\nclass LevelCodeTextSprite extends _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"NightlightTextSprite\"] {\r\n    get text() {\r\n        return this.runtime.levelCode;\r\n    }\r\n    set text(text) {\r\n        // lol no\r\n    }\r\n}\r\nclass PauseSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.width *= 2;\r\n        this.height *= 2;\r\n        this.gameState = this.runtime.pauseState;\r\n        this.x = (this.runtime.canvas.width / 2) - (this.width / 2);\r\n        this.y = this.runtime.canvas.height * 0.2;\r\n        this.z = _zindex__WEBPACK_IMPORTED_MODULE_3__[\"ZIndexes\"].PauseMenu;\r\n        this.runtime.pauseState.renderingEnabled = false;\r\n        const getCenterX = (text) => (this.runtime.canvas.width / 2) - (text.length * _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_WIDTH\"] / 2);\r\n        const spawnCenteredText = (text, y) => {\r\n            return new _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"NightlightTextSprite\"]({\r\n                text,\r\n                position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](getCenterX(text), y, _zindex__WEBPACK_IMPORTED_MODULE_3__[\"ZIndexes\"].PauseMenu),\r\n                gameState: this.gameState,\r\n                persistent: true,\r\n            });\r\n        };\r\n        spawnCenteredText(\"hit esc to resume\", this.runtime.canvas.height * 0.4);\r\n        const levelCodeLabel = spawnCenteredText(\"level code:\", this.runtime.canvas.height * 0.9);\r\n        new LevelCodeTextSprite({\r\n            text: \"this will be replaced\",\r\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](getCenterX(\"12345678\"), levelCodeLabel.y + _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_HEIGHT\"], _zindex__WEBPACK_IMPORTED_MODULE_3__[\"ZIndexes\"].PauseMenu),\r\n            persistent: true,\r\n            gameState: this.gameState,\r\n        });\r\n        this.addTask(() => this.keyTest());\r\n    }\r\n    keyTest() {\r\n        // escape key\r\n        if (this.runtime.keyboard.keys[27].justPressed) {\r\n            this.runtime.pauseState.renderingEnabled = !this.runtime.pauseState.renderingEnabled;\r\n            this.runtime.playState.updatingEnabled = !this.runtime.playState.updatingEnabled;\r\n        }\r\n    }\r\n    render(ctx) {\r\n        ctx.fillStyle = \"#000000AA\";\r\n        ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n        super.render(ctx);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/pause/PauseSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/player/fragment.ts":
/*!*********************************************!*\
  !*** ./src/game/sprites/player/fragment.ts ***!
  \*********************************************/
/*! exports provided: PlayerFragmentSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerFragmentSprite\", function() { return PlayerFragmentSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n\r\n\r\n/*\r\n * Fragments of the player that will fly everywhere you when the player dies\r\n */\r\n// How long before they will start to go away (opacity up)\r\nconst LIFESPAN = 300;\r\n// The rate at which the opacity will go up each frame after the life span is reached\r\nconst GHOST_RATE = 0.03;\r\n// The friction value for rotation when on the ground\r\n// Multiplied by rotation so higher is less, 1 is 0\r\nconst ROTATION_FRICTION = 0.5;\r\n// create a high limit to prevent constant death from crashing everything\r\nconst MAX_FRAGMENTS = 250;\r\nlet existingFragments = 0;\r\nclass PlayerFragmentSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.xv = 0;\r\n        this.yv = 0;\r\n        this.rv = 0;\r\n        this.lifespan = 0;\r\n        existingFragments++;\r\n        if (existingFragments > MAX_FRAGMENTS) {\r\n            this.destroy();\r\n            return;\r\n        }\r\n        this.xv = opts.xv;\r\n        this.yv = opts.yv;\r\n        this.rv = opts.rv;\r\n        if (this.y >= this.runtime.canvas.height) {\r\n            this.y = this.runtime.canvas.height - 1;\r\n        }\r\n        this.addTask(() => this.run());\r\n    }\r\n    run() {\r\n        this.lifespan++;\r\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_1__[\"runPhysics\"])(this, {\r\n            midAirFriction: false,\r\n            roundValues: false,\r\n        });\r\n        if (physicsResult) {\r\n            this.rv *= ROTATION_FRICTION;\r\n        }\r\n        this.rotation += this.rv;\r\n        if (this.lifespan >= LIFESPAN) {\r\n            this.opacity -= GHOST_RATE;\r\n        }\r\n        if (this.opacity < 0 || this.y > this.runtime.canvas.height) {\r\n            this.destroy();\r\n        }\r\n    }\r\n    destroy() {\r\n        super.destroy();\r\n        existingFragments--;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/player/fragment.ts?");

/***/ }),

/***/ "./src/game/sprites/player/player.ts":
/*!*******************************************!*\
  !*** ./src/game/sprites/player/player.ts ***!
  \*******************************************/
/*! exports provided: PlayerSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerSprite\", function() { return PlayerSprite; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _fragment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./fragment */ \"./src/game/sprites/player/fragment.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n * It's a player.\r\n *\r\n * For now there doesn't seem to be any problems with having the player also be the graphic\r\n * And until there are problems they will be staying as one\r\n */\r\n// How fast the player walks\r\nconst PLAYER_WALK_SPEED = 0.5 / 2;\r\n// The velocity gained when jumping\r\nconst JUMP_HEIGHT = 5.4;\r\n// Maximum speed the player is allowed to move at\r\nconst PLAYER_MAX_SPEED = 4 / 2;\r\n// The player uses a custom friction\r\n// This is the value used in that friction\r\nconst PLAYER_FRICTION = 0.8 / 2;\r\n// Fragment textures that will always be present when dying\r\nconst FRAGMENT_TEXTURES = [1, 2, 3, 4];\r\n// The minimum amount of small pieces to create\r\nconst FRAGMENT_SMALL_PIECE_MIN = 4;\r\n// The maxiumum amount of small pieces to create\r\nconst FRAGMENT_SMALL_PIECE_MAX = 6;\r\n// The texture associated with small pieces\r\nconst FRAGMENT_SMALL_PIECE_TEXTURE = 5;\r\n// The range of xv values that pieces will have\r\nconst FRAGMENT_XV_RANGE = 1;\r\n// The minimum yv that pieces will have\r\nconst FRAGMENT_YV_MIN = 3;\r\n// The maxiumum yv that pieces will have\r\nconst FRAGMENT_YV_MAX = 6;\r\n// The range of rotation change that pieces will have\r\nconst FRAGMENT_RV_RANGE = 10;\r\n// Frames in the walk animation\r\nconst WALK_ANIMATION_FRAMES = 4;\r\n// Length of each frame\r\nconst WALK_ANIMATION_LENGTH = 4;\r\nvar MovementDirection;\r\n(function (MovementDirection) {\r\n    MovementDirection[MovementDirection[\"Right\"] = 1] = \"Right\";\r\n    MovementDirection[MovementDirection[\"Left\"] = -1] = \"Left\";\r\n})(MovementDirection || (MovementDirection = {}));\r\nclass PlayerSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"] {\r\n    constructor(opts) {\r\n        super(opts);\r\n        this.yv = 0;\r\n        this.xv = 0;\r\n        this.lastMovementDirection = MovementDirection.Right;\r\n        this.onGround = true;\r\n        this.walkingAnimationProgress = 1;\r\n        this.currentFrameProgress = 0;\r\n        this.moving = false;\r\n        this.hasJumpLight = false;\r\n        this.addTask(() => this.run());\r\n        this.addTask(() => this.updateGraphic());\r\n        if (_config__WEBPACK_IMPORTED_MODULE_0__[\"CHEATS\"]) {\r\n            this.addTask(() => this.debugTeleport());\r\n        }\r\n    }\r\n    debugTeleport() {\r\n        if (this.runtime.mouse.isDown) {\r\n            const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.runtime.mouse.position);\r\n            position.x -= this.width / 2;\r\n            position.y -= this.height / 2;\r\n            position.z = this.z;\r\n            this.position = position;\r\n        }\r\n    }\r\n    getInputs() {\r\n        if (this.runtime.isMobile) {\r\n            return this.getMobileInputs();\r\n        }\r\n        else {\r\n            return this.getComputerInputs();\r\n        }\r\n    }\r\n    getComputerInputs() {\r\n        const keys = this.runtime.keyboard.keys;\r\n        const rightDown = keys[39].isPressed || keys[68].isPressed;\r\n        const leftDown = keys[37].isPressed || keys[65].isPressed;\r\n        const upDown = keys[38].isPressed || keys[87].isPressed;\r\n        const upJustPressed = keys[38].justPressed || keys[87].justPressed;\r\n        return {\r\n            rightDown,\r\n            leftDown,\r\n            upDown,\r\n            upJustPressed,\r\n        };\r\n    }\r\n    getMobileInputs() {\r\n        const mouseX = this.runtime.mouse.position.x;\r\n        const mouseY = this.runtime.mouse.position.y;\r\n        const mouseDown = this.runtime.mouse.isDown;\r\n        const grace = this.runtime.canvas.width / 10;\r\n        const moveLeftMax = this.runtime.canvas.width / 3 + grace;\r\n        const moveRightMin = this.runtime.canvas.width / 3 * 2 - grace;\r\n        const moveUpMax = this.runtime.canvas.height / 2;\r\n        const leftDown = mouseDown && mouseX <= moveLeftMax;\r\n        const rightDown = mouseDown && mouseX >= moveRightMin;\r\n        const upDown = mouseDown && mouseY <= moveUpMax;\r\n        const upJustPressed = this.runtime.mouse.isClick;\r\n        return {\r\n            leftDown,\r\n            rightDown,\r\n            upDown,\r\n            upJustPressed,\r\n        };\r\n    }\r\n    run() {\r\n        const prevXv = this.xv;\r\n        const prevYv = this.yv;\r\n        const inputs = this.getInputs();\r\n        this.moving = false;\r\n        if (inputs.rightDown && !inputs.leftDown) {\r\n            this.xv += PLAYER_WALK_SPEED;\r\n            this.lastMovementDirection = MovementDirection.Right;\r\n            this.moving = true;\r\n        }\r\n        if (inputs.leftDown && !inputs.rightDown) {\r\n            this.xv -= PLAYER_WALK_SPEED;\r\n            this.lastMovementDirection = MovementDirection.Left;\r\n            this.moving = true;\r\n        }\r\n        if ((inputs.upDown && this.onGround) || (inputs.upJustPressed && this.hasJumpLight)) {\r\n            this.runtime.playSound(\"player/jump\");\r\n            this.hasJumpLight = false;\r\n            this.yv = JUMP_HEIGHT;\r\n        }\r\n        else if (!inputs.upDown && this.yv > 3) {\r\n            this.yv = 3;\r\n        }\r\n        if ((!inputs.leftDown && !inputs.rightDown) || (inputs.leftDown && inputs.rightDown)) {\r\n            if (this.xv > 0) {\r\n                this.xv -= PLAYER_FRICTION;\r\n                this.xv = Math.max(this.xv, 0);\r\n            }\r\n            else {\r\n                this.xv += PLAYER_FRICTION;\r\n                this.xv = Math.min(this.xv, 0);\r\n            }\r\n        }\r\n        if (this.xv > PLAYER_MAX_SPEED) {\r\n            this.xv = PLAYER_MAX_SPEED;\r\n        }\r\n        else if (this.xv < -PLAYER_MAX_SPEED) {\r\n            this.xv = -PLAYER_MAX_SPEED;\r\n        }\r\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_4__[\"runPhysics\"])(this, {\r\n            friction: false,\r\n        });\r\n        this.onGround = physicsResult;\r\n        if (this.onGround && prevYv < -1.6) {\r\n            this.runtime.playSound(\"player/ding\");\r\n        }\r\n        if (this.onGround) {\r\n            this.hasJumpLight = false;\r\n        }\r\n        if (this.y >= this.runtime.canvas.height) {\r\n            this.kill();\r\n        }\r\n        // if (this.runtime.mouse.isDown) {\r\n        //   this.x = this.runtime.mouse.position.x;\r\n        //   this.y = this.runtime.mouse.position.y;\r\n        // }\r\n    }\r\n    reset() {\r\n        const sprites = this.runtime.blocks.filter((s) => s.solid || s instanceof _blocks_block__WEBPACK_IMPORTED_MODULE_5__[\"PseudoSolidBlock\"]);\r\n        this.position.y = this.runtime.canvas.height - _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\r\n        const spawnType = this.runtime.playerSpawn.type;\r\n        if (spawnType === \"default\") {\r\n            this.position.x = 40;\r\n        }\r\n        else if (spawnType === \"random\") {\r\n            const playerSpawn = this.runtime.playerSpawn;\r\n            var minX = playerSpawn.minX;\r\n            var maxX = playerSpawn.maxX;\r\n            var minY = spawnType === \"random\" ? playerSpawn.minY : this.y;\r\n            var maxY = spawnType === \"random\" ? playerSpawn.maxY : this.y;\r\n            this.position.x = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minX, maxX);\r\n            this.position.y = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minY, maxY);\r\n        }\r\n        else if (spawnType === \"range\") {\r\n            const playerSpawn = this.runtime.playerSpawn;\r\n            var minX = playerSpawn.minX;\r\n            var maxX = playerSpawn.maxX;\r\n            this.x = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minX, maxX);\r\n            // undefined or true act as true\r\n            if (playerSpawn.requireSolid !== false) {\r\n                let tries = 0;\r\n                while (!this.intersects(sprites)) {\r\n                    tries++;\r\n                    if (tries > 1000) {\r\n                        alert(\"Invalid spawn range, can't find solid blocks.\");\r\n                        break;\r\n                    }\r\n                    this.x = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minX, maxX);\r\n                }\r\n            }\r\n        }\r\n        else if (spawnType === \"point\") {\r\n            const playerSpawn = this.runtime.playerSpawn;\r\n            this.position.x = playerSpawn.x;\r\n            this.position.y = playerSpawn.y;\r\n        }\r\n        this.xv = 0;\r\n        this.yv = 0;\r\n        while (this.intersects(sprites)) {\r\n            this.y -= _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\r\n        }\r\n    }\r\n    kill() {\r\n        const fragmentTextures = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"clone\"])(FRAGMENT_TEXTURES);\r\n        const smallPieces = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(FRAGMENT_SMALL_PIECE_MIN, FRAGMENT_SMALL_PIECE_MAX);\r\n        for (let i = 0; i < smallPieces; i++) {\r\n            fragmentTextures.push(FRAGMENT_SMALL_PIECE_TEXTURE);\r\n        }\r\n        for (const i of fragmentTextures) {\r\n            new _fragment__WEBPACK_IMPORTED_MODULE_6__[\"PlayerFragmentSprite\"]({\r\n                position: new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.position),\r\n                texture: this.runtime.getImage(`fragments/${i}`),\r\n                xv: Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(-FRAGMENT_XV_RANGE * 1000, FRAGMENT_XV_RANGE * 1000) / 1000,\r\n                yv: Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(FRAGMENT_YV_MIN * 1000, FRAGMENT_YV_MAX * 1000) / 1000,\r\n                rv: Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(-FRAGMENT_RV_RANGE * 1000, FRAGMENT_RV_RANGE * 1000) / 1000,\r\n            });\r\n        }\r\n        const blocks = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"clone\"])(this.runtime.blocks);\r\n        for (const block of blocks) {\r\n            if (block.needsReinstantiate) {\r\n                const opts = block.spawningOptions;\r\n                block.destroy();\r\n                const constructor = block.type;\r\n                new constructor(opts);\r\n            }\r\n        }\r\n        this.reset();\r\n        this.runtime.playSound(\"player/death\");\r\n    }\r\n    updateGraphic() {\r\n        this.scale.x = this.lastMovementDirection;\r\n        if (this.onGround) {\r\n            if (this.moving) {\r\n                this.currentFrameProgress++;\r\n                if (this.currentFrameProgress === WALK_ANIMATION_LENGTH) {\r\n                    this.currentFrameProgress = 0;\r\n                    this.walkingAnimationProgress++;\r\n                }\r\n                if (this.walkingAnimationProgress > WALK_ANIMATION_FRAMES) {\r\n                    this.walkingAnimationProgress = 1;\r\n                }\r\n                this.texture = this.runtime.getImage(`player/walk${this.walkingAnimationProgress}`);\r\n            }\r\n            else {\r\n                this.texture = this.runtime.getImage(\"player/idle\");\r\n            }\r\n        }\r\n        else {\r\n            if (this.yv < 0.1) {\r\n                this.texture = this.runtime.getImage(\"player/down\");\r\n            }\r\n            else {\r\n                this.texture = this.runtime.getImage(\"player/up\");\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/player/player.ts?");

/***/ }),

/***/ "./src/game/sprites/stars.ts":
/*!***********************************!*\
  !*** ./src/game/sprites/stars.ts ***!
  \***********************************/
/*! exports provided: BackgroundStarsSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BackgroundStarsSprite\", function() { return BackgroundStarsSprite; });\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/task */ \"./src/engine/task.ts\");\n\r\n\r\n/*\r\n * The stars in the background.\r\n */\r\n// How often to update opacity\r\nconst UPDATE_EVERY = 6;\r\n// How many times will it update in each cycle\r\n// One cycle is Dark -> Bright or Bright -> Dark, not both\r\nconst ANIMATION_LENGTH = 10;\r\nclass BackgroundStarsSprite extends _engine_sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\r\n    constructor(opts, positions) {\r\n        super(opts);\r\n        this.progress = 0;\r\n        this.direction = 1;\r\n        this.renderCache = [];\r\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\r\n            repeatEvery: UPDATE_EVERY,\r\n            run: () => this.animate(),\r\n        }));\r\n        const path = new Path2D();\r\n        for (const position of positions) {\r\n            path.rect(position.x, position.y, this.width, this.height);\r\n        }\r\n        for (let i = 0; i <= ANIMATION_LENGTH; i++) {\r\n            const { canvas, ctx } = this.runtime.createCanvas();\r\n            this.renderStarPath(ctx, path, i / ANIMATION_LENGTH);\r\n            this.renderCache[i] = canvas;\r\n        }\r\n    }\r\n    animate() {\r\n        this.progress += this.direction;\r\n        if (this.progress === 0 || this.progress === 10) {\r\n            this.direction *= -1;\r\n        }\r\n    }\r\n    clamp(x, min, max) {\r\n        if (x < min) {\r\n            return min;\r\n        }\r\n        else if (x > max) {\r\n            return max;\r\n        }\r\n        else {\r\n            return x;\r\n        }\r\n    }\r\n    renderStarPath(ctx, path, alpha) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        ctx.fillStyle = \"white\";\r\n        ctx.globalAlpha = alpha;\r\n        ctx.fill(path);\r\n    }\r\n    render(ctx) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        const image = this.renderCache[this.progress];\r\n        ctx.drawImage(image, 0, 0, image.width, image.height);\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/stars.ts?");

/***/ }),

/***/ "./src/game/sprites/text/NightlightTextSprite.ts":
/*!*******************************************************!*\
  !*** ./src/game/sprites/text/NightlightTextSprite.ts ***!
  \*******************************************************/
/*! exports provided: CHAR_WIDTH, CHAR_HEIGHT, CHAR_MAP, NightlightTextSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHAR_WIDTH\", function() { return CHAR_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHAR_HEIGHT\", function() { return CHAR_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHAR_MAP\", function() { return CHAR_MAP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NightlightTextSprite\", function() { return NightlightTextSprite; });\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprite */ \"./src/engine/sprite.ts\");\n\r\nconst CHAR_WIDTH = 8;\r\nconst CHAR_HEIGHT = CHAR_WIDTH;\r\nconst TEXTURE_FOLDER = \"text/\";\r\n// map of specially treated letters to their real path or behavior\r\nconst CHAR_MAP = {\r\n    \" \": \"skip\",\r\n    \".\": \"period\",\r\n    \"'\": \"singlequote\",\r\n    \":\": \"colon\",\r\n    \"?\": \"question\",\r\n};\r\nclass NightlightTextSprite extends _engine_sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\r\n    constructor(options) {\r\n        super(options);\r\n        this.static = false;\r\n        this.text = options.text;\r\n    }\r\n    render(ctx) {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        for (let i = 0; i < this.text.length; i++) {\r\n            const originalChar = this.text[i].toLowerCase();\r\n            const char = CHAR_MAP[originalChar] || originalChar;\r\n            if (char === \"skip\") {\r\n                continue;\r\n            }\r\n            const x = this.x + (i * CHAR_WIDTH);\r\n            const texture = this.runtime.getImage(TEXTURE_FOLDER + char);\r\n            ctx.drawImage(texture, x, this.y, Math.max(CHAR_WIDTH, texture.width), CHAR_HEIGHT);\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/text/NightlightTextSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/text/StaticNightlightTextSprite.ts":
/*!*************************************************************!*\
  !*** ./src/game/sprites/text/StaticNightlightTextSprite.ts ***!
  \*************************************************************/
/*! exports provided: StaticNightlightTextSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StaticNightlightTextSprite\", function() { return StaticNightlightTextSprite; });\n/* harmony import */ var _NightlightTextSprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n\r\nclass StaticNightlightTextSprite extends _NightlightTextSprite__WEBPACK_IMPORTED_MODULE_0__[\"NightlightTextSprite\"] {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.static = true;\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/text/StaticNightlightTextSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/zindex.ts":
/*!************************************!*\
  !*** ./src/game/sprites/zindex.ts ***!
  \************************************/
/*! exports provided: ZIndexes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ZIndexes\", function() { return ZIndexes; });\n// All z indexes are defined here to avoid magic numbers and using 9999999\r\n// Reminder: Static stuff renders at -1\r\nvar ZIndexes;\r\n(function (ZIndexes) {\r\n    ZIndexes[ZIndexes[\"Stars\"] = -10] = \"Stars\";\r\n    ZIndexes[ZIndexes[\"Block\"] = 0] = \"Block\";\r\n    ZIndexes[ZIndexes[\"Grass\"] = 1] = \"Grass\";\r\n    ZIndexes[ZIndexes[\"Player\"] = 10] = \"Player\";\r\n    ZIndexes[ZIndexes[\"FinalBoss\"] = 20] = \"FinalBoss\";\r\n    ZIndexes[ZIndexes[\"PauseMenu\"] = 100] = \"PauseMenu\";\r\n})(ZIndexes || (ZIndexes = {}));\r\n\n\n//# sourceURL=webpack:///./src/game/sprites/zindex.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _editor_editor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./editor/editor */ \"./src/editor/editor.ts\");\n/* harmony import */ var _game_game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game/game */ \"./src/game/game.ts\");\n/* harmony import */ var _levelcode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./levelcode */ \"./src/levelcode.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n\r\n\r\n\r\n\r\n\r\n/*\r\n * The loader.\r\n *\r\n * It creates the game object, adds in assets, and starts the game.\r\n */\r\nfunction getRuntime() {\r\n    if (Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getSearchParam\"])(\"m\") === \"leveleditor\") {\r\n        return new _editor_editor__WEBPACK_IMPORTED_MODULE_0__[\"NightlightLevelEditor\"]();\r\n    }\r\n    else {\r\n        return new _game_game__WEBPACK_IMPORTED_MODULE_1__[\"Nightlight\"]();\r\n    }\r\n}\r\nconst game = getRuntime();\r\n// later made visibile in run()\r\ngame.canvas.style.display = \"none\";\r\n// add in all of our assets\r\n//\r\n// Pre sword and core\r\n//\r\ngame.addImage(\"player/idle\");\r\ngame.addImage(\"player/up\");\r\ngame.addImage(\"player/down\");\r\ngame.addImage(\"player/walk1\");\r\ngame.addImage(\"player/walk2\");\r\ngame.addImage(\"player/walk3\");\r\ngame.addImage(\"player/walk4\");\r\ngame.addImage(\"text/a\");\r\ngame.addImage(\"text/b\");\r\ngame.addImage(\"text/c\");\r\ngame.addImage(\"text/d\");\r\ngame.addImage(\"text/e\");\r\ngame.addImage(\"text/f\");\r\ngame.addImage(\"text/g\");\r\ngame.addImage(\"text/h\");\r\ngame.addImage(\"text/i\");\r\ngame.addImage(\"text/j\");\r\ngame.addImage(\"text/k\");\r\ngame.addImage(\"text/l\");\r\ngame.addImage(\"text/m\");\r\ngame.addImage(\"text/n\");\r\ngame.addImage(\"text/o\");\r\ngame.addImage(\"text/p\");\r\ngame.addImage(\"text/q\");\r\ngame.addImage(\"text/r\");\r\ngame.addImage(\"text/s\");\r\ngame.addImage(\"text/t\");\r\ngame.addImage(\"text/u\");\r\ngame.addImage(\"text/v\");\r\ngame.addImage(\"text/w\");\r\ngame.addImage(\"text/x\");\r\ngame.addImage(\"text/y\");\r\ngame.addImage(\"text/z\");\r\ngame.addImage(\"text/0\");\r\ngame.addImage(\"text/1\");\r\ngame.addImage(\"text/2\");\r\ngame.addImage(\"text/3\");\r\ngame.addImage(\"text/4\");\r\ngame.addImage(\"text/5\");\r\ngame.addImage(\"text/6\");\r\ngame.addImage(\"text/7\");\r\ngame.addImage(\"text/8\");\r\ngame.addImage(\"text/9\");\r\ngame.addImage(\"text/period\");\r\ngame.addImage(\"text/question\");\r\ngame.addImage(\"text/,\");\r\ngame.addImage(\"text/!\");\r\ngame.addImage(\"text/singlequote\");\r\ngame.addImage(\"text/colon\");\r\ngame.addImage(\"fragments/1\");\r\ngame.addImage(\"fragments/2\");\r\ngame.addImage(\"fragments/3\");\r\ngame.addImage(\"fragments/4\");\r\ngame.addImage(\"fragments/5\");\r\ngame.addImage(\"coin/1\");\r\ngame.addImage(\"coin/2\");\r\ngame.addImage(\"coin/3\");\r\ngame.addImage(\"coin/4\");\r\ngame.addImage(\"blocks/a\");\r\ngame.addImage(\"blocks/b\");\r\ngame.addImage(\"blocks/c\");\r\ngame.addImage(\"blocks/d\");\r\ngame.addImage(\"blocks/e\");\r\ngame.addImage(\"blocks/f\");\r\ngame.addImage(\"blocks/g\");\r\ngame.addImage(\"blocks/h\");\r\ngame.addImage(\"blocks/i\");\r\ngame.addImage(\"blocks/j\");\r\ngame.addImage(\"blocks/k\");\r\ngame.addImage(\"blocks/l\");\r\ngame.addImage(\"blocks/m\");\r\ngame.addImage(\"blocks/n\");\r\ngame.addImage(\"blocks/p\");\r\ngame.addImage(\"blocks/q\");\r\ngame.addImage(\"blocks/r\");\r\ngame.addImage(\"blocks/s\");\r\ngame.addImage(\"blocks/v\");\r\ngame.addImage(\"blocks/w\");\r\ngame.addImage(\"blocks/y\");\r\ngame.addImage(\"blocks/z\");\r\ngame.addImage(\"blocks/editory\");\r\ngame.addImage(\"blocks/capitaly\");\r\ngame.addImage(\"blocks/capitalz\");\r\ngame.addImage(\"blocks/capitalo\");\r\ngame.addImage(\"blocks/capitalp\");\r\ngame.addImage(\"blocks/capitalq\");\r\ngame.addImage(\"blocks/capitalr\");\r\ngame.addImage(\"blocks/closingcurlybracket\");\r\ngame.addImage(\"blocks/button/redgreen/button\");\r\ngame.addImage(\"blocks/button/redgreen/button2\");\r\ngame.addImage(\"blocks/button/redgreen/spawner\");\r\ngame.addImage(\"blocks/button/redgreen/spawner2\");\r\ngame.addImage(\"blocks/button/aquaorange/button\");\r\ngame.addImage(\"blocks/button/aquaorange/button2\");\r\ngame.addImage(\"blocks/button/aquaorange/spawner\");\r\ngame.addImage(\"blocks/button/aquaorange/spawner2\");\r\ngame.addImage(\"blocks/crumble/1\");\r\ngame.addImage(\"blocks/crumble/2\");\r\ngame.addImage(\"blocks/crumble/3\");\r\ngame.addImage(\"blocks/crumble/4\");\r\ngame.addImage(\"blocks/crumble/5\");\r\ngame.addImage(\"blocks/crumble/6\");\r\ngame.addImage(\"blocks/crumble/7\");\r\ngame.addImage(\"blocks/crumble/8\");\r\ngame.addImage(\"blocks/crumble/9\");\r\ngame.addImage(\"blocks/spikes/up\");\r\ngame.addImage(\"blocks/spikes/down\");\r\ngame.addImage(\"blocks/spikes/left\");\r\ngame.addImage(\"blocks/spikes/right\");\r\ngame.addImage(\"boss/sword/sword\");\r\ngame.addImage(\"boss/sword/open\");\r\ngame.addImage(\"boss/sword/heal\");\r\ngame.addImage(\"boss/sword/hurt\");\r\ngame.addImage(\"hit/-1\");\r\ngame.addImage(\"hit/+1\");\r\ngame.addImage(\"hit/+0\");\r\n//\r\n// Post sword\r\n//\r\ngame.addImage(\"blocks/1\");\r\ngame.addImage(\"blocks/2\");\r\ngame.addImage(\"blocks/3\");\r\ngame.addImage(\"blocks/4\");\r\ngame.addImage(\"blocks/5\");\r\ngame.addImage(\"blocks/6\");\r\ngame.addImage(\"blocks/7\");\r\ngame.addImage(\"blocks/8\");\r\ngame.addImage(\"blocks/9\");\r\ngame.addImage(\"blocks/!\");\r\ngame.addImage(\"blocks/singlequote\");\r\ngame.addImage(\"blocks/lightbutton/1\");\r\ngame.addImage(\"blocks/lightbutton/2\");\r\ngame.addImage(\"blocks/lightbutton/down\");\r\ngame.addImage(\"jumplight\");\r\ngame.addImage(\"blackjumplight\");\r\n// Noss\r\ngame.addImage(\"boss/noss/noss\");\r\ngame.addImage(\"boss/noss/hit\");\r\ngame.addImage(\"boss/noss/rest\");\r\ngame.addImage(\"boss/noss/bullet\");\r\ngame.addImage(\"boss/noss/dust\");\r\n//\r\n// Castle\r\n//\r\ngame.addImage(\"brick\");\r\ngame.addImage(\"blocks/caret\");\r\ngame.addImage(\"blocks/ampersand\");\r\ngame.addImage(\"blocks/asterisk\");\r\ngame.addImage(\"blocks/(\");\r\ngame.addImage(\"blocks/)\");\r\ngame.addImage(\"blocks/-\");\r\ngame.addImage(\"blocks/underscore\");\r\ngame.addImage(\"blocks/=\");\r\ngame.addImage(\"blocks/+\");\r\ngame.addImage(\"blocks/grave\");\r\ngame.addImage(\"blocks/capitals\");\r\ngame.addImage(\"blocks/capitalt\");\r\ngame.addImage(\"blocks/capitalv\");\r\ngame.addImage(\"blocks/castlecorner/topright\");\r\ngame.addImage(\"blocks/castlecorner/topleft\");\r\ngame.addImage(\"blocks/castlecorner/bottomright\");\r\ngame.addImage(\"blocks/castlecorner/bottomleft\");\r\ngame.addImage(\"blocks/capitala\");\r\ngame.addImage(\"blocks/capitalb\");\r\ngame.addImage(\"blocks/capitalc\");\r\ngame.addImage(\"blocks/capitald\");\r\ngame.addImage(\"blocks/capitale\");\r\ngame.addImage(\"blocks/capitalf\");\r\ngame.addImage(\"blocks/capitalg\");\r\ngame.addImage(\"blocks/capitalh\");\r\ngame.addImage(\"blocks/capitali\");\r\ngame.addImage(\"blocks/capitalj\");\r\ngame.addImage(\"blocks/capitalk\");\r\ngame.addImage(\"blocks/capitall\");\r\ngame.addImage(\"blocks/capitalm\");\r\ngame.addImage(\"blocks/capitaln\");\r\ngame.addImage(\"blocks/capitalw\");\r\ngame.addImage(\"blocks/pipe\");\r\n// ending\r\ngame.addImage(\"end/scene\");\r\ngame.addImage(\"thumb\");\r\n// pause\r\ngame.addImage(\"pause\");\r\n//\r\n// Sounds\r\n//\r\ngame.addSound(\"blocks/coin\");\r\ngame.addSound(\"blocks/break\");\r\ngame.addSound(\"blocks/fall\");\r\ngame.addSound(\"blocks/smash\");\r\ngame.addSound(\"blocks/button\");\r\ngame.addSound(\"blocks/fds\");\r\ngame.addSound(\"player/death\");\r\ngame.addSound(\"player/ding\");\r\ngame.addSound(\"player/jump\");\r\n// boss\r\ngame.addSound(\"boss/ouch\");\r\ngame.addSound(\"boss/sword/rumble\");\r\ngame.addSound(\"boss/noss/shadow1\");\r\ngame.addSound(\"boss/noss/shadow2\");\r\ngame.addSound(\"boss/noss/shadow3\");\r\ngame.addSound(\"boss/noss/shadow4\");\r\ngame.addSound(\"boss/shadow5\");\r\n// background music\r\ngame.addSound(\"music/exploration\");\r\ngame.addSound(\"music/netherslament\");\r\ngame.addSound(\"music/challenge\");\r\ngame.addSound(\"music/boss/1\");\r\ngame.addSound(\"music/boss/2\");\r\ngame.addSound(\"music/blackroad/1\");\r\ngame.addSound(\"music/blackroad/2\");\r\ngame.addSound(\"music/finalboss/1\");\r\ngame.addSound(\"music/finalboss/2\");\r\n// html elements\r\nconst progressBar = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"progress-bar\");\r\nconst menuContainer = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"menu-container\");\r\nconst loadingScreen = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"loading-screen\");\r\nconst menuBackground = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"menu-background\");\r\nconst menuScreen = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"menu-screen\");\r\nconst playButton = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"play-button\");\r\nconst loadCodeButton = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"load-code-button\");\r\nconst loadCodeFromUrlButton = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"load-code-url-button\");\r\nconst cheatsInterface = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"cheats-interface\");\r\n// wait for it to load then run our stuff\r\ngame.waitForAssets((progress) => {\r\n    // show a progress bar\r\n    const value = progress * 100;\r\n    progressBar.style.width = value + \"%\";\r\n}).then(() => canPlay());\r\nfunction canPlay() {\r\n    if (game instanceof _game_game__WEBPACK_IMPORTED_MODULE_1__[\"Nightlight\"]) {\r\n        const autorun = !!Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getSearchParam\"])(\"autorun\");\r\n        const urlLevelParam = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getSearchParam\"])(\"level\") || \"\";\r\n        const loadLevelFromUrl = () => runLevelCode(urlLevelParam);\r\n        if (autorun) {\r\n            try {\r\n                if (urlLevelParam) {\r\n                    loadLevelFromUrl();\r\n                }\r\n                else {\r\n                    run();\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                // TODO: handle this\r\n                throw e;\r\n            }\r\n        }\r\n        playButton.addEventListener(\"click\", () => run());\r\n        loadCodeButton.addEventListener(\"click\", () => {\r\n            // chrome (and probably others) limit prompt default value to 2000 or so characters\r\n            const TOO_LONG_TO_SHOW_MESSAGE = \"(too long to safely show in this box, but enter will still work as expected)\";\r\n            let defaultValue;\r\n            if (urlLevelParam.length > 2000) {\r\n                defaultValue = TOO_LONG_TO_SHOW_MESSAGE;\r\n            }\r\n            else {\r\n                defaultValue = urlLevelParam;\r\n            }\r\n            let code = prompt(\"Enter the level code:\", defaultValue);\r\n            if (code === TOO_LONG_TO_SHOW_MESSAGE) {\r\n                code = urlLevelParam;\r\n            }\r\n            if (code === null) {\r\n                return;\r\n            }\r\n            runLevelCode(code);\r\n        });\r\n        if (urlLevelParam) {\r\n            loadCodeFromUrlButton.addEventListener(\"click\", () => loadLevelFromUrl());\r\n            loadCodeFromUrlButton.style.display = \"inline\";\r\n        }\r\n        menuBackground.classList.add(\"active\");\r\n        loadingScreen.style.display = \"none\";\r\n        menuScreen.style.display = \"block\";\r\n    }\r\n    else {\r\n        run();\r\n    }\r\n}\r\nfunction showCanvas() {\r\n    menuContainer.style.display = \"none\";\r\n    game.canvas.style.display = \"\";\r\n}\r\nfunction runLevelCode(code) {\r\n    if (!(game instanceof _game_game__WEBPACK_IMPORTED_MODULE_1__[\"Nightlight\"])) {\r\n        throw new Error(\"not in game\");\r\n    }\r\n    const importCode = (str) => {\r\n        if (code.length === 8) {\r\n            // resume code\r\n            const level = Object(_levelcode__WEBPACK_IMPORTED_MODULE_2__[\"getLevelForContinueCode\"])(str);\r\n            game.level = level;\r\n            run();\r\n        }\r\n        else {\r\n            // probably a full level code\r\n            const level = Object(_levelcode__WEBPACK_IMPORTED_MODULE_2__[\"getLevelForCode\"])(code);\r\n            showCanvas();\r\n            game.start([level]);\r\n        }\r\n    };\r\n    try {\r\n        importCode(code);\r\n    }\r\n    catch (e) {\r\n        alert(`Error: ${e.message}`);\r\n    }\r\n    Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"setSearchParam\"])(\"level\", code);\r\n}\r\nfunction run() {\r\n    showCanvas();\r\n    game.start();\r\n}\r\ncheatsInterface.style.display = _config__WEBPACK_IMPORTED_MODULE_4__[\"CHEATS\"] ? \"block\" : \"none\";\r\n\n\n//# sourceURL=webpack:///./src/index.ts?");

/***/ }),

/***/ "./src/levelcode.ts":
/*!**************************!*\
  !*** ./src/levelcode.ts ***!
  \**************************/
/*! exports provided: LEVEL_CODE_LENGTH, getLevelForCode, getLevelForContinueCode, getContinueCodeForLevel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LEVEL_CODE_LENGTH\", function() { return LEVEL_CODE_LENGTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLevelForCode\", function() { return getLevelForCode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLevelForContinueCode\", function() { return getLevelForContinueCode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getContinueCodeForLevel\", function() { return getContinueCodeForLevel; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\r\n\r\nconst LEVEL_CODE_LENGTH = _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_HEIGHT\"] * _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"];\r\nfunction getLevelForCode(str) {\r\n    const isJson = str.startsWith(\"{\");\r\n    if (isJson) {\r\n        try {\r\n            var json = JSON.parse(str);\r\n        }\r\n        catch (e) {\r\n            throw new Error(\"Invalid JSON input\");\r\n        }\r\n        return getJsonLevel(json);\r\n    }\r\n    else {\r\n        return getStringLevel(str);\r\n    }\r\n}\r\nfunction getJsonLevel(json) {\r\n    if (typeof json.levelData === \"undefined\" || json.levelData.length !== LEVEL_CODE_LENGTH) {\r\n        throw new Error(\"Invalid level data in JSON input\");\r\n    }\r\n    if (typeof json.dark === \"undefined\") {\r\n        json.dark = false;\r\n    }\r\n    if (typeof json.stars === \"undefined\") {\r\n        json.stars = true;\r\n    }\r\n    if (typeof json.background === \"undefined\") {\r\n        json.background = \"black\";\r\n    }\r\n    return json;\r\n}\r\nfunction getStringLevel(str) {\r\n    if (str.length !== LEVEL_CODE_LENGTH) {\r\n        throw new Error(`Invalid input`);\r\n    }\r\n    return {\r\n        levelData: str,\r\n        stars: true,\r\n        dark: false,\r\n        background: \"black\",\r\n        backgroundMusic: [\"music/exploration\"],\r\n    };\r\n}\r\nfunction getLevelForContinueCode(code) {\r\n    if (code.length !== 8) {\r\n        throw new Error(\"Invalid input\");\r\n    }\r\n    if (Math.floor(+code) !== +code) {\r\n        throw new Error(\"Invalid input\");\r\n    }\r\n    const level = +(code[1] + code[4]);\r\n    if (level < 0) {\r\n        throw new Error(\"Invalid input\");\r\n    }\r\n    if (!isFinite(level)) {\r\n        throw new Error(\"Invalid input\");\r\n    }\r\n    return level;\r\n}\r\nfunction getContinueCodeForLevel(nlevel) {\r\n    let level = nlevel.toString();\r\n    if (level.length === 1) {\r\n        level = \"0\" + level;\r\n    }\r\n    let result = \"\";\r\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\r\n    result += level[0];\r\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\r\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\r\n    result += level[1];\r\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\r\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\r\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\r\n    return result;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/levelcode.ts?");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: getRandomInt, clone, scratchCoordinate, clamp, splitToChunks, getElementById, getSearchParam, setSearchParam */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRandomInt\", function() { return getRandomInt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clone\", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"scratchCoordinate\", function() { return scratchCoordinate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clamp\", function() { return clamp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"splitToChunks\", function() { return splitToChunks; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getElementById\", function() { return getElementById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSearchParam\", function() { return getSearchParam; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setSearchParam\", function() { return setSearchParam; });\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine/vector */ \"./src/engine/vector.ts\");\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n// Clones an array\r\n// Allows you to use inplace methods on an array without changing the actual array\r\n// (eg. sort)\r\nfunction clone(array) {\r\n    let i = array.length;\r\n    const result = [];\r\n    while (i--) {\r\n        result[i] = array[i];\r\n    }\r\n    return result;\r\n}\r\n// Converts Scratch coordinates to coordinates this game will understand\r\nfunction scratchCoordinate(x, y) {\r\n    return new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](x + 236, (360 - y) - 184);\r\n}\r\nfunction clamp(x, min, max) {\r\n    if (x < min) {\r\n        return min;\r\n    }\r\n    else if (x > max) {\r\n        return max;\r\n    }\r\n    else {\r\n        return x;\r\n    }\r\n}\r\n// https://stackoverflow.com/a/6259536\r\nfunction splitToChunks(str, chunkSize) {\r\n    const chunks = [];\r\n    for (let i = 0; i < str.length; i += chunkSize) {\r\n        chunks.push(str.substring(i, i + chunkSize));\r\n    }\r\n    return chunks;\r\n}\r\nfunction getElementById(id) {\r\n    const el = document.getElementById(id);\r\n    if (el === null) {\r\n        throw new Error(\"No element with id \" + id);\r\n    }\r\n    return el;\r\n}\r\nfunction getSearchParam(target) {\r\n    const allParams = location.search.substr(1).split(\"&\");\r\n    for (const param of allParams) {\r\n        const name = param.substr(0, param.indexOf(\"=\"));\r\n        const val = param.substr(param.indexOf(\"=\") + 1);\r\n        if (name === target) {\r\n            return unescape(val);\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction setSearchParam(name, newVal) {\r\n    const map = new Map();\r\n    const allParams = location.search.substr(1).split(\"&\");\r\n    for (const param of allParams) {\r\n        const k = param.substr(0, param.indexOf(\"=\"));\r\n        const v = param.substr(param.indexOf(\"=\") + 1);\r\n        map.set(k, v);\r\n    }\r\n    map.set(name, escape(newVal));\r\n    let newSearch = \"\";\r\n    for (const key of map.keys()) {\r\n        if (key === \"\") {\r\n            continue;\r\n        }\r\n        const val = map.get(key);\r\n        if (val === \"\") {\r\n            continue;\r\n        }\r\n        const divider = newSearch.length === 0 ? \"?\" : \"&\";\r\n        newSearch += `${divider}${key}=${val}`;\r\n    }\r\n    history.pushState({}, \"\", newSearch);\r\n}\r\n\n\n//# sourceURL=webpack:///./src/utils.ts?");

/***/ })

/******/ });