<!DOCTYPE html>
<html>
  <head>
    <title>Campus Auto Login</title>
    <link rel="stylesheet" href="/core.css">
    <style>
      .no-margin {
        margin: 0;
      }
      .gray {
        color: gray;
      }
      button {
        font-size: 1.25em;
        cursor: pointer;
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>

  <body>
    <h1>Campus Auto Login (v3.3)</h1>
    <hr>

    <img src="pic.png">

    <p>Auto login to the District 112 campus portal and <a href="#supported">other supported sites</a>!</p>

    <h3>Installation (for Chrome, any platform)</h3>
    <p>
      <ol>
        <li>Install <a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en">TamperMonkey</a>.</li>
        <li>Click the button below and then "Install".</li>
        <li>You're done. It will update automatically.</li>
      </ol>
    </p>

    <button onclick="return openScript();"><b>Click here to install it</b> (after reading the above and preferably the below)</button>
    <p class="gray">Button doesn't work? <a href="campus-auto-login.user.js">Click here instead.</a></p>

    <hr>

    <h3>What does it do?</h3>
    <p>What it does exactly can vary from site to site, but know that it usually signs you in automatically! (after setting credentials, of course)</p>

    <p>It will detect incorrect passwords or captchas and stop submitting and reset passwords. (you will have to tell this to remember them again with the "Remember Me" button)</p>

    <p>On some sites it will not resubmit if you have recently logged out, only fill the password boxes.</p>

    <hr>

    <h3 id="supported">Supported sites</h3>
    <ul>
      <li>
        <a href="https://campus.district112.org/campus/portal/isd112.jsp">Old Portal</a>
        <ul>
          <li>See <a href="#basic">basic usage</a>.</li>
          <li>Credentials are shared between old and new portal.</li>
        </ul>
      </li>

      <li>
        <a href="https://campus.district112.org/campus/portal/students/isd112.jsp">New Portal</a>
        <ul>
            <li>See <a href="#basic">basic usage</a>.</li>
          <li>Credentials are shared between old and new portal.</li>
        </ul>
      </li>

      <li>
        <a href="https://student.teachtci.com/student/sign_in">Big Ideas Math (BIM)</a>
        <ul>
            <li>See <a href="#basic">basic usage</a>.</li>
        </ul>
      </li>

      <li>
        <a href="https://www.bigideasmath.com/BIM/login">TeachTCI</a>
        <ul>
            <li>See <a href="#basic">basic usage</a>.</li>
        </ul>
      </li>

      <li>
        <a href="https://empower.district112.org">Empower</a> (although very limited)
        <ul>
          <li><b><a href="https://youtu.be/PdQLOfaAReQ">Enable popups</a>.</b> (that button will show up if the popups were blocked, if you're on a school chromebook they're already enabled)</li>
          <li>It will automatically click Sign in with google.</li>
          <li>It will automatically allow Empower any permissions it want.</li>
          <li>It will automatically click messages to grant Empower drive permissions.</li>
          <li>It can be configured to automatically pick a Google account.</li>
        </ul>
      </li>
    </ul>

    <hr>

    <h3 id="basic">Basic Usage</h3>
    <p>
      Here's the basic usage for most sites. Some sites have additional changes, see above.
      <ol>
        <li>Visit a <a href="#supported">supported site</a>.</li>
        <li>Enter your username and password into the boxes like usual.</li>
        <li>
          Instead of clicking "Submit", click the "Remember Me" button this has created.<br>
          (it's spot varies for each page, but it's usually near the "Forgot Password" button)
        </li>
        <li>You're good to go, from now on it will automatically set the fields and click submit.</li>
      </ol>
    </p>

    <hr>

    <h3>Config</h3>
    <p>You only need to read this if you want to edit the config.</p>
    <p>This script is configurable, you can enable/disable support for sites or other features.</p>
    <h4>How to edit it</h4>
    <ol>
      <li>Click on the tampermonkey extension icon</li>
      <li>Click on dashboard</li>
      <li>Find this script and click on it.</li>
      <li>Scroll through the code until you find an area labeled "Config". It's currently on line 46.</li>
      <li>
        Here you can change values to change how the script functions.<br>
        Don't forget the comma at and it is case sensitive.
      </li>
    </ol>

    <pre>
      const CONFIG = {
        SUPPORT_OLD_CAMPUS: true, // should it support the old campus?
        SUPPORT_NEW_CAMPUS: true, // should it support the new campus?
        SUPPORT_TCI: true,        // should it support TeachTCI?
        SUPPORT_BIM: true,        // should it support BIM?
        SUPPORT_EMPOWER: true,    // should it support empower?
        EMPOWER: {                // empower config
            DRIVE_ACCESS: true,   // should it automatically click the button to grant drive permissions
                                  // this one: https://i.imgur.com/hpDHhUf.png
            GOOGLE_USER: -1,      // what user should it automatically pick for empower?
                                  // this is 0 indexed, that means that the first user is 0, the second is 1, third is 2, etc.
                                  // set to -1 to disable
                                  // see: https://i.imgur.com/tqafElG.png
            GOOGLE_CONSENT: true, // should it automatically give empower the permissions it need?
                                  // this one: https://i.imgur.com/5fTtvu0.png
        },
        ALWAYS_SUBMIT: false,     // should it always click the signin button?
                                  // WARNING: IT WILL IGNORE INVALID CREDENTIALS AND ALWAYS CLICK SUBMIT
                                  // THIS IS A TERRIBLE IDEA
                                  // THIS WILL LIKELY BE REMOVED IN A FUTURE RELEASE
                                  // (or fixed to not be as terrible)
      };
    </pre>
    <p>As of now, this is what the config looks like, with added comments. (the stuff after the <code>//</code> is ignored.)</p>

    <p>Currently the config is reset between updates, I'm looking for a better way to do this. (maybe a config page instead? idk, that's the most likely)</p>

    <hr>

    <h3>Changelog</h3>
    <p class="no-margin" id="v3.3">
      <b>v3.3</b>:
      <ul class="no-margin">
        <li>Added very basic support for <a href="https://empower.district112.org">Empower</a></li>
        <li>It will automatically click a couple buttons.</li>
        <li>It can be configured to automatically pick a Google account.</li>
        <li><b><a href="https://youtu.be/PdQLOfaAReQ">You must enable popups for it to work.</a></b></li>
        <li>I'll add some more documentation on it at a later date.</li>
      </ul>
    </p>

    <p class="no-margin" id="v3.2">
      <b>v3.2</b>:
      <ul class="no-margin">
        <li>Added support for <a href="https://www.bigideasmath.com/BIM/login">Big Ideas Math (BIM)</a></li>
        <li>It works the same as the others. Credentials are not shared with campus or TCI.</li>
        <li>Removes a couple more old storage locations from older scripts. (it used cookies back then, man!)</li>
        <li>Start of rebranding from "Campus Auto Login" to "District 112 Auto Login"</li>
      </ul>
    </p>

    <p class="no-margin" id="v3.1">
      <b>v3.1</b>:
      <ul class="no-margin">
        <li><b>How your information is stored has changed. You will have to re-enter your credentials for any site this supports.</b></li>
        <li>Added support for <a href="https://student.teachtci.com/student/sign_in">TCI</a></li>
        <li>It works the same but now you must also enter a teacher name. Credentials are NOT shared between Portal and TCI.</li>
        <li>Added usage and license info in the source.</li>
        <li>Fixed the config. Previously it did nothing. Now it can disable support for any sites this supports.</li>
        <li>In the code find a line saying <code>// CONFIG</code>. Below it is the config. From there you can change <code>const SUPPORT_TCI = true;</code> to <code>const SUPPORT_TCI = false;</code> to disable support for TCI. (case sensitive)</li>
        <li>Lots of changes on the code level.</li>
      </ul>
    </p>

    <p class="no-margin" id="v3.0">
      <b>v3.0</b>:
      <ul class="no-margin">
        <li>Complete rewrite in typescript instead of javascript. (transpiles to javascript)</li>
        <li>The method of saving passwords has changed. You now enter your passwords into the boxes then click "Remember Me"</li>
        <li>Your passwords should (in theory) be stored between restarts. This is really big.</li>
        <li>You now only need to set your stuff on one version of portal. The credentials are shared.</li>
      </ul>
    </p>
    <p id="v2.2"><b>v2.2</b>: added support for the new portal AND the old. should work as you would expect.</p>

    <hr>

    <h3>How is this different than a password manager?</h3>
    <!-- fun fact: you can use both (and i do) -->
    <p>This is not a password manager. It is not meant to be a replacement. It can't be a replacement.</p>
    <p>This does not offer critical password manager tools and options, because it is not one.</p>
    <p>This is designed for specific sites and works well with them and has features a password manager might not be able to provide.</p>
    <p>This is lightweight, doesn't require an account, and doesn't store your passwords on the cloud.</p>
    <p>This is free, has no ads, doesn't ask for you to hand over your bank account, and the code is open to all.</p>
    <p>This works in your browser, on any browser, on any device.</p>

    <hr>

    <p>By GarboMuffin - use at your own risk</p>

    <script>
      function openScript(){
        // open the new window and close it
        // tampermonkey opens its install prompt and leaves the old window as an empty tab
        var w = window.open("campus-auto-login.user.js");
        if (w){
          w.close();
        }else{
          // some popup blockers make it fail, so provide alternative link
          alert("Couldn't open popup. Do you have them disabled?\n\nTry alternative link.");
        }
      }
    </script>
  </body>
</html>
